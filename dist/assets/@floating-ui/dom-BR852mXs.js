import{g as T,i as H,a as S,c as y,b as O,d as A,e as W,r as _,f as b,m as q,h as M,j as E,k as D,l as $}from"./utils-C56Lz_0d.js";function N(e){const t=W(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=M(e),c=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=E(n)!==c||E(r)!==i;return s&&(n=c,r=i),{width:n,height:r,$:s}}function C(e){return H(e)?e:e.contextElement}function B(e){const t=C(e);if(!M(t))return y(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:c}=N(t);let i=(c?E(n.width):n.width)/r,s=(c?E(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const U=y(0);function j(e){const t=O(e);return!D()||!t.visualViewport?U:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function K(e,t,n){return!1}function I(e,t,n,r){t===void 0&&(t=!1);const o=e.getBoundingClientRect(),c=C(e);let i=y(1);t&&(i=B(e));const s=K()?j(c):y(0);let u=(o.left+s.x)/i.x,f=(o.top+s.y)/i.y,v=o.width/i.x,p=o.height/i.y;if(c){const w=O(c),h=r;let g=w,a=A(g);for(;a&&r&&h!==g;){const d=B(a),l=a.getBoundingClientRect(),m=W(a),x=l.left+(a.clientLeft+parseFloat(m.paddingLeft))*d.x,R=l.top+(a.clientTop+parseFloat(m.paddingTop))*d.y;u*=d.x,f*=d.y,v*=d.x,p*=d.y,u+=x,f+=R,g=O(a),a=A(g)}}return _({width:v,height:p,x:u,y:f})}function V(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function k(e,t){let n=null,r;const o=S(e);function c(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),c();const f=e.getBoundingClientRect(),{left:v,top:p,width:w,height:h}=f;if(s||t(),!w||!h)return;const g=b(p),a=b(o.clientWidth-(v+w)),d=b(o.clientHeight-(p+h)),l=b(v),x={rootMargin:-g+"px "+-a+"px "+-d+"px "+-l+"px",threshold:q(0,$(1,u))||1};let R=!0;function L(z){const F=z[0].intersectionRatio;if(F!==u){if(!R)return i();F?i(!1,F):r=setTimeout(()=>{i(!1,1e-7)},1e3)}F===1&&!V(f,e.getBoundingClientRect())&&i(),R=!1}try{n=new IntersectionObserver(L,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(L,x)}n.observe(e)}return i(!0),c}function J(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=C(e),v=o||c?[...f?T(f):[],...T(t)]:[];v.forEach(l=>{o&&l.addEventListener("scroll",n,{passive:!0}),c&&l.addEventListener("resize",n)});const p=f&&s?k(f,n):null;let w=-1,h=null;i&&(h=new ResizeObserver(l=>{let[m]=l;m&&m.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),f&&!u&&h.observe(f),h.observe(t));let g,a=u?I(e):null;u&&d();function d(){const l=I(e);a&&!V(a,l)&&n(),a=l,g=requestAnimationFrame(d)}return n(),()=>{var l;v.forEach(m=>{o&&m.removeEventListener("scroll",n),c&&m.removeEventListener("resize",n)}),p?.(),(l=h)==null||l.disconnect(),h=null,u&&cancelAnimationFrame(g)}}export{J as a};
