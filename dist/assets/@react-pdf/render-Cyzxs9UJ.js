import{P as yt,T as z,S as J,L as Tt,C as vt,d as Ct,e as kt,f as Mt,g as Rt,F as U,I as K,N as Bt,h as Q,i as x,E as tt,j as ot,G as Ot,k as et,R as st,l as rt,a as wt,b as St,m as Pt,n as Wt}from"./primitives-Cl8EByqz.js";import{i as P,m as S}from"./fns-DvmUkUUA.js";import{a as Lt}from"../abs-svg-path-C4ZzWwgR.js";import{p as Ft}from"../parse-svg-path-ClMpa306.js";import{n as zt}from"../normalize-svg-path-ZUMom3hX.js";import{c as I}from"../color-string-R8AcnC2W.js";const At=(t,o)=>{o.props?.d&&t.path(o.props.d)},j=4*((Math.sqrt(2)-1)/3),$t=(t,o)=>{const e=o.props?.x||0,i=o.props?.y||0,n=o.props?.rx||0,s=o.props?.ry||0,r=o.props?.width||0,a=o.props?.height||0;if(!(!r||!a)){if(n&&s){const l=n*j,p=s*j;t.moveTo(e+n,i),t.lineTo(e-n+r,i),t.bezierCurveTo(e-n+r+l,i,e+r,i+s-p,e+r,i+s),t.lineTo(e+r,i+a-s),t.bezierCurveTo(e+r,i+a-s+p,e-n+r+l,i+a,e-n+r,i+a),t.lineTo(e+n,i+a),t.bezierCurveTo(e+n-l,i+a,e,i+a-s+p,e,i+a-s),t.lineTo(e,i+s),t.bezierCurveTo(e,i+s-p,e+n-l,i,e+n,i)}else t.moveTo(e,i),t.lineTo(e+r,i),t.lineTo(e+r,i+a),t.lineTo(e,i+a);t.closePath()}},Yt=(t,o)=>{const{x1:e,x2:i,y1:n,y2:s}=o.props||{};t.moveTo(e,n),t.lineTo(i,s)},Et=()=>{},N=4*((Math.sqrt(2)-1)/3),it=(t,o,e,i=0,n=0)=>{const s=i-o,r=n-e,a=o*N,l=e*N,p=s+o*2,c=r+e*2,f=s+o,h=r+e;t.moveTo(s,h),t.bezierCurveTo(s,h-l,f-a,r,f,r),t.bezierCurveTo(f+a,r,p,h-l,p,h),t.bezierCurveTo(p,h+l,f+a,c,f,c),t.bezierCurveTo(f-a,c,s,h+l,s,h),t.closePath()},It=(t,o)=>{const{cx:e,cy:i,rx:n,ry:s}=o.props||{};it(t,n,s,e,i)},jt=(t,o)=>{const e=o.props?.cx,i=o.props?.cy,n=o.props?.r;it(t,n,n,e,i)},w=t=>{if(t>-1e21&&t<1e21)return Math.round(t*1e6)/1e6;throw new Error(`unsupported number: ${t}`)},Nt=(t,o,e,i,n)=>{const s=[],r=t._fontSize/1e3;let a,l=0,p=!1;t.save(),t.transform(1,0,0,-1,0,t.page.height),n=t.page.height-n,t.page.fonts[t._font.id]==null&&(t.page.fonts[t._font.id]=t._font.ref()),t.addContent("BT"),t.addContent(`1 0 0 1 ${w(i)} ${w(n)} Tm`),t.addContent(`/${t._font.id} ${w(t._fontSize)} Tf`);const c=h=>{if(l<h){const d=o.slice(l,h).join(""),u=e[h-1].xAdvance-e[h-1].advanceWidth;s.push(`<${d}> ${w(-u)}`)}return l=h},f=h=>{if(c(h),s.length>0)return t.addContent(`[${s.join(" ")}] TJ`),s.length=0};for(a=0;a<e.length;a+=1){const h=e[a];h.xOffset||h.yOffset?(f(a),t.addContent(`1 0 0 1 ${w(i+h.xOffset*r)} ${w(n+h.yOffset*r)} Tm`),f(a+1),p=!0):(p&&(t.addContent(`1 0 0 1 ${w(i)} ${w(n)} Tm`),p=!1),h.xAdvance-h.advanceWidth!==0&&c(a+1)),i+=h.xAdvance*r}return f(a),t.addContent("ET"),t.restore()},nt=(t,o,e,i,n)=>{const s=1e3/t._fontSize,a=1e3/(t._font.font.unitsPerEm||1e3),l=t._font.encodeGlyphs(o),p=e.map((c,f)=>({xAdvance:c.xAdvance*s,yAdvance:c.yAdvance*s,xOffset:c.xOffset,yOffset:c.yOffset,advanceWidth:o[f].advanceWidth*a}));return Nt(t,l,p,i,n)},Dt=(t,o)=>{if(!o.glyphs||!o.positions)return;const e=o.xAdvance,i=o.attributes.font?.[0],{fontSize:n,color:s,opacity:r}=o.attributes;s&&t.fillColor(s),t.fillOpacity(r),i&&t.font(i.type==="STANDARD"?i.fullName:i,n);try{nt(t,o.glyphs,o.positions,0,0)}catch(a){console.log(a)}t.translate(e,0)},_t=(t,o,e,i)=>{t.save();const n=o.box?.x||0,s=o.box?.y||0,r=o.runs[0]?.attributes.font?.[0],a=o.runs[0]?.attributes?.scale||1,l=o.xAdvance;if(!r)return;const p=r.ascent*a,c=r.xHeight*a,f=r.descent*a,h=r.capHeight*a;let d=n,u=s;switch(e){case"middle":d=n-l/2;break;case"end":d=n-l;break;default:d=n;break}switch(i){case"middle":case"central":u=s+h/2;break;case"hanging":u=s+h;break;case"mathematical":u=s+c;break;case"text-after-edge":u=s+f;break;case"text-before-edge":u=s+p;break;default:u=s;break}t.translate(d,u),o.runs.forEach(g=>Dt(t,g)),t.restore()},Xt=(t,o)=>{o.children.forEach(i=>_t(t,i.lines[0],i.props.textAnchor,i.props.dominantBaseline))},Gt=t=>{const o=[];for(let e=0;e<t.length;e+=2)o.push([t[e],t[e+1]]);return o},A=t=>{let o=(t||"").trim().replace(/,/g," ").replace(/(\d)-(\d)/g,"$1 -$2").split(/\s+/);o.length%2!==0&&(o=o.slice(0,-1));const e=o.map(parseFloat);return Gt(e)},at=(t,o)=>{o.length>0&&(t.moveTo(o[0][0],o[0][1]),o.slice(1).forEach(e=>t.lineTo(e[0],e[1])))},qt=(t,o)=>{const e=A(o.props.points||"");at(t,e)},Ht=(t,o)=>{const e=A(o.props.points||"");at(t,e),t.closePath()},Vt=(t,o)=>{if(!o.box||!o.image?.data)return;const{x:e=0,y:i=0}=o.props,{width:n,height:s,opacity:r}=o.style,a=o.box.paddingLeft||0,l=o.box.paddingLeft||0;if(n===0||s===0){console.warn(`Image with src '${o.props.href}' skipped due to invalid dimensions`);return}if(typeof n=="string"||typeof s=="string"){console.warn(`Image with src '${o.props.href}' skipped due to percentage width or height`);return}t.save(),t.fillOpacity(r||1).image(o.image.data,e+l,i+a,{width:n,height:s}),t.restore()},L=4*((Math.sqrt(2)-1)/3),F=(t,o)=>{if(!o.box||!o.style)return;const{top:e,left:i,width:n,height:s}=o.box,{borderTopLeftRadius:r=0,borderTopRightRadius:a=0,borderBottomRightRadius:l=0,borderBottomLeftRadius:p=0}=o.style,c=Math.min(a,.5*n,.5*s),f=c*(1-L);t.moveTo(i+c,e),t.lineTo(i+n-c,e),t.bezierCurveTo(i+n-f,e,i+n,e+f,i+n,e+c);const h=Math.min(l,.5*n,.5*s),d=h*(1-L);t.lineTo(i+n,e+s-h),t.bezierCurveTo(i+n,e+s-d,i+n-d,e+s,i+n-h,e+s);const u=Math.min(p,.5*n,.5*s),g=u*(1-L);t.lineTo(i+u,e+s),t.bezierCurveTo(i+g,e+s,i,e+s-g,i,e+s-u);const b=Math.min(r,.5*n,.5*s),y=b*(1-L);t.lineTo(i,e+b),t.bezierCurveTo(i,e+y,i+y,e,i+b,e),t.closePath(),t.clip()},Zt=(t,o,e)=>{const{operation:i,value:n}=o;switch(i){case"scale":{const[s,r]=n;t.scale(s,r,{origin:e});break}case"rotate":{const[s]=n;t.rotate(s,{origin:e});break}case"translate":{const[s,r=0]=n;t.translate(s,r,{origin:e});break}case"skew":{const[s=0,r=0]=n,a=s*Math.PI/180,l=r*Math.PI/180,p=Math.tan(a),c=Math.tan(l);let f=0,h=0;if(e!=null){[f,h]=Array.from(e);const d=f+p*h,u=h+c*f;f-=d,h-=u}t.transform(1,c,p,1,f,h);break}case"matrix":{t.transform(...n);break}default:console.error(`Transform operation: '${i}' doesn't supported`)}},lt=(t,o)=>{if(!o.origin)return;const{props:e,style:i}=o,n=[o.origin.left,o.origin.top],s="transform"in e?e.transform:void 0;(i?.transform||s||[]).forEach(a=>{Zt(t,a,n)})},Jt=t=>{const o=zt(Lt(Ft(t.props?.d||"")));if(!o.length)return[0,0,0,0];const e=[1/0,1/0,-1/0,-1/0];for(let i=0,n=o.length;i<n;i+=1){const s=o[i].slice(1);for(let r=0;r<s.length;r+=2)s[r+0]<e[0]&&(e[0]=s[r+0]),s[r+1]<e[1]&&(e[1]=s[r+1]),s[r+0]>e[2]&&(e[2]=s[r+0]),s[r+1]>e[3]&&(e[3]=s[r+1])}return e},Ut=t=>{const o=t.props?.r||0,e=t.props?.cx||0,i=t.props?.cy||0;return[e-o,i-o,e+o,i+o]},Kt=t=>{const o=t.props?.cx||0,e=t.props?.cy||0,i=t.props?.rx||0,n=t.props?.ry||0;return[o-i,e-n,o+i,e+n]},Qt=t=>{const o=t.props?.x1||0,e=t.props?.y1||0,i=t.props?.x2||0,n=t.props?.y2||0;return[Math.min(o,i),Math.min(e,n),Math.max(o,i),Math.max(e,n)]},xt=t=>{const o=t.props?.x||0,e=t.props?.y||0,i=t.props?.width||0,n=t.props?.height||0;return[o,e,o+i,e+n]},D=t=>Math.max(-1/0,...t),_=t=>Math.min(1/0,...t),X=t=>{const o=A(t.props?.points),e=o.map(n=>n[0]),i=o.map(n=>n[1]);return[_(e),_(i),D(e),D(i)]},to={[st]:xt,[et]:Qt,[rt]:Jt,[ot]:Ut,[tt]:Kt,[x]:X,[Q]:X},pt=t=>{const o=to[t.type];return o?o(t):[0,0,0,0]},oo=(t,o)=>{if(!o.props||!("strokeWidth"in o.props))return;const e=o.props.strokeWidth;e&&t.lineWidth(e)},eo=(t,o)=>{if(!o.props||!("stroke"in o.props))return;const e=o.props.stroke;e&&t.strokeColor(e)},so=(t,o)=>{if(!o.props||!("opacity"in o.props))return;const e=o.props.opacity;P(e)||t.opacity(e)},ro=(t,o)=>{if(!o.props||!("fillOpacity"in o.props))return;const e=o.props.fillOpacity||null;P(e)||t.fillOpacity(e)},io=(t,o)=>{if(!o.props||!("strokeOpacity"in o.props))return;const e=o.props?.strokeOpacity;P(e)||t.strokeOpacity(e)},no=(t,o)=>{if(!o.props||!("strokeLinejoin"in o.props))return;const e=o.props.strokeLinejoin;e&&t.lineJoin(e)},ao=(t,o)=>{if(!o.props||!("strokeLinecap"in o.props))return;const e=o.props?.strokeLinecap;e&&t.lineCap(e)},lo=(t,o)=>{if(!o.props||!("strokeDasharray"in o.props))return;const e=o.props?.strokeDasharray||null;e&&t.dash(e.split(/[\s,]+/).map(Number))},po=t=>!t.props||!("fill"in t.props)||typeof t.props.fill=="string"?!1:t.props.fill?.type===Pt,co=t=>!t.props||!("fill"in t.props)||typeof t.props.fill=="string"?!1:t.props.fill?.type===Wt;function fo(t,o){const e=t[0]*o[0]+t[2]*o[1],i=t[1]*o[0]+t[3]*o[1],n=t[0]*o[2]+t[2]*o[3],s=t[1]*o[2]+t[3]*o[3],r=t[0]*o[4]+t[2]*o[5]+t[4],a=t[1]*o[4]+t[3]*o[5]+t[5];return[e,i,n,s,r,a]}const ct=(t,o,e,i)=>{const s=o.map(r=>{switch(r.operation){case"scale":{const a=r.value;return[a[0],0,0,a[1],0,0]}case"translate":{const a=r.value;let l=a[0]||0,p=a[1]||0;return i==="objectBoundingBox"&&(l=(e[2]-e[0])*l,p=(e[3]-e[1])*p),[1,0,0,1,l,p]}case"rotate":{const a=r.value,l=Math.cos(a[0]),p=Math.sin(a[0]);return[l,p,-p,l,0,0]}case"skew":{const a=r.value;return[1,Math.tan(a[0]),Math.tan(a[1]),1,0,0]}case"matrix":{const a=r.value;let l=a[4]||0,p=a[5]||0;return i==="objectBoundingBox"&&(l=(e[2]-e[0])*l,p=(e[3]-e[1])*p),[a[0],a[1],a[2],a[3],l,p]}default:return[1,0,0,1,0,0]}}).reduce(fo,[1,0,0,1,0,0]);t.setTransform(...s)},ho=(t,o)=>{if(!o.props||!("fill"in o.props))return;const e=pt(o),i=o.props?.fill;if(!i)return;const n=i.props.gradientUnits||"objectBoundingBox",s=i.props.gradientTransform||[];let r=i.props.x1||0,a=i.props.y1||0,l=i.props.x2||1,p=i.props.y2||0;if(n==="objectBoundingBox"){const f=e[2]-e[0],h=e[3]-e[1],d=e[0],u=e[1];r=f*r+d,a=h*a+u,l=f*l+d,p=h*p+u}const c=t.linearGradient(r,a,l,p);ct(c,s,e,n),i.children?.forEach(f=>{c.stop(f.props.offset,f.props.stopColor,f.props.stopOpacity)}),t.fill(c)},uo=(t,o)=>{if(!o.props||!("fill"in o.props))return;const e=pt(o),i=o.props?.fill;if(!i)return;const n=i.props.gradientUnits||"objectBoundingBox",s=i.props.gradientTransform||[];let r=i.props.r||.5,a=i.props.cx||.5,l=i.props.cy||.5,p=i.props.fx||a,c=i.props.fy||l;if(n==="objectBoundingBox"){const h=e[2]-e[0],d=e[3]-e[1],u=e[0],g=e[1];r=r*h,a=h*a+u,l=d*l+g,p=h*p+u,c=d*c+g}const f=t.radialGradient(a,l,0,p,c,r);ct(f,s,e,n),i.children?.forEach(h=>{f.stop(h.props.offset,h.props.stopColor,h.props.stopOpacity)}),t.fill(f)},go=(t,o)=>{if(!o.props||!("fill"in o.props))return;const e=o.props?.fill;e&&t.fillColor(e)},mo=(t,o)=>po(o)?ho(t,o):co(o)?uo(t,o):go(t,o),bo=(t,o)=>{const e=o.props||{};"fill"in e&&"stroke"in e&&e.fill&&e.stroke?t.fillAndStroke(e.fillRule):"fill"in e&&e.fill?t.fill(e.fillRule):"stroke"in e&&e.stroke?t.stroke():(t.save(),t.opacity(0),t.fill(null),t.restore())},G=()=>{},yo={[St]:G,[wt]:G,[rt]:At,[st]:$t,[et]:Yt,[Ot]:Et,[z]:Xt,[ot]:jt,[K]:Vt,[tt]:It,[x]:Ht,[Q]:qt},ft=(t,o)=>{const e=yo[o.type];e?e(t,o):console.warn(`SVG node of type ${o.type} is not currently supported`)},To=(t,o)=>{ao(t,o),lo(t,o),no(t,o),oo(t,o),eo(t,o),mo(t,o),io(t,o),ro(t,o),so(t,o),lt(t,o),ft(t,o),bo(t,o)},vo=(t,o)=>{if(!o.props||!("clipPath"in o.props))return;const e=o.props.clipPath;e&&((e.children||[]).forEach(n=>ft(t,n)),t.clip())},ht=(t,o)=>{(o.children||[]).forEach(i=>{t.save(),vo(t,i),To(t,i),ht(t,i),t.restore()})},Co=(t,o)=>{if(!o.box)return;const{width:e,height:i}=o.box,{viewBox:n,preserveAspectRatio:s}=o.props,{meetOrSlice:r="meet",align:a="xMidYMid"}=s||{};if(n==null||e==null||i==null)return;const l=n?.minX||0,p=n?.minY||0,c=n?.maxX||e,f=n?.maxY||i,h=c/f,d=e/i,u=e/c,g=i/f;if(a==="none"){t.scale(u,g),t.translate(-l,-p);return}if(h<d&&r==="meet"||h>=d&&r==="slice")switch(t.scale(g,g),a){case"xMinYMin":case"xMinYMid":case"xMinYMax":t.translate(-l,-p);break;case"xMidYMin":case"xMidYMid":case"xMidYMax":t.translate(-l-(c-e*f/i)/2,-p);break;default:t.translate(-l-(c-e*f/i),-p)}else switch(t.scale(u,u),a){case"xMinYMin":case"xMidYMin":case"xMaxYMin":t.translate(-l,-p);break;case"xMinYMid":case"xMidYMid":case"xMaxYMid":t.translate(-l,-p-(f-i*c/e)/2);break;default:t.translate(-l,-p-(f-i*c/e))}},ko=(t,o)=>{if(!o.box)return;const{top:e,left:i}=o.box,n=o.box.paddingLeft||0,s=o.box.paddingTop||0;t.translate(i+n,e+s)},Mo=(t,o)=>{t.save(),F(t,o),ko(t,o),Co(t,o),ht(t,o),t.restore()},q={value:"#000",opacity:1},$=t=>{if(!t)return q;const o=I.get(t);if(!o)return q;const e=I.to.hex(o.value.slice(0,3)),i=o.value[3];return{value:e,opacity:i}},Ro=/^#.+/,Bo=t=>t.match(Ro),Oo=(t,o)=>{const{xOffset:e=0,yOffset:i=0,width:n,height:s,image:r}=o;t.translate(-n+e,-s+i),t.image(r,0,0,{fit:[n,s],align:"center",valign:"bottom"})},wo=(t,o)=>{if(!o.glyphs||!o.positions)return;const e=o.attributes.font?.[0];if(!e)return;t.save();const i=e.glyphForCodePoint(32),n=e.glyphForCodePoint(65532);let s=0;for(let r=0;r<o.glyphs.length;r+=1){const a=o.positions[r],l=o.glyphs[r];s+=a.xAdvance||0,l.id===n.id&&o.attributes.attachment&&(t.translate(s,a.yOffset||0),Oo(t,o.attributes.attachment),o.glyphs[r]=i,s=0)}t.restore()},So=(t,o)=>{if(!o.glyphs||!o.positions)return;const e=o.attributes.font?.[0];if(!e)return;const{fontSize:i,link:n}=o.attributes,s=$(o.attributes.color),r=P(o.attributes.opacity)?s.opacity:o.attributes.opacity,{height:a=0,descent:l=0,xAdvance:p=0}=o;t.fillColor(s.value),t.fillOpacity(r),n&&(Bo(n)?t.goTo(0,-a-l,p,a,n.slice(1)):t.link(0,-a-l,p,a,n)),wo(t,o),t.font(e.type==="STANDARD"?e.fullName:e,i);try{nt(t,o.glyphs,o.positions,0,0)}catch(c){console.log(c)}t.translate(p,0)},Po=(t,o,e)=>{const i=$(e);t.save(),t.fillOpacity(i.opacity),t.rect(o.x,o.y,o.width,o.height),t.fill(i.value),t.restore()},Wo=(t,o)=>{if(t.save(),t.lineWidth(o.rect.height),t.strokeOpacity(o.opacity),/dashed/.test(o.style)?t.dash(3*o.rect.height,{}):/dotted/.test(o.style)&&t.dash(o.rect.height,{}),/wavy/.test(o.style)){const e=Math.max(2,o.rect.height);let i=1.1*e;const n=Math.floor(o.rect.width/(2*i)),r=(o.rect.width-n*2*i)/n/2;i+=r;const a=o.rect.y+e,l=o.rect.y-e;let{x:p}=o.rect;t.moveTo(o.rect.x,o.rect.y);for(let c=0;c<n;c+=1)t.bezierCurveTo(p+i,a,p+i,l,p+2*i,o.rect.y),p+=2*i}else t.moveTo(o.rect.x,o.rect.y),t.lineTo(o.rect.x+o.rect.width,o.rect.y),/double/.test(o.style)&&(t.moveTo(o.rect.x,o.rect.y+o.rect.height*2),t.lineTo(o.rect.x+o.rect.width,o.rect.y+o.rect.height*2));t.stroke(o.color),t.restore()},Lo=(t,o)=>{if(!o.box)return;const e=o.ascent||0;t.save(),t.translate(o.box.x,o.box.y+e);for(let i=0;i<o.runs.length;i+=1){const n=o.runs[i],s=i===o.runs.length-1;if(n.attributes.backgroundColor){const r=n.xAdvance??0,a=s?o.overflowRight??0:0,l={x:0,y:-e,height:o.box.height,width:r-a};Po(t,l,n.attributes.backgroundColor)}So(t,n)}if(t.restore(),t.save(),t.translate(o.box.x,o.box.y),o.decorationLines)for(let i=0;i<o.decorationLines.length;i+=1){const n=o.decorationLines[i];Wo(t,n)}t.restore()},Fo=(t,o)=>{o.forEach(e=>{Lo(t,e)})},zo=(t,o)=>{if(!o.box||!o.lines)return;const{top:e,left:i}=o.box,n=[o.lines],s=o.box?.paddingTop||0,r=o.box?.paddingLeft||0,a=o.lines[0]?o.lines[0].box.y:0,l=o.alignOffset||0;t.save(),t.translate(i+r-l,e+s-a),n.forEach(p=>{Fo(t,p)}),t.restore()},Ao=(t,o)=>{if(!o.box)return;const{width:e,height:i}=o.box,s=(o.props?.dpi||72)/72;t.addPage({size:[e,i],margin:0,userUnit:s})},$o=(t,o)=>{if(!o.box)return;const{top:e,left:i}=o.box,n=o?.children?.[0].value||"",s=o.style?.backgroundColor;t.note(i,e,0,0,n,{color:s})},Yo=(t,o)=>{const e=o.image.data;let i;return typeof e=="string"&&(i=t._imageRegistry[e]),i||(i=t.openImage(e)),i.obj||i.embed(t),i},O=t=>!Number.isNaN(parseFloat(t))&&Number.isFinite(t),dt=(t,o,e,i,n,s)=>{const r=t/o,a=e/i,l=S(n??null),p=S(s??null),c=l?l.percent:.5,f=p?p.percent:.5;if(r>a){const b=o,y=b*a,v=O(s)?s:0,C=O(n)?n:(t-y)*c;return{width:y,height:b,xOffset:C,yOffset:v}}const h=t,d=h/a,u=O(n)?n:0,g=O(s)?s:(o-d)*f;return{width:h,height:d,yOffset:g,xOffset:u}},ut=(t,o,e,i,n,s)=>{const r=e,a=i,l=S(n??null),p=S(s??null),c=l?l.percent:.5,f=p?p.percent:.5,h=O(n)?n:(t-r)*c,d=O(s)?s:(o-a)*f;return{width:r,height:a,xOffset:h,yOffset:d}},Eo=(t,o,e,i,n,s)=>{const r=e/i,a=t/o,l=S(n??null),p=S(s??null),c=l?l.percent:.5,f=p?p.percent:.5;if(a>r){const b=t,y=b/r,v=O(n)?n:0,C=O(s)?s:(o-y)*f;return{width:b,height:y,yOffset:C,xOffset:v}}const h=o,d=h*r,u=O(n)?n:(t-d)*c,g=O(s)?s:0;return{width:d,height:h,xOffset:u,yOffset:g}},Io=(t,o,e,i,n,s)=>{const r=dt(t,o,e,i,n,s),a=ut(t,o,e,i,n,s);return r.width<a.width?r:a},jo=(t,o,e,i)=>({width:t,height:o,xOffset:S(e??null)?0:e||0,yOffset:S(i??null)?0:i||0}),No=(t="fill",o,e,i,n,s,r)=>{switch(t){case"contain":return dt(o,e,i,n,s,r);case"cover":return Eo(o,e,i,n,s,r);case"none":return ut(o,e,i,n,s,r);case"scale-down":return Io(o,e,i,n,s,r);default:return jo(o,e,s,r)}},Do=(t,o,e)=>{if(!o.box||!o.image)return;const{left:i,top:n}=o.box,s=o.style?.opacity,r=o.style?.objectFit,a=o.style?.objectPositionX,l=o.style?.objectPositionY,p=o.box.paddingTop||0,c=o.box.paddingRight||0,f=o.box.paddingBottom||0,h=o.box.paddingLeft||0,d=e.imageCache||new Map,{width:u,height:g,xOffset:b,yOffset:y}=No(r,o.box.width-h-c,o.box.height-p-f,o.image.width,o.image.height,a,l);if(o.image.data)if(u!==0&&g!==0){const v=o.image.key,C=d.get(v)||Yo(t,o);v&&d.set(v,C);const B=P(s)?1:s;t.fillOpacity(B).image(C,i+h+b,n+p+y,{width:u,height:g})}else console.warn(`Image with src '${JSON.stringify(o.props.src||o.props.source)}' skipped due to invalid dimensions`)},_o=(t,o,e)=>{t.save(),F(t,o),Do(t,o,e),t.restore()},Xo="#a1c6e7",Go="#c4deb9",qo="#f8cca1",Ho=(t,o)=>{if(!o.box)return;const{left:e,top:i,width:n,height:s,paddingLeft:r=0,paddingTop:a=0,paddingRight:l=0,paddingBottom:p=0,borderLeftWidth:c=0,borderTopWidth:f=0,borderRightWidth:h=0,borderBottomWidth:d=0}=o.box;t.fillColor(Xo).opacity(.5).rect(e+r+c,i+a+f,n-r-l-h-c,s-a-p-f-d).fill()},Vo=(t,o)=>{if(!o.box)return;const{left:e,top:i,width:n,height:s,paddingLeft:r=0,paddingTop:a=0,paddingRight:l=0,paddingBottom:p=0,borderLeftWidth:c=0,borderTopWidth:f=0,borderRightWidth:h=0,borderBottomWidth:d=0}=o.box;t.fillColor(Go).opacity(.5),t.rect(e+r+c,i+f,n-l-r-c-h,a).fill(),t.rect(e+c,i+f,r,s-f-d).fill(),t.rect(e+n-l-h,i+f,l,s-f-d).fill(),t.rect(e+r+c,i+s-p-d,n-l-r-c-h,p).fill()},Zo=(t,o)=>{if(!o.box)return;const{left:e,top:i,width:n,height:s}=o.box,{marginLeft:r=0,marginTop:a=0,marginRight:l=0,marginBottom:p=0}=o.box;t.fillColor(qo).opacity(.5),t.rect(e,i-a,n,a).fill(),t.rect(e-r,i-a,r,s+a+p).fill(),t.rect(e+n,i-a,l,s+a+p).fill(),t.rect(e,i+s,n,p).fill()},Jo=(t,o)=>{if(!o.box)return;const{left:e,top:i,width:n,height:s}=o.box,{marginLeft:r=0,marginTop:a=0,marginRight:l=0,marginBottom:p=0}=o.box,c=Math.round(n+r+l),f=Math.round(s+a+p);t.fontSize(6).opacity(1).fillColor("black").text(`${c} x ${f}`,e-r,Math.max(i-a-4,1),{width:1/0})},Uo=(t,o)=>{o.origin&&t.circle(o.origin.left,o.origin.top,3).fill("red").circle(o.origin.left,o.origin.top,5).stroke("red")},Ko=(t,o)=>{o.props&&(!("debug"in o.props)||!o.props.debug||(t.save(),Ho(t,o),Vo(t,o),Zo(t,o),Jo(t,o),Uo(t,o),t.restore()))},Qo=["dash","clip","save","path","fill","font","text","rect","scale","moveTo","lineTo","stroke","rotate","circle","lineCap","opacity","ellipse","polygon","restore","lineJoin","fontSize","fillColor","lineWidth","translate","miterLimit","strokeColor","fillOpacity","roundedRect","fillAndStroke","strokeOpacity","bezierCurveTo","quadraticCurveTo","linearGradient","radialGradient"],xo=t=>{const o=Qo.reduce((e,i)=>({...e,[i]:(...n)=>(t[i](...n),o)}),{});return o},te=(t,o)=>{if(!o.box)return;const{top:e,left:i,width:n,height:s}=o.box,r=o.box.paddingTop||0,a=o.box.paddingLeft||0,l=o.box.paddingRight||0,p=o.box.paddingBottom||0,c=n-a-l,f=s-r-p;(!c||!f)&&console.warn("Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it."),t.save().translate(i+a,e+r),o.props.paint&&o.props.paint(xo(t),c,f),t.restore()},m=4*((Math.sqrt(2)-1)/3),oe=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderTopWidth:p,borderRightWidth:c,borderLeftWidth:f}=e;t.moveTo(r+n,s),t.lineTo(r+a-i,s);const h=i*(1-m);t.bezierCurveTo(r+a-h,s,r+a,s+h,r+a,s+i);const d=s+Math.max(p,i);t.lineTo(r+a,d),t.lineTo(r+a-c,d);const u=Math.max(i-c,0),g=Math.max(i-p,0),b=u*(1-m),y=g*(1-m);t.bezierCurveTo(r+a-c,s+p+y,r+a-c-b,s+p,r+a-c-u,s+p),t.lineTo(r+Math.max(n,f),s+p);const v=Math.max(n-f,0),C=Math.max(n-p,0),B=v*(1-m),k=C*(1-m),M=s+Math.max(p,n);t.bezierCurveTo(r+f+B,s+p,r+f,s+p+k,r+f,M),t.lineTo(r,M),t.lineTo(r,s+n);const R=n*(1-m);if(t.bezierCurveTo(r,s+R,r+R,s,r+n,s),t.closePath(),t.clip(),c){const T=-p/c;t.moveTo(r+a/2,T*(-a/2)+s),t.lineTo(r+a,s),t.lineTo(r,s),t.lineTo(r,s+l),t.closePath(),t.clip()}if(f){const T=-p/f;t.moveTo(r+a/2,T*(-a/2)+s),t.lineTo(r,s),t.lineTo(r+a,s),t.lineTo(r+a,s+l),t.closePath(),t.clip()}},ee=(t,o,e,i,n)=>{const{top:s,left:r,width:a}=o,{borderTopColor:l,borderTopWidth:p,borderTopStyle:c,borderRightWidth:f,borderLeftWidth:h}=e,d=n*(1-m),u=i*(1-m);t.moveTo(r,s+Math.max(n,p)),t.bezierCurveTo(r,s+d,r+d,s,r+n,s),t.lineTo(r+a-i,s),t.bezierCurveTo(r+a-u,s,r+a,s+u,r+a,s+i),t.strokeColor(l),t.lineWidth(Math.max(f,p,h)*2),c==="dashed"?t.dash(p*2,{space:p*1.2}):c==="dotted"&&t.dash(p,{space:p*1.2}),t.stroke(),t.undash()},se=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderTopWidth:p,borderRightWidth:c,borderBottomWidth:f}=e;t.moveTo(r+a,s+i),t.lineTo(r+a,s+l-n);const h=n*(1-m);t.bezierCurveTo(r+a,s+l-h,r+a-h,s+l,r+a-n,s+l);const d=r+a-Math.max(c,n);t.lineTo(d,s+l),t.lineTo(d,s+l-f);const u=Math.max(n-c,0),g=Math.max(n-f,0),b=u*(1-m),y=g*(1-m);t.bezierCurveTo(r+a-c-b,s+l-f,r+a-c,s+l-f-y,r+a-c,s+l-Math.max(n,f)),t.lineTo(r+a-c,s+Math.max(i,p));const v=Math.max(i-c,0),C=Math.max(i-p,0),B=v*(1-m),k=C*(1-m),M=r+a-Math.max(i,c);t.bezierCurveTo(r+a-c,s+p+k,r+a-c-B,s+p,M,s+p),t.lineTo(M,s),t.lineTo(r+a-i,s);const R=i*(1-m);if(t.bezierCurveTo(r+a-R,s,r+a,s+R,r+a,s+i),t.closePath(),t.clip(),p){const T=-p/c;t.moveTo(r+a/2,T*(-a/2)+s),t.lineTo(r+a,s),t.lineTo(r+a,s+l),t.lineTo(r,s+l),t.closePath(),t.clip()}if(f){const T=f/c;t.moveTo(r+a/2,T*(-a/2)+s+l),t.lineTo(r+a,s+l),t.lineTo(r+a,s),t.lineTo(r,s),t.closePath(),t.clip()}},re=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderRightColor:p,borderRightStyle:c,borderRightWidth:f,borderTopWidth:h,borderBottomWidth:d}=e,u=n*(1-m),g=i*(1-m);t.moveTo(r+a-i,s),t.bezierCurveTo(r+a-g,s,r+a,s+g,r+a,s+i),t.lineTo(r+a,s+l-n),t.bezierCurveTo(r+a,s+l-u,r+a-u,s+l,r+a-n,s+l),t.strokeColor(p),t.lineWidth(Math.max(f,h,d)*2),c==="dashed"?t.dash(f*2,{space:f*1.2}):c==="dotted"&&t.dash(f,{space:f*1.2}),t.stroke(),t.undash()},ie=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderBottomWidth:p,borderRightWidth:c,borderLeftWidth:f}=e;t.moveTo(r+a-n,s+l),t.lineTo(r+i,s+l);const h=i*(1-m);t.bezierCurveTo(r+h,s+l,r,s+l-h,r,s+l-i);const d=s+l-Math.max(p,i);t.lineTo(r,d),t.lineTo(r+f,d);const u=Math.max(i-f,0),g=Math.max(i-p,0),b=u*(1-m),y=g*(1-m);t.bezierCurveTo(r+f,s+l-p-y,r+f+b,s+l-p,r+f+u,s+l-p),t.lineTo(r+a-Math.max(n,c),s+l-p);const v=Math.max(n-c,0),C=Math.max(n-p,0),B=v*(1-m),k=C*(1-m),M=s+l-Math.max(p,n);t.bezierCurveTo(r+a-c-B,s+l-p,r+a-c,s+l-p-k,r+a-c,M),t.lineTo(r+a,M),t.lineTo(r+a,s+l-n);const R=n*(1-m);if(t.bezierCurveTo(r+a,s+l-R,r+a-R,s+l,r+a-n,s+l),t.closePath(),t.clip(),c){const T=p/c;t.moveTo(r+a/2,T*(-a/2)+s+l),t.lineTo(r+a,s+l),t.lineTo(r,s+l),t.lineTo(r,s),t.closePath(),t.clip()}if(f){const T=-p/f;t.moveTo(r+a/2,T*(a/2)+s+l),t.lineTo(r,s+l),t.lineTo(r+a,s+l),t.lineTo(r+a,s),t.closePath(),t.clip()}},ne=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderBottomColor:p,borderBottomStyle:c,borderBottomWidth:f,borderRightWidth:h,borderLeftWidth:d}=e,u=i*(1-m),g=n*(1-m);t.moveTo(r+a,s+l-n),t.bezierCurveTo(r+a,s+l-g,r+a-g,s+l,r+a-n,s+l),t.lineTo(r+i,s+l),t.bezierCurveTo(r+u,s+l,r,s+l-u,r,s+l-i),t.strokeColor(p),t.lineWidth(Math.max(f,h,d)*2),c==="dashed"?t.dash(f*2,{space:f*1.2}):c==="dotted"&&t.dash(f,{space:f*1.2}),t.stroke(),t.undash()},ae=(t,o,e,i,n)=>{const{top:s,left:r,width:a,height:l}=o,{borderTopWidth:p,borderLeftWidth:c,borderBottomWidth:f}=e;t.moveTo(r,s+l-i),t.lineTo(r,s+n);const h=n*(1-m);t.bezierCurveTo(r,s+h,r+h,s,r+n,s);const d=r+Math.max(c,n);t.lineTo(d,s),t.lineTo(d,s+p);const u=Math.max(n-c,0),g=Math.max(n-p,0),b=u*(1-m),y=g*(1-m);t.bezierCurveTo(r+c+b,s+p,r+c,s+p+y,r+c,s+Math.max(n,p)),t.lineTo(r+c,s+l-Math.max(i,f));const v=Math.max(i-c,0),C=Math.max(i-f,0),B=v*(1-m),k=C*(1-m),M=r+Math.max(i,c);t.bezierCurveTo(r+c,s+l-f-k,r+c+B,s+l-f,M,s+l-f),t.lineTo(M,s+l),t.lineTo(r+i,s+l);const R=i*(1-m);if(t.bezierCurveTo(r+R,s+l,r,s+l-R,r,s+l-i),t.closePath(),t.clip(),f){const T=-f/c;t.moveTo(r+a/2,T*(a/2)+s+l),t.lineTo(r,s+l),t.lineTo(r,s),t.lineTo(r+a,s),t.closePath(),t.clip()}if(f){const T=-p/c;t.moveTo(r+a/2,T*(-a/2)+s),t.lineTo(r,s),t.lineTo(r,s+l),t.lineTo(r+a,s+l),t.closePath(),t.clip()}},le=(t,o,e,i,n)=>{const{top:s,left:r,height:a}=o,{borderLeftColor:l,borderLeftStyle:p,borderLeftWidth:c,borderTopWidth:f,borderBottomWidth:h}=e,d=i*(1-m),u=n*(1-m);t.moveTo(r+i,s+a),t.bezierCurveTo(r+d,s+a,r,s+a-d,r,s+a-i),t.lineTo(r,s+n),t.bezierCurveTo(r,s+u,r+u,s,r+n,s),t.strokeColor(l),t.lineWidth(Math.max(c,f,h)*2),p==="dashed"?t.dash(c*2,{space:c*1.2}):p==="dotted"&&t.dash(c,{space:c*1.2}),t.stroke(),t.undash()},pe=t=>t.box&&(t.box.borderTopWidth||t.box.borderRightWidth||t.box.borderBottomWidth||t.box.borderLeftWidth),ce=(t,o)=>{if(!o.box||!pe(o))return;const{width:e,height:i,borderTopWidth:n=0,borderLeftWidth:s=0,borderRightWidth:r=0,borderBottomWidth:a=0}=o.box,{opacity:l=1,borderTopColor:p="black",borderTopStyle:c="solid",borderLeftColor:f="black",borderLeftStyle:h="solid",borderRightColor:d="black",borderRightStyle:u="solid",borderBottomColor:g="black",borderBottomStyle:b="solid"}=o.style,y=o.style.borderTopLeftRadius||0,v=o.style.borderTopRightRadius||0,C=o.style.borderBottomLeftRadius||0,B=o.style.borderBottomRightRadius||0,k={borderTopColor:p,borderTopWidth:n,borderTopStyle:c,borderLeftColor:f,borderLeftWidth:s,borderLeftStyle:h,borderRightColor:d,borderRightWidth:r,borderRightStyle:u,borderBottomColor:g,borderBottomWidth:a,borderBottomStyle:b},M=Math.min(v,.5*e,.5*i),R=Math.min(y,.5*e,.5*i),T=Math.min(B,.5*e,.5*i),W=Math.min(C,.5*e,.5*i);t.save(),t.strokeOpacity(l),n&&(t.save(),oe(t,o.box,k,M,R),ee(t,o.box,k,M,R),t.restore()),r&&(t.save(),se(t,o.box,k,M,T),re(t,o.box,k,M,T),t.restore()),a&&(t.save(),ie(t,o.box,k,W,T),ne(t,o.box,k,W,T),t.restore()),s&&(t.save(),ae(t,o.box,k,W,R),le(t,o.box,k,W,R),t.restore()),t.restore()},fe=(t,o)=>{if(!o.box)return;const{top:e,left:i,width:n,height:s}=o.box,r=$(o.style.backgroundColor),a=P(o.style?.opacity)?1:o.style.opacity,l=Math.min(r.opacity,a);t.fillOpacity(l).fillColor(r.value).rect(i,e,n,s).fill()},he=(t,o)=>{!!o.box&&!!o.style?.backgroundColor&&(t.save(),F(t,o),fe(t,o),t.restore())},H=t=>typeof t=="string",de=t=>/^#.+/.test(t),V=(t,o,e)=>{if(!e||!o.box)return;const i=de(e),n=i?"goTo":"link",s=i?e.slice(1):e,{top:r,left:a,width:l,height:p}=o.box;t[n](a,r,l,p,s)},ue=(t,o)=>{const e=o.props||{};if("src"in e&&H(e.src))return V(t,o,e.src);if("href"in e&&H(e.href))return V(t,o,e.href)},ge=(t,o)=>{o.box&&o.props&&"id"in o.props&&t.addNamedDestination(o.props.id,"XYZ",null,o.box.top,null)},Y=t=>{const o={...t};return Object.entries(o).forEach(e=>{e[1]||delete o[e[0]]}),o},E=t=>({required:t.props?.required||!1,noExport:t.props?.noExport||!1,readOnly:t.props?.readOnly||!1,value:t.props?.value||void 0,defaultValue:t.props?.defaultValue||void 0}),me=(t,o)=>Y({...E(t),parent:o||void 0,align:t.props?.align||"left",multiline:t.props?.multiline||void 0,password:t.props?.password||!1,noSpell:t.props?.noSpell||!1,format:t.props?.format||void 0,fontSize:t.props?.fontSize||void 0,MaxLen:t.props?.maxLength||void 0}),gt=t=>Y({...E(t),sort:t.props?.sort||!1,edit:t.props?.edit||!1,multiSelect:t.props?.multiSelect||!1,noSpell:t.props?.noSpell||!1,select:t.props?.select||[""]}),Z=(t,o,e,i)=>{const n=t.ref({Type:"XObject",Subtype:"Form",BBox:[0,0,e,i],Resources:{ProcSet:["PDF","Text","ImageB","ImageC","ImageI"],Font:{ZaDi:t._acroform.fonts.ZaDi}}});return n.initDeflate(),n.write(`/Tx BMC
q
/ZaDi ${i*.8} Tf
BT
${e*.45} ${i/4} Td (${o}) Tj
ET
Q
EMC`),n.end(null),n},be=(t,o,e)=>{const{width:i,height:n}=o.box||{},s=o.props?.onState||"Yes",r=o.props?.offState||"Off",a=o.props?.xMark||!1;if(!Object.prototype.hasOwnProperty.call(t._acroform.fonts,"ZaDi")){const p=t.ref({Type:"Font",Subtype:"Type1",BaseFont:"ZapfDingbats"});t._acroform.fonts.ZaDi=p,p.end(null)}const l={[s]:Z(t,a?"8":"4",i,n),[r]:Z(t,a?" ":"8",i,n)};return Y({...E(o),backgroundColor:o.props?.backgroundColor||void 0,borderColor:o.props?.borderColor||void 0,parent:e||void 0,value:`/${o.props?.checked===!0?s:r}`,defaultValue:`/${o.props?.checked===!0?s:r}`,AS:o.props?.checked===!0?s:r,AP:{N:l,D:l}})},ye=(t,o,e)=>{if(!o.box)return;const{top:i,left:n,width:s,height:r}=o.box,a=o.props?.name||"",l=e.fieldSets?.at(0);t._root.data.AcroForm||t.initForm(),t.formText(a,n,i,s,r,me(o,l))},Te=(t,o)=>{if(!o.box)return;const{top:e,left:i,width:n,height:s}=o.box,r=o.props?.name||"";t._root.data.AcroForm||t.initForm(),t.formCombo(r,i,e,n,s,gt(o))},ve=(t,o,e)=>{const i=o.props?.name||"";t._root.data.AcroForm||t.initForm();const n=t.formField(i),s=e;s.fieldSets?s.fieldSets.push(n):s.fieldSets=[n]},Ce=(t,o,e)=>{e.fieldSets.pop()},ke=(t,o)=>{if(!o.box)return;const{top:e,left:i,width:n,height:s}=o.box||{},r="name"in o.props&&o.props.name||"";t._root.data.AcroForm||t.initForm(),t.formList(r,i,e,n,s,gt(o))},Me=(t,o,e)=>{if(!o.box)return;const{top:i,left:n,width:s,height:r}=o.box,a=o.props?.name||"",l=e.fieldSets?.at(0);t._root.data.AcroForm||t.initForm(),t.formCheckbox(a,n,i,s,r,be(t,o,l))},Re=t=>t.type!==z&&t.type!==J,Be=(t,o,e)=>{t.save(),o.box&&t.translate(o.box.left,o.box.top);const i=o.children||[],n=s=>mt(t,s,e);i.forEach(n),t.restore()},Oe={[z]:zo,[Bt]:$o,[K]:_o,[U]:ve,[Rt]:ye,[Mt]:Te,[kt]:Me,[Ct]:ke,[vt]:te,[J]:Mo,[Tt]:ue},we={[U]:Ce},mt=(t,o,e)=>{const i=o.style?.overflow==="hidden",n=Re(o);o.type===yt&&Ao(t,o),t.save(),i&&F(t,o),lt(t,o),he(t,o),ce(t,o);const s=Oe[o.type];s&&s(t,o,e),n&&Be(t,o,e);const r=we[o.type];r&&r(t,o,e),ge(t,o),Ko(t,o),t.restore()},bt=(t,o,e,i)=>{if(o.box&&o.props){if("bookmark"in o.props&&o.props.bookmark){const n=o.props.bookmark,{title:s,parent:r,expanded:a,zoom:l,fit:p}=n,c=i[r]||t.outline,f=n.top||o.box.top,h=n.left||o.box.left,d=c.addItem(s,{pageNumber:e,expanded:a,top:f,left:h,zoom:l,fit:p});i[n.ref]=d}o.children&&o.children.forEach(n=>bt(t,n,e,i))}},Se=(t,o)=>{const e={};(o.children||[]).forEach((n,s)=>{bt(t,n,s,e)})},$e=(t,o)=>{const e=o.children||[],i={imageCache:new Map,fieldSets:[]};return e.forEach(n=>mt(t,n,i)),Se(t,o),t.end(),t};export{$e as r};
