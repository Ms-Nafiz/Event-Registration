import{C as te,e as ee,j as oe,c as ne,D as re,E as ie,F as se,G as ae,I as ce,k as le,m as de,L as ue,d as pe,N as me,P as fe,l as he,i as ye,h as ve,n as Te,R as ge,f as xe,S as Ce,T as we,g as Se,a as Le,b as be,V as De}from"./primitives-Cl8EByqz.js";import{q as F}from"../queue-DoAS7tzh.js";import{r as h,j as k}from"../react-CNOZSPzq.js";import{F as j}from"./font-BXXWAYYz.js";import{r as B}from"./render-Cyzxs9UJ.js";import{a as U}from"./pdfkit-7w6jAvzF.js";import{l as $}from"./layout-KvCx2gi5.js";import{u as S}from"./fns-DvmUkUUA.js";import{i as q}from"./reconciler-CEvOrHNi.js";import"../abs-svg-path-C4ZzWwgR.js";import"../inherits-BICa84dG.js";import"../events-DQ172AOg.js";import"../fontkit-CVzJVDLb.js";import"../restructure-DwIbRzqP.js";import"../@swc/helpers-DIxjOVuh.js";import"../fast-deep-equal-BBHyQ0Kz.js";import"../unicode-properties-CQ3Ws5kP.js";import"../base64-js-BWhG0cXf.js";import"../unicode-trie-CHCc-EBe.js";import"../tiny-inflate-DtqwGtSp.js";import"../dfa-bo7c_j7N.js";import"../clone-CJq_oHA9.js";import"../brotli-B9EKUE_s.js";import"../tslib-kHcLnhpD.js";import"../parse-svg-path-ClMpa306.js";import"../normalize-svg-path-ZUMom3hX.js";import"../svg-arc-to-cubic-bezier-DEq50KMd.js";import"../color-string-R8AcnC2W.js";import"../color-name-Dju3oUBS.js";import"../simple-swizzle-FKz8em3-.js";import"../is-arrayish-DyGeW-O8.js";import"../pako-C1gZChMM.js";import"../crypto-js-BGTciKqz.js";import"../linebreak-C8fs1LWV.js";import"../jay-peg-FwC6KZcX.js";import"./png-js-DfO9AvVs.js";import"./stylesheet-C-wRpPoa.js";import"../media-engine-Dbb0n68m.js";import"../hsl-to-hex-B6BXVbT_.js";import"../hsl-to-rgb-for-reals-jL61FXS_.js";import"../postcss-value-parser-BWRRAwsW.js";import"./textkit-CAn-WyP9.js";import"../bidi-js-DLACMwmw.js";import"../hyphen-DM2ckLBc.js";import"../yoga-layout-BEt2d-y4.js";import"../emoji-regex-xs-CiSvdbo-.js";import"./image-PYw2WAL8.js";import"../scheduler-DbjxIo9m.js";import"../object-assign-BQRdz_Ma.js";const G=t=>Object.fromEntries(Object.entries(t).filter(n=>{let[,e]=n;return e!==void 0})),M=(t,n)=>{let{style:e,children:r,...i}=n;return{type:t,box:{},style:e||{},props:i||{},children:[]}},X=t=>({type:"TEXT_INSTANCE",value:t}),L=(t,n)=>{const e=t.type==="TEXT"||t.type==="LINK"||t.type==="TSPAN"||t.type==="NOTE";if(n.type==="TEXT_INSTANCE"&&!e){console.warn(`Invalid '${n.value}' string child outside <Text> component`);return}t.children.push(n)},Y=(t,n)=>{t.type==="ROOT"?t.document=n:L(t,n)},K=(t,n,e)=>{var r;const i=(r=t.children)===null||r===void 0?void 0:r.indexOf(e);i!==void 0&&i!==-1&&n&&t.children.splice(i,0,n)},V=(t,n)=>{var e;const r=(e=t.children)===null||e===void 0?void 0:e.indexOf(n);r!==void 0&&r!==-1&&t.children.splice(r,1)},Q=(t,n)=>{var e;const r=(e=t.children)===null||e===void 0?void 0:e.indexOf(n);r!==void 0&&r!==-1&&t.children.splice(r,1)},z=(t,n,e)=>{t.value=e},H=(t,n,e,r,i)=>{const{style:d,...a}=i;t.props=a,t.style=d},J=t=>{let{onChange:n=()=>{}}=t;return q({appendChild:L,appendChildToContainer:Y,commitTextUpdate:z,commitUpdate:H,createInstance:M,createTextInstance:X,insertBefore:K,removeChild:V,removeChildFromContainer:Q,resetAfterCommit:n})},b=new j;let x;const f={},W=t=>{const n=()=>{var o;const s=((o=f.change)===null||o===void 0?void 0:o.slice())||[];for(let c=0;c<s.length;c+=1)s[c]()},e={type:"ROOT",document:null};x=x||J({onChange:n});const r=x.createContainer(e),i=(o,s)=>{x.updateContainer(o,r,null,s)};t&&i(t);const d=async function(o){o===void 0&&(o=!0);const s=e.document.props||{},{pdfVersion:c,language:v,pageLayout:m,pageMode:l,title:D,author:P,subject:R,keyboards:_,creator:O="react-pdf",producer:E="react-pdf",creationDate:I=new Date,modificationDate:N}=s,C=new U({compress:o,pdfVersion:c,lang:v,displayTitle:!0,autoFirstPage:!1,info:G({Title:D,Author:P,Subject:R,Keywords:_,Creator:O,Producer:E,CreationDate:I,ModificationDate:N})});m&&(C._root.data.PageLayout=S(m)),l&&(C._root.data.PageMode=S(l));const w=await $(e.document,b),A=B(C,w);return{layout:w,fileStream:A}},a=function(o){o===void 0&&(o={}),e.document.props.onRender&&e.document.props.onRender(o)};return{on:(o,s)=>{f[o]||(f[o]=[]),f[o].push(s)},container:e,toBlob:async()=>{const o=[],{layout:s,fileStream:c}=await d();return new Promise((v,m)=>{c.on("data",l=>{o.push(l instanceof Uint8Array?l:new Uint8Array(l))}),c.on("end",()=>{try{const l=new Blob(o,{type:"application/pdf"});a({blob:l,_INTERNAL__LAYOUT__DATA_:s}),v(l)}catch(l){m(l)}})})},toBuffer:async()=>{const{layout:o,fileStream:s}=await d();return a({_INTERNAL__LAYOUT__DATA_:o}),s},toString:async()=>{let o="";const{fileStream:s}=await d(!1);return new Promise((c,v)=>{try{s.on("data",m=>{o+=m}),s.on("end",()=>{a(),c(o)})}catch(m){v(m)}})},removeListener:(o,s)=>{if(!f[o])return;const c=f[o].indexOf(s);c>-1&&f[o].splice(c,1)},updateContainer:i}},zt=b,Ht={create:t=>t},Z=function(t){let{document:n}=t===void 0?{}:t;const e=h.useRef(null),[r,i]=h.useState({url:null,blob:null,error:null,loading:!!n});h.useEffect(()=>{const a=F({autostart:!0,concurrency:1}),y=()=>{i(u=>({...u,loading:!0})),a.splice(0,a.length,()=>r.error?Promise.resolve():e.current.toBlob())},p=u=>{console.error(u),i(g=>({...g,loading:!1,error:u}))},T=u=>{i({blob:u,error:null,loading:!1,url:URL.createObjectURL(u)})};return e.current=W(),e.current.on("change",y),n&&e.current.updateContainer(n),a.on("error",p),a.on("success",T),()=>{a.end(),e.current.removeListener("change",y)}},[]),h.useEffect(()=>()=>{r.url&&URL.revokeObjectURL(r.url)},[r.url]);const d=h.useCallback(a=>{e.current.updateContainer(a)},[]);return[r,d]},tt=(t,n)=>{let{fileName:e="document.pdf",document:r,children:i,onClick:d,href:a,...y}=t;const[p,T]=Z();if(h.useEffect(()=>T(r),[r]),!r)return console.warn("You should pass a valid document to PDFDownloadLink"),null;const u=()=>{p&&window.navigator.msSaveBlob&&window.navigator.msSaveBlob(p.blob,e)},g=o=>{u(),typeof d=="function"&&d(o,p)};return k.jsx("a",{href:p.url,download:e,onClick:g,ref:n,...y,children:typeof i=="function"?i(p):i})},Jt=h.forwardRef(tt);export{te as Canvas,ee as Checkbox,oe as Circle,ne as Defs,re as Document,ie as Ellipse,se as FieldSet,zt as Font,ae as G,ce as Image,le as Line,de as LinearGradient,ue as Link,pe as List,me as Note,Jt as PDFDownloadLink,fe as Page,he as Path,ye as Polygon,ve as Polyline,Te as RadialGradient,ge as Rect,xe as Select,Ht as StyleSheet,Ce as Svg,we as Text,Se as TextInput,Le as TextInstance,be as Tspan,De as View,J as createRenderer,W as pdf,Z as usePDF};
