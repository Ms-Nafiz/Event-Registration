import{r as y,a as I,j as e}from"./react-CNOZSPzq.js";import"./reactflow-C2W0beWk.js";import{M as h,c as E,d as $,R as A,P as C}from"./@reactflow/core-DAwl_23a.js";import{B as q}from"./@reactflow/background-BNC8nvOL.js";import{C as R}from"./@reactflow/controls-CckLbIQO.js";import"./abs-svg-path-C4ZzWwgR.js";import"./react-dom-DfT9qZI1.js";import"./scheduler-DbjxIo9m.js";import"./classcat-RvS1aOr8.js";import"./zustand-BiaLcQ9o.js";import"./use-sync-external-store-DIerr2r9.js";import"./d3-zoom-BUn_QO1H.js";import"./d3-transition-VvefM7pg.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-timer-DdKHrDhs.js";import"./d3-interpolate-Dtht_K2k.js";import"./d3-color-9lF95FHy.js";import"./d3-selection-DSeOx27A.js";import"./d3-ease-DRPgKoYJ.js";import"./d3-drag-CKshNLwO.js";const M=({data:i})=>{const{member:t,alive:r}=i;return e.jsxs("div",{className:`p-4 rounded-2xl shadow-lg border-2 transition-all hover:scale-105 ${r?"bg-white border-indigo-100":"bg-slate-50 border-slate-200 grayscale-[0.5]"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-12 h-12 rounded-xl object-cover border border-slate-100 shadow-sm"}):e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-black text-white ${t.gender==="Female"?"bg-pink-500":"bg-indigo-500"}`,children:t.name?.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-[120px]",children:[e.jsxs("h4",{className:"text-slate-800 font-bold text-sm leading-tight flex items-center gap-1.5",children:[t.name,!r&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[9px] font-bold text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded uppercase tracking-tighter",children:t.displayId||t.uniqueId}),e.jsxs("span",{className:"text-[9px] font-bold text-slate-500 italic",children:["Gen ",t.generation]})]}),t.profession&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-medium truncate",children:t.profession})]})]}),!r&&e.jsx("div",{className:"absolute top-2 right-2 text-[10px] font-bold text-slate-300 italic",children:"‡¶Æ‡ßÉ‡¶§"})]})},T={member:M};function ee({members:i}){const{initialNodes:t,initialEdges:r}=y.useMemo(()=>{const m=[],d=[],a={};i.forEach(l=>{const o=l.generation||1;a[o]||(a[o]=[]),a[o].push(l)});const x=250,j=200;return Object.keys(a).forEach(l=>{const o=parseInt(l),p=a[o],N=(p.length-1)*x;p.forEach((s,w)=>{const v=w*x-N/2,k=(o-1)*j;m.push({id:s.uniqueId,type:"member",position:{x:v,y:k},data:{member:s,alive:s.alive!==!1}}),s.fatherId&&d.push({id:`e-${s.fatherId}-${s.uniqueId}`,source:s.fatherId,target:s.uniqueId,animated:!0,style:{stroke:"#6366f1",strokeWidth:2},markerEnd:{type:h.ArrowClosed,color:"#6366f1"}}),s.motherId&&d.push({id:`e-${s.motherId}-${s.uniqueId}`,source:s.motherId,target:s.uniqueId,animated:!0,style:{stroke:"#ec4899",strokeWidth:2,strokeDasharray:"5,5"},markerEnd:{type:h.ArrowClosed,color:"#ec4899"}})})}),{initialNodes:m,initialEdges:d}},[i]),[u,n,g]=E(t),[f,c,b]=$(r);return I.useEffect(()=>{n(t),c(r)},[t,r,n,c]),e.jsxs("div",{className:"bg-white rounded-3xl p-4 shadow-xl border border-slate-100 h-[700px] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-50/50 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-slate-50/50 rounded-full blur-3xl -ml-32 -mb-32"}),e.jsxs(A,{nodes:u,edges:f,onNodesChange:g,onEdgesChange:b,nodeTypes:T,fitView:!0,children:[e.jsx(q,{color:"#f1f5f9",gap:20}),e.jsx(R,{}),e.jsxs(C,{position:"top-left",className:"bg-white/80 backdrop-blur-md p-4 rounded-2xl border border-slate-100 shadow-sm mt-4 ml-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:"üå≥ ‡¶´‡ßç‡¶Ø‡¶æ‡¶Æ‡¶ø‡¶≤‡¶ø ‡¶ü‡ßç‡¶∞‡¶ø ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï"}),e.jsx("p",{className:"text-slate-400 text-[10px] mt-1 font-bold uppercase tracking-widest",children:"‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶°‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ì ‡¶ú‡ßÅ‡¶Æ ‡¶≠‡¶ø‡¶â"}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"‡¶™‡¶ø‡¶§‡¶æ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-1 bg-pink-500 rounded-full border-t border-dashed"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"‡¶Æ‡¶æ‡¶§‡¶æ"})]})]})]})]})]})}export{ee as default};
