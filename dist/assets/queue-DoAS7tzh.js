import{g as q}from"./abs-svg-path-C4ZzWwgR.js";import{r as O}from"./inherits-BICa84dG.js";import{r as I}from"./events-DQ172AOg.js";var f={exports:{}},g;function T(){if(g)return f.exports;g=1;var v=O(),p=I().EventEmitter;f.exports=r,f.exports.default=r;function r(t){if(!(this instanceof r))return new r(t);p.call(this),t=t||{},this.concurrency=t.concurrency||1/0,this.timeout=t.timeout||0,this.autostart=t.autostart||!1,this.results=t.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}v(r,p);var y=["pop","shift","indexOf","lastIndexOf"];y.forEach(function(t){r.prototype[t]=function(){return Array.prototype[t].apply(this.jobs,arguments)}}),r.prototype.slice=function(t,e){return this.jobs=this.jobs.slice(t,e),this},r.prototype.reverse=function(){return this.jobs.reverse(),this};var j=["push","unshift","splice"];j.forEach(function(t){r.prototype[t]=function(){var e=Array.prototype[t].apply(this.jobs,arguments);return this.autostart&&this.start(),e}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),r.prototype.start=function(t){if(t&&x.call(this,t),this.running=!0,this.pending>=this.concurrency)return;if(this.jobs.length===0){this.pending===0&&c.call(this);return}var e=this,s=this.jobs.shift(),u=!0,i=this.session,n=null,m=!1,a=null,d=s.hasOwnProperty("timeout")?s.timeout:this.timeout;function h(o,E){u&&e.session===i&&(u=!1,e.pending--,n!==null&&(delete e.timers[n],clearTimeout(n)),o?e.emit("error",o,s):m===!1&&(a!==null&&(e.results[a]=Array.prototype.slice.call(arguments,1)),e.emit("success",E,s)),e.session===i&&(e.pending===0&&e.jobs.length===0?c.call(e):e.running&&e.start()))}d&&(n=setTimeout(function(){m=!0,e.listeners("timeout").length>0?e.emit("timeout",h,s):h()},d),this.timers[n]=n),this.results&&(a=this.results.length,this.results[a]=null),this.pending++,e.emit("start",s);var l=s(h);l&&l.then&&typeof l.then=="function"&&l.then(function(o){return h(null,o)}).catch(function(o){return h(o||!0)}),this.running&&this.jobs.length>0&&this.start()},r.prototype.stop=function(){this.running=!1},r.prototype.end=function(t){b.call(this),this.jobs.length=0,this.pending=0,c.call(this,t)};function b(){for(var t in this.timers){var e=this.timers[t];delete this.timers[t],clearTimeout(e)}}function x(t){var e=this;this.on("error",s),this.on("end",u);function s(i){e.end(i)}function u(i){e.removeListener("error",s),e.removeListener("end",u),t(i,this.results)}}function c(t){this.session++,this.running=!1,this.emit("end",t)}return f.exports}var A=T();const M=q(A);export{M as q};
