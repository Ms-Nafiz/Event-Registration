const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FamilyTreeView-QMC8YIKv.js","assets/react-CNOZSPzq.js","assets/abs-svg-path-C4ZzWwgR.js","assets/reactflow-C2W0beWk.js","assets/react-dom-DfT9qZI1.js","assets/scheduler-DbjxIo9m.js","assets/reactflow-B5DZHykP.css","assets/@reactflow/core-DAwl_23a.js","assets/classcat-RvS1aOr8.js","assets/zustand-BiaLcQ9o.js","assets/use-sync-external-store-DIerr2r9.js","assets/d3-zoom-BUn_QO1H.js","assets/d3-transition-VvefM7pg.js","assets/d3-dispatch-kxCwF96_.js","assets/d3-timer-DdKHrDhs.js","assets/d3-interpolate-Dtht_K2k.js","assets/d3-color-9lF95FHy.js","assets/d3-selection-DSeOx27A.js","assets/d3-ease-DRPgKoYJ.js","assets/d3-drag-CKshNLwO.js","assets/@reactflow/background-BNC8nvOL.js","assets/@reactflow/controls-CckLbIQO.js"])))=>i.map(i=>d[i]);
import{j as e,r as d,a as ae}from"./react-CNOZSPzq.js";import{R as at}from"./react-dom-DfT9qZI1.js";import"./firebase-9zlpSCh1.js";import{g as rt,o as nt,s as lt,c as it,u as Ve,a as ot,b as dt}from"./@firebase/auth-LjKT5wM5.js";import{i as ct}from"./@firebase/app-BjC-wD6T.js";import"./@firebase/logger-BTL5tgLx.js";import{g as xt,d as U,a as _e,s as Qe,q as me,o as ge,c as Y,b as oe,u as J,e as be,f as re,h as Se,w as Be,T as Ze,i as Ce,j as qe,k as mt}from"./@firebase/firestore-B8HNlpN_.js";import{z as j,F as ht}from"./react-hot-toast-klIcvohg.js";import{u as Ke,a as Me,L as he,O as ut,R as pt,b as Z,N as Re,B as gt}from"./react-router-GrcL_nXm.js";import{F as bt,S as ft,P as ze}from"./@react-pdf/renderer-Ddqe3Gm-.js";import{D as jt,P as yt,V,T,I as vt,L as Nt}from"./@react-pdf/primitives-Cl8EByqz.js";import{Q as Ee}from"./qrcode-B_nuqesy.js";import{H as wt}from"./html5-qrcode-B9KN6_3H.js";import{S as ce}from"./react-select-BYPC46mh.js";import{r as $e,u as ee,w as Ie}from"./xlsx-BTp1RmNK.js";import"./abs-svg-path-C4ZzWwgR.js";import"./scheduler-DbjxIo9m.js";import"./@firebase/util-_-4dhrSn.js";import"./@firebase/component-Cbqufe_i.js";import"./idb-BXWtuYvb.js";import"./@firebase/webchannel-wrapper-vaFAYuKl.js";import"./goober-wofAfydu.js";import"./queue-DoAS7tzh.js";import"./inherits-BICa84dG.js";import"./events-DQ172AOg.js";import"./@react-pdf/font-BXXWAYYz.js";import"./fontkit-CVzJVDLb.js";import"./restructure-DwIbRzqP.js";import"./@swc/helpers-DIxjOVuh.js";import"./fast-deep-equal-BBHyQ0Kz.js";import"./unicode-properties-CQ3Ws5kP.js";import"./base64-js-BWhG0cXf.js";import"./unicode-trie-CHCc-EBe.js";import"./tiny-inflate-DtqwGtSp.js";import"./dfa-bo7c_j7N.js";import"./clone-CJq_oHA9.js";import"./brotli-B9EKUE_s.js";import"./tslib-kHcLnhpD.js";import"./@react-pdf/pdfkit-7w6jAvzF.js";import"./pako-C1gZChMM.js";import"./crypto-js-BGTciKqz.js";import"./linebreak-C8fs1LWV.js";import"./jay-peg-FwC6KZcX.js";import"./@react-pdf/png-js-DfO9AvVs.js";import"./@react-pdf/render-Cyzxs9UJ.js";import"./@react-pdf/fns-DvmUkUUA.js";import"./parse-svg-path-ClMpa306.js";import"./normalize-svg-path-ZUMom3hX.js";import"./svg-arc-to-cubic-bezier-DEq50KMd.js";import"./color-string-R8AcnC2W.js";import"./color-name-Dju3oUBS.js";import"./simple-swizzle-FKz8em3-.js";import"./is-arrayish-DyGeW-O8.js";import"./@react-pdf/layout-KvCx2gi5.js";import"./@react-pdf/stylesheet-C-wRpPoa.js";import"./media-engine-Dbb0n68m.js";import"./hsl-to-hex-B6BXVbT_.js";import"./hsl-to-rgb-for-reals-jL61FXS_.js";import"./postcss-value-parser-BWRRAwsW.js";import"./@react-pdf/textkit-CAn-WyP9.js";import"./bidi-js-DLACMwmw.js";import"./hyphen-DM2ckLBc.js";import"./yoga-layout-BEt2d-y4.js";import"./emoji-regex-xs-CiSvdbo-.js";import"./@react-pdf/image-PYw2WAL8.js";import"./@react-pdf/reconciler-CEvOrHNi.js";import"./object-assign-BQRdz_Ma.js";import"./dijkstrajs-COg3n3zL.js";import"./@babel/runtime-Bonm0zpI.js";import"./@emotion/react-Ccg1Q_6O.js";import"./hoist-non-react-statics-D8JVEfXG.js";import"./react-is-DywX51Id.js";import"./@emotion/cache-B9HucK6v.js";import"./@emotion/sheet-6IwnyhEX.js";import"./stylis-DDa9OTMq.js";import"./@emotion/utils-BijCJQMc.js";import"./@emotion/serialize-CaRDouge.js";import"./@emotion/hash-WldOFDRm.js";import"./@emotion/unitless-x5IvBceT.js";import"./@emotion/memoize-3S_6p140.js";import"./@emotion/use-insertion-effect-with-fallbacks-Cml_1O_j.js";import"./@floating-ui/dom-BR852mXs.js";import"./@floating-ui/utils-C56Lz_0d.js";import"./use-isomorphic-layout-effect-5QPlj9wA.js";import"./memoize-one-BdPwpGay.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))N(a);new MutationObserver(a=>{for(const v of a)if(v.type==="childList")for(const x of v.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&N(x)}).observe(document,{childList:!0,subtree:!0});function b(a){const v={};return a.integrity&&(v.integrity=a.integrity),a.referrerPolicy&&(v.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?v.credentials="include":a.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function N(a){if(a.ep)return;a.ep=!0;const v=b(a);fetch(a.href,v)}})();const kt={apiKey:"AIzaSyBGqWpLlUTRgqXAtEVOQx36shmLQia7zkM",authDomain:"horkoraevent.firebaseapp.com",projectId:"horkoraevent",storageBucket:"horkoraevent.firebasestorage.app",messagingSenderId:"156489323330",appId:"1:156489323330:web:a7d29a1a0d548023a9eedb"},Je=ct(kt),xe=rt(Je),D=xt(Je);function St(){return e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"relative mb-8",children:e.jsxs("div",{className:"w-24 h-24 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-2 border-4 border-purple-300 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"B"})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 font-bangla",children:"à¦¬à¦‚à¦¶ à¦‡à¦­à§‡à¦¨à§à¦Ÿ"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600",children:[e.jsx("span",{className:"text-sm font-medium",children:"Loading"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]}),e.jsx("div",{className:"mt-8 w-64 mx-auto",children:e.jsx("div",{className:"h-1 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-progress"})})})]}),e.jsx("style",{children:`
        @keyframes progress {
          0% { width: 0%; }
          50% { width: 70%; }
          100% { width: 100%; }
        }
        .animate-progress {
          animation: progress 1.5s ease-in-out infinite;
        }
      `})]})}const et=d.createContext(),Ct=({children:s})=>{const[g,b]=d.useState(null),[N,a]=d.useState(null),[v,x]=d.useState(!0);d.useEffect(()=>{const u=nt(xe,async I=>{if(x(!0),I)try{const p=U(D,"users",I.uid),i=await _e(p);if(i.exists()){const r=i.data();b(I),a(r)}else b(null),a(null)}catch(p){console.error("Auth fetch error:",p),b(null),a(null)}else b(null),a(null);x(!1)});return()=>u()},[]);const y=async(u,I,p,i,r)=>{const c=(await it(xe,I,p)).user;return await Ve(c,{displayName:u}),await Qe(U(D,"users",c.uid),{uid:c.uid,name:u,email:I,mobile:i,groupId:r,role:"user",status:"pending",createdAt:new Date().toISOString()}),c},o=(u,I)=>ot(xe,u,I),M=async()=>{try{await lt(xe),b(null),a(null)}catch(u){console.error("Logout failed",u)}};return v?e.jsx(St,{}):e.jsx(et.Provider,{value:{user:g,userData:N,login:o,register:y,logout:M,loading:v},children:s})},de=()=>d.useContext(et),tt=d.createContext(),fe=()=>{const s=d.useContext(tt);if(!s)throw new Error("useData must be used within a DataProvider");return s},Mt=({children:s})=>{const[g,b]=d.useState({donations:[],registrations:[],groups:[],members:[],users:[]}),[N,a]=d.useState({donations:!0,registrations:!0,groups:!0,members:!0,users:!0});d.useEffect(()=>{const y=me(Y(D,"donations"),ge("date","desc")),o=oe(y,r=>{const l=r.docs.map(c=>({...c.data(),id:c.id,firebaseDocId:c.id}));b(c=>({...c,donations:l})),a(c=>({...c,donations:!1}))},r=>{console.error("Donations listener error:",r),a(l=>({...l,donations:!1}))}),M=me(Y(D,"registrations"),ge("createdAt","desc")),u=oe(M,r=>{const l=r.docs.map(c=>({...c.data(),id:c.id,firebaseDocId:c.id}));b(c=>({...c,registrations:l})),a(c=>({...c,registrations:!1}))},r=>{console.error("Registrations listener error:",r),a(l=>({...l,registrations:!1}))}),I=oe(Y(D,"groups"),r=>{const l=r.docs.map(c=>({...c.data(),id:c.id,firebaseDocId:c.id}));b(c=>({...c,groups:l})),a(c=>({...c,groups:!1}))},r=>{console.error("Groups listener error:",r),a(l=>({...l,groups:!1}))}),p=oe(Y(D,"members"),r=>{const l=r.docs.map(c=>({...c.data(),id:c.id,firebaseDocId:c.id}));b(c=>({...c,members:l})),a(c=>({...c,members:!1}))},r=>{console.error("Members listener error:",r),a(l=>({...l,members:!1}))}),i=oe(Y(D,"users"),r=>{const l=r.docs.map(c=>({id:c.id,...c.data()}));b(c=>({...c,users:l})),a(c=>({...c,users:!1}))},r=>{console.error("Users listener error:",r),a(l=>({...l,users:!1}))});return()=>{o(),u(),I(),p(),i()}},[]);const v=!N.donations&&!N.registrations&&!N.groups,x={...g,loading:N,isInitialLoadComplete:v};return e.jsx(tt.Provider,{value:x,children:s})},Te=({collapsed:s,setCollapsed:g,isMobile:b,setMobileOpen:N})=>{const{logout:a,user:v,userData:x}=de(),y=Ke(),o=Me(),M=x?.role||"user",u=async()=>{await a(),o("/admin/login")},I=[{groupName:"à¦®à§‚à¦² à¦®à§‡à¦¨à§",items:[{name:"à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡",path:"/admin/dashboard",icon:"ðŸ ",roles:["admin","user"]},{name:"à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦²",path:"/admin/profile",icon:"ðŸ‘¤",roles:["admin","user"]}]},{groupName:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦“ à¦à¦¨à§à¦Ÿà§à¦°à¦¿",items:[{name:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¤à¦¾à¦²à¦¿à¦•à¦¾",path:"/admin/list",icon:"ðŸ‘¥",roles:["admin"]},{name:"à¦¨à¦¤à§à¦¨ à¦à¦¨à§à¦Ÿà§à¦°à¦¿",path:"/admin/create-entry",icon:"ðŸ“",roles:["admin"]},{name:"à¦•à¦¿à¦‰à¦†à¦° à¦¸à§à¦•à§à¦¯à¦¾à¦¨à¦¾à¦°",path:"/admin/scan",icon:"ðŸ“·",roles:["admin"]},{name:"à¦—à§à¦°à§à¦ª à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ",path:"/admin/groups",icon:"ðŸ“¦",roles:["admin"]}]},{groupName:"à¦¬à¦‚à¦¶ à¦“ à¦¸à¦¦à¦¸à§à¦¯",items:[{name:"à¦¬à¦‚à¦¶ à¦¸à¦¦à¦¸à§à¦¯",path:"/admin/members",icon:"ðŸŒ³",roles:["admin","user"]},{name:"à¦¸à¦¦à¦¸à§à¦¯ à¦†à¦ªà¦²à§‹à¦¡",path:"/admin/bulk-members-upload",icon:"ðŸ“¤",roles:["admin"]}]},{groupName:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ",items:[{name:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¦à¦¿à¦¨",path:"/admin/donate",icon:"ðŸ’¸",roles:["admin","user"]},{name:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦²à¦¿à¦¸à§à¦Ÿ",path:"/admin/donation-list",icon:"ðŸ’°",roles:["admin"]},{name:"à¦¬à¦¾à¦²à§à¦• à¦†à¦ªà¦²à§‹à¦¡",path:"/admin/bulk-donate",icon:"ðŸ“¤",roles:["admin"]},{name:"à¦šà¦¾à¦à¦¦à¦¾ à¦¸à¦¾à¦°à¦¾à¦‚à¦¶",path:"/admin/contribution-summary",icon:"ðŸ“Š",roles:["admin"]}]},{groupName:"à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦®",items:[{name:"à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€",path:"/admin/users",icon:"âš™ï¸",roles:["admin"]}]}];return e.jsxs("div",{className:`
      flex flex-col h-full transition-all duration-300 ease-in-out
      bg-slate-900 text-white shadow-xl
      ${s?"w-20":"w-64"}
    `,children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-800/50 relative",children:[s?e.jsx("div",{className:"w-10 h-10 mx-auto rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-indigo-500/30",children:"B"}):e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-indigo-500/30",children:"B"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold font-bangla tracking-wide text-white",children:"à¦¬à¦‚à¦¶ à¦‡à¦­à§‡à¦¨à§à¦Ÿ"}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-semibold",children:"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦ªà§à¦¯à¦¾à¦¨à§‡à¦²"})]})]}),!b&&e.jsx("button",{onClick:()=>g(!s),className:"absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-white text-slate-600 rounded-full shadow-md flex items-center justify-center hover:bg-indigo-50 hover:text-indigo-600 transition-all z-50 border border-slate-100",children:s?e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-6 custom-scrollbar",children:I.map((p,i)=>{const r=p.items.filter(l=>l.roles.includes(M));return r.length===0?null:e.jsxs("div",{className:"space-y-1",children:[!s&&e.jsxs("div",{className:"flex items-center gap-2 px-4 mb-2 mt-4",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.6)]"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex-1",children:p.groupName}),e.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-slate-700/50 to-transparent"})]}),r.map(l=>{const c=y.pathname===l.path;return e.jsxs(he,{to:l.path,onClick:()=>b&&N(!1),className:`
                      flex items-center px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden
                      ${c?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/20":"text-slate-400 hover:bg-slate-800/50 hover:text-white"}
                      ${s?"justify-center":""}
                    `,children:[c&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-indigo-500 opacity-100 z-0"}),e.jsx("span",{className:`relative z-10 text-xl transition-transform duration-300 ${c?"scale-110":"group-hover:scale-110"}`,children:l.icon}),!s&&e.jsx("span",{className:"relative z-10 ml-3 font-medium font-bangla text-sm whitespace-nowrap transition-all duration-300",children:l.name}),s&&e.jsx("div",{className:"absolute left-full ml-4 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50 shadow-xl border border-slate-700",children:l.name})]},l.path)})]},i)})}),e.jsx("div",{className:"p-4 border-t border-slate-800/50 bg-slate-900/50",children:e.jsxs("div",{className:`flex items-center ${s?"justify-center":"gap-3"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-indigo-400 font-bold border border-slate-700",children:v?.displayName?.charAt(0)||"U"}),!s&&e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate",children:v?.displayName||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:v?.email})]}),!s&&e.jsx("button",{onClick:u,className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors",title:"à¦²à¦—à¦†à¦‰à¦Ÿ",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})};function It({mobileOpen:s,setMobileOpen:g,collapsed:b,setCollapsed:N}){return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:`fixed inset-0 z-40 md:hidden transition-opacity duration-300 ${s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{onClick:()=>g(!1),className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"}),e.jsxs("div",{className:`absolute top-0 left-0 bottom-0 w-64 bg-slate-900 shadow-2xl transform transition-transform duration-300 ease-out ${s?"translate-x-0":"-translate-x-full"}`,children:[e.jsx(Te,{collapsed:!1,isMobile:!0,setMobileOpen:g}),e.jsx("button",{onClick:()=>g(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"hidden md:block h-screen sticky top-0 z-30",children:e.jsx(Te,{collapsed:b,setCollapsed:N,isMobile:!1})})]})}function Lt(){const[s,g]=d.useState(!1),[b,N]=d.useState(!1),a=Ke(),x={"/admin/dashboard":"à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡","/admin/users":"à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€","/admin/scan":"QR à¦¸à§à¦•à§à¦¯à¦¾à¦¨à¦¾à¦°","/admin/create-entry":"à¦¨à¦¤à§à¦¨ à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨","/admin/list":"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¤à¦¾à¦²à¦¿à¦•à¦¾","/admin/groups":"à¦—à§à¦°à§à¦ª à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ","/admin/profile":"à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦²","/admin/donate":"à¦¡à§‹à¦¨à§‡à¦¶à¦¨","/admin/bulk-donate":"à¦¬à¦¾à¦²à§à¦• à¦†à¦ªà¦²à§‹à¦¡","/admin/donation-list":"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¤à¦¾à¦²à¦¿à¦•à¦¾","/admin/contribution-summary":"à¦šà¦¾à¦à¦¦à¦¾ à¦¸à¦¾à¦°à¦¾à¦‚à¦¶","/admin/members":"à¦¬à¦‚à¦¶ à¦¸à¦¦à¦¸à§à¦¯ à¦¤à¦¾à¦²à¦¿à¦•à¦¾","/admin/bulk-members-upload":"à¦¸à¦¦à¦¸à§à¦¯ à¦†à¦ªà¦²à§‹à¦¡"}[a.pathname]||"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦ªà§à¦¯à¦¾à¦¨à§‡à¦²";return e.jsxs("div",{className:"flex h-screen bg-slate-50 font-bangla overflow-hidden",children:[e.jsx(It,{mobileOpen:s,setMobileOpen:g,collapsed:b,setCollapsed:N}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-20 flex items-center justify-between px-6 md:px-8 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>g(!0),className:"md:hidden p-2 -ml-2 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 tracking-tight",children:x})})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm text-slate-500 bg-slate-100 px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦¸à¦šà¦²"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(ut,{})})})]})]})}function we({title:s,value:g,icon:b,gradient:N,delay:a}){return e.jsxs("div",{className:"relative overflow-hidden bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-md hover:-translate-y-1 animate-fade-in-up",style:{animationDelay:`${a}ms`},children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-br ${N} opacity-10 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:s}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:g})]}),e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${N} flex items-center justify-center text-white text-xl shadow-lg`,children:b})]})]})}function Dt(){const{registrations:s,groups:g,loading:b}=fe(),[N,a]=d.useState({total_registrations:0,total_members:0,total_paid:0,total_pending:0}),[v,x]=d.useState([]),[y,o]=d.useState([]),[M,u]=d.useState(!0),[I,p]=d.useState(0);d.useEffect(()=>{(async()=>{try{const l=U(D,"stats","page_views"),c=await _e(l);c.exists()&&p(c.data().count)}catch(l){console.error("Error fetching views:",l)}})()},[]),d.useEffect(()=>{!b.registrations&&!b.groups&&(i(s,g),u(!1))},[s,g,b]);const i=(r,l)=>{const c={};l.forEach(_=>{c[_.id]=_.name});let C=0,m=0,k=0,S=0;const L={};r.forEach(_=>{C++;const w=parseInt(_.totalMembers)||0;m+=w,_.paymentStatus==="Paid"?k++:_.paymentStatus==="Pending"&&S++;const R=_.group_id;R&&(L[R]||(L[R]={regCount:0,memCount:0,demographics:{male:0,female:0,children:0},tshirtSizes:{S:0,M:0,L:0,XL:0,XXL:0,NA:0}}),L[R].regCount++,L[R].memCount+=w,_.members&&Array.isArray(_.members)&&_.members.forEach(G=>{G.gender==="Male"?L[R].demographics.male++:G.gender==="Female"?L[R].demographics.female++:G.gender==="Child"&&L[R].demographics.children++;const K=G.t_shirt_size||"NA";L[R].tshirtSizes[K]!==void 0&&L[R].tshirtSizes[K]++}))});const E=Object.keys(L).map(_=>({id:_,name:c[_]||"à¦…à¦œà¦¾à¦¨à¦¾ à¦—à§à¦°à§à¦ª",registrations_count:L[_].regCount,total_members:L[_].memCount,demographics:L[_].demographics,tshirtSizes:L[_].tshirtSizes})),A=[...r].sort((_,w)=>{const R=_.createdAt?.seconds?_.createdAt.seconds:0;return(w.createdAt?.seconds?w.createdAt.seconds:0)-R}).slice(0,5).map(_=>({..._,groupName:c[_.group_id]||"N/A"}));a({total_registrations:C,total_members:m,total_paid:k,total_pending:S}),o(E),x(A)};return M?e.jsxs("div",{className:"flex items-center justify-center h-screen font-bangla text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-2"}),"à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."]}):e.jsxs("div",{className:"p-4 md:p-8 space-y-8 font-bangla max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"à¦†à¦ªà¦¨à¦¾à¦° à¦‡à¦­à§‡à¦¨à§à¦Ÿà§‡à¦° à¦¸à¦¾à¦®à¦—à§à¦°à¦¿à¦• à¦…à¦¬à¦¸à§à¦¥à¦¾"})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"à¦†à¦œà¦•à§‡à¦° à¦¤à¦¾à¦°à¦¿à¦–"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:new Date().toLocaleDateString("bn-BD",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(we,{title:"à¦®à§‹à¦Ÿ à¦²à¦¿à¦‚à¦• à¦­à¦¿à¦œà¦¿à¦Ÿ",value:I,icon:"ðŸ‘ï¸",gradient:"from-purple-500 to-indigo-500",delay:0}),e.jsx(we,{title:"à¦®à§‹à¦Ÿ à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨",value:N?.total_registrations||0,icon:"ðŸ“„",gradient:"from-blue-500 to-cyan-500",delay:100}),e.jsx(we,{title:"à¦®à§‹à¦Ÿ à¦¸à¦¦à¦¸à§à¦¯",value:N?.total_members||0,icon:"ðŸ‘¥",gradient:"from-emerald-500 to-teal-500",delay:200}),e.jsx(we,{title:"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸",value:`${N?.total_paid||0} / ${N?.total_pending||0}`,icon:"ðŸ’°",gradient:"from-orange-500 to-amber-500",delay:300})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"à¦¸à¦¾à¦®à§à¦ªà§à¦°à¦¤à¦¿à¦• à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"}),e.jsx(he,{to:"/admin/list",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 hover:underline transition-colors",children:"à¦¸à¦¬ à¦¦à§‡à¦–à§à¦¨ â†’"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-50",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¨à¦¾à¦®"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦—à§à¦°à§à¦ª"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¸à¦¦à¦¸à§à¦¯"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:v.length>0?v.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:r.name}),e.jsx("div",{className:"text-xs text-gray-400",children:r.mobile})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"bg-gray-100 text-gray-600 py-1 px-2 rounded text-xs",children:r.groupName})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center font-medium text-gray-700",children:r.totalMembers}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${r.paymentStatus==="Paid"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:r.paymentStatus==="Paid"?"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400 text-sm",children:"à¦•à§‹à¦¨à§‹ à¦¤à¦¥à§à¦¯ à¦¨à§‡à¦‡à¥¤"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"à¦—à§à¦°à§à¦ª à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦ªà¦°à¦¿à¦¸à¦‚à¦–à§à¦¯à¦¾à¦¨"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦—à§à¦°à§à¦ªà§‡à¦° à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦¤à¦¥à§à¦¯"})]}),e.jsx("div",{className:"p-6",children:y.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map((r,l)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all hover:border-indigo-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex items-center justify-center text-sm font-bold shrink-0 shadow-md",children:l+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-bold text-gray-800",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.registrations_count," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ â€¢"," ",r.total_members," à¦¸à¦¦à¦¸à§à¦¯"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-600 uppercase mb-3 flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘¥"})," à¦²à¦¿à¦™à§à¦— à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦¬à¦¿à¦­à¦¾à¦œà¦¨"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 text-center border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:"à¦›à§‡à¦²à§‡/à¦ªà§à¦°à§à¦·"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:r.demographics.male})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-3 text-center border border-pink-200",children:[e.jsx("p",{className:"text-xs text-pink-600 font-semibold mb-1",children:"à¦®à§‡à¦¯à¦¼à§‡/à¦®à¦¹à¦¿à¦²à¦¾"}),e.jsx("p",{className:"text-2xl font-bold text-pink-700",children:r.demographics.female})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 text-center border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:"à¦¶à¦¿à¦¶à§"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.demographics.children})]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-gray-600 uppercase mb-3 flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘•"})," à¦Ÿà¦¿-à¦¶à¦¾à¦°à§à¦Ÿ à¦¸à¦¾à¦‡à¦œ à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨à§€à¦¯à¦¼à¦¤à¦¾"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(r.tshirtSizes).map(([c,C])=>C>0?e.jsxs("div",{className:"bg-white rounded-lg p-2 text-center border-2 border-gray-200 hover:border-indigo-300 transition-colors",children:[e.jsx("p",{className:"text-xs text-gray-600 font-bold",children:c}),e.jsx("p",{className:"text-lg font-bold text-indigo-600",children:C})]},c):null)})]})]},r.id))}):e.jsx("div",{className:"p-12 text-center text-gray-400 text-sm",children:"à¦•à§‹à¦¨à§‹ à¦—à§à¦°à§à¦ª à¦¡à§‡à¦Ÿà¦¾ à¦¨à§‡à¦‡à¥¤"})})]})]})}const Le=({config:s,onClose:g})=>{if(!s?.isOpen)return null;const b=()=>{s.onConfirm&&s.onConfirm(),g()},a=(()=>{switch(s.type){case"danger":return{icon:"âš ï¸",color:"rose",gradient:"from-rose-500 to-red-600",bg:"bg-rose-50",text:"text-rose-600"};case"success":return{icon:"âœ…",color:"emerald",gradient:"from-emerald-500 to-teal-600",bg:"bg-emerald-50",text:"text-emerald-600"};case"warning":return{icon:"ðŸ””",color:"amber",gradient:"from-amber-400 to-orange-500",bg:"bg-amber-50",text:"text-amber-600"};default:return{icon:"â“",color:"indigo",gradient:"from-indigo-500 to-purple-600",bg:"bg-indigo-50",text:"text-indigo-600"}}})();return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md animate-fade-in",onClick:g}),e.jsxs("div",{className:"relative bg-white w-full max-w-sm rounded-[3rem] p-10 shadow-2xl border border-white/50 animate-fade-in overflow-hidden font-bangla",children:[e.jsx("div",{className:`absolute -top-10 -right-10 w-32 h-32 bg-gradient-to-br ${a.gradient} opacity-10 blur-3xl rounded-full`}),e.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-24 h-24 ${a.bg} rounded-[2rem] flex items-center justify-center text-5xl mb-8 shadow-inner`,children:a.icon}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight leading-tight",children:s.title}),e.jsx("p",{className:"text-slate-500 font-bold mb-10 leading-relaxed px-2",children:s.message}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[e.jsx("button",{onClick:g,className:"px-6 py-4 rounded-2xl text-sm font-black text-slate-400 bg-slate-50 hover:bg-slate-100 transition-all active:scale-95",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{onClick:b,className:`px-6 py-4 rounded-2xl text-sm font-black text-white bg-gradient-to-r ${a.gradient} shadow-xl shadow-${a.color}-100 hover:scale-105 active:scale-95 transition-all outline-none`,children:"à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"})]})]})]})]})};bt.register({family:"Noto Sans Bengali",fonts:[{src:"/fonts/NotoSansBengali-Regular.ttf"},{src:"/fonts/NotoSansBengali-Bold.ttf",fontWeight:"bold"}]});const ie={title:"à¦¬à¦¾à¦°à§à¦·à¦¿à¦• à¦¬à¦‚à¦¶ à¦®à¦¿à¦²à¦¨à¦®à§‡à¦²à¦¾ à§¨à§¦à§¨à§¬",date:"à¦¶à§à¦•à§à¦°à¦¬à¦¾à¦°, à§¨à§¦ à¦®à¦¾à¦°à§à¦š, à§¨à§¦à§¨à§¬",time:"à¦¸à¦•à¦¾à¦² à§§à§¦:à§¦à§¦ à¦˜à¦Ÿà¦¿à¦•à¦¾",venue:"à¦šà¦¾à¦‡à¦¡à§‹à¦¬à¦¾ à¦ªà§à¦°à¦¾à¦¥à¦®à¦¿à¦• à¦¬à¦¿à¦¦à§à¦¯à¦¾à¦²à§Ÿ à¦®à¦¾à¦  à¦ªà§à¦°à¦¾à¦™à§à¦—à¦¨, à¦ªà¦¾à¦•à§à§œà¦¿à§Ÿà¦¾ à¦­à¦¾à¦™à§à¦—à¦¾à¦ªà¦¾à§œà¦¾",organizer:"à¦¹à¦°à¦•à¦°à¦¾ à¦«à¦¾à¦‰à¦¨à§à¦¡à§‡à¦¶à¦¨ à¦•à¦®à¦¿à¦Ÿà¦¿",fbPage:"https://www.facebook.com/61577256966799",whatsapp:"+88017XXXXXXXX"},P=ft.create({page:{padding:30,fontFamily:"Noto Sans Bengali",backgroundColor:"#ffffff",color:"#333"},container:{border:"1px solid #999",borderRadius:5,overflow:"hidden"},header:{backgroundColor:"#2c3e50",padding:15,color:"#ffffff",textAlign:"center"},eventName:{fontSize:20,marginBottom:4,fontWeight:"bold"},eventSubInfo:{fontSize:10,color:"#ecf0f1"},body:{padding:15,flexDirection:"row"},leftCol:{width:"35%",alignItems:"center",justifyContent:"center",borderRight:"1px dashed #ccc",paddingRight:10},rightCol:{width:"65%",paddingLeft:15},qrImage:{width:100,height:100,border:"1px solid #ddd",padding:5},qrText:{fontSize:8,marginTop:5,color:"#666"},row:{flexDirection:"row",marginBottom:6,borderBottom:"1px solid #f0f0f0",paddingBottom:2},label:{width:90,fontSize:10,color:"#7f8c8d",fontWeight:"bold"},value:{flex:1,fontSize:11,color:"#2c3e50"},redHighlight:{color:"#c0392b",fontWeight:"bold"},greenHighlight:{color:"#27ae60",fontWeight:"bold"},footerSection:{padding:10,backgroundColor:"#f9f9f9",borderTop:"1px solid #eee"},termsTitle:{fontSize:9,fontWeight:"bold",marginBottom:3,textDecoration:"underline"},termText:{fontSize:8,color:"#555",marginBottom:2},contactRow:{flexDirection:"row",justifyContent:"space-between",marginTop:8,paddingTop:8,borderTop:"1px solid #ddd"},contactText:{fontSize:8,color:"#2980b9"},dividerContainer:{marginVertical:15,alignItems:"center",justifyContent:"center"},dashedLine:{borderBottom:"2px dashed #999",width:"100%",position:"absolute",top:6},scissorText:{backgroundColor:"#fff",paddingHorizontal:10,fontSize:9,color:"#555",zIndex:10},couponHeader:{backgroundColor:"#e67e22",padding:8,textAlign:"center",color:"#fff",fontSize:12,fontWeight:"bold"}}),Xe=({data:s,qrCodeUrl:g})=>e.jsx(jt,{children:e.jsxs(yt,{size:"A4",style:P.page,children:[e.jsxs(V,{style:P.container,children:[e.jsxs(V,{style:P.header,children:[e.jsx(T,{style:P.eventName,children:ie.title}),e.jsxs(T,{style:P.eventSubInfo,children:["à¦¤à¦¾à¦°à¦¿à¦–: ",ie.date," | à¦¸à¦®à§Ÿ: ",ie.time]}),e.jsxs(T,{style:P.eventSubInfo,children:["à¦¸à§à¦¥à¦¾à¦¨: ",ie.venue]})]}),e.jsxs(V,{style:P.body,children:[e.jsxs(V,{style:P.leftCol,children:[g&&e.jsx(vt,{src:g,style:P.qrImage}),e.jsxs(T,{style:P.qrText,children:["à¦†à¦‡à¦¡à¦¿: ",s.id]}),e.jsx(T,{style:[P.qrText,{color:"red",marginTop:2}],children:"à¦¸à§à¦•à§à¦¯à¦¾à¦¨ à¦•à¦°à§à¦¨"})]}),e.jsxs(V,{style:P.rightCol,children:[e.jsxs(V,{style:P.row,children:[e.jsx(T,{style:P.label,children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦†à¦‡à¦¡à¦¿:"}),e.jsx(T,{style:[P.value,P.redHighlight],children:s.id})]}),e.jsxs(V,{style:P.row,children:[e.jsx(T,{style:P.label,children:"à¦¨à¦¾à¦®:"}),e.jsx(T,{style:P.value,children:s.name+" "})]}),e.jsxs(V,{style:P.row,children:[e.jsx(T,{style:P.label,children:"à¦®à§‹à¦¬à¦¾à¦‡à¦²:"}),e.jsx(T,{style:P.value,children:s.mobile})]}),e.jsxs(V,{style:P.row,children:[e.jsx(T,{style:P.label,children:"à¦—à§à¦°à§à¦ª/à¦¦à¦²:"}),e.jsx(T,{style:P.value,children:s.groupName+" "||"à¦¸à¦¾à¦§à¦¾à¦°à¦£"})]}),e.jsxs(V,{style:P.row,children:[e.jsx(T,{style:P.label,children:"à¦®à§‹à¦Ÿ à¦¸à¦¦à¦¸à§à¦¯:"}),e.jsxs(T,{style:P.value,children:[s.totalMembers," à¦œà¦¨"]})]}),e.jsxs(V,{style:[P.row,{borderBottom:0}],children:[e.jsx(T,{style:P.label,children:"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸:"}),e.jsx(T,{style:[P.value,s.paymentStatus==="Paid"?P.greenHighlight:P.redHighlight],children:s.paymentStatus==="Paid"?"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤ (Paid)":"à¦®à§à¦²à¦¤à¦¬à¦¿ (Pending)"})]})]})]}),e.jsxs(V,{style:P.footerSection,children:[e.jsx(T,{style:P.termsTitle,children:"à¦¶à¦°à§à¦¤à¦¾à¦¬à¦²à§€:"}),e.jsx(T,{style:P.termText,children:"à§§. à¦•à¦¾à¦°à§à¦¡à¦Ÿà¦¿ à¦¸à¦¾à¦¥à§‡ à¦°à¦¾à¦–à¦¾ à¦¬à¦¾à¦§à§à¦¯à¦¤à¦¾à¦®à§‚à¦²à¦•à¥¤"}),e.jsx(T,{style:P.termText,children:"à§¨. à¦à¦•à¦Ÿà¦¿ à¦•à¦¾à¦°à§à¦¡ à¦¦à¦¿à§Ÿà§‡ à¦‰à¦²à§à¦²à¦¿à¦–à¦¿à¦¤ à¦¸à¦‚à¦–à§à¦¯à¦• à¦¬à§à¦¯à¦•à§à¦¤à¦¿à¦‡ à¦•à§‡à¦¬à¦² à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¬à§‡à¦¨à¥¤"}),e.jsx(T,{style:P.termText,children:"à§©. à¦–à¦¾à¦¬à¦¾à¦° à¦¸à¦‚à¦—à§à¦°à¦¹à§‡à¦° à¦œà¦¨à§à¦¯ à¦¨à¦¿à¦šà§‡à¦° à¦•à§à¦ªà¦¨à¦Ÿà¦¿ à¦¸à¦‚à¦°à¦•à§à¦·à¦£ à¦•à¦°à§à¦¨à¥¤"}),e.jsx(T,{style:P.termText,children:"à§ª. à¦•à¦°à§à¦¤à§ƒà¦ªà¦•à§à¦·à§‡à¦° à¦¸à¦¿à¦¦à§à¦§à¦¾à¦¨à§à¦¤à¦‡ à¦šà§‚à§œà¦¾à¦¨à§à¦¤à¥¤"}),e.jsxs(V,{style:P.contactRow,children:[e.jsxs(T,{style:P.contactText,children:["à¦†à§Ÿà§‹à¦œà¦•: ",ie.organizer]}),e.jsxs(Nt,{src:`https://${ie.fbPage}`,style:P.contactText,children:["FB: ",ie.fbPage]}),e.jsxs(T,{style:P.contactText,children:["WhatsApp: ",ie.whatsapp]})]})]})]}),e.jsxs(V,{style:P.dividerContainer,children:[e.jsx(V,{style:P.dashedLine}),e.jsx(T,{style:P.scissorText,children:"âœ‚ï¸ à¦à¦–à¦¾à¦¨ à¦¥à§‡à¦•à§‡ à¦•à§‡à¦Ÿà§‡ à¦–à¦¾à¦¬à¦¾à¦° à¦•à¦¾à¦‰à¦¨à§à¦Ÿà¦¾à¦°à§‡ à¦œà¦®à¦¾ à¦¦à¦¿à¦¨ âœ‚ï¸"})]}),e.jsxs(V,{style:[P.container,{marginTop:0}],children:[e.jsx(V,{style:P.couponHeader,children:e.jsx(T,{children:"à¦¦à§à¦ªà§à¦°à§‡à¦° à¦–à¦¾à¦¬à¦¾à¦° à¦•à§à¦ªà¦¨ (Food Coupon)"})}),e.jsx(V,{style:[P.body,{padding:10}],children:e.jsxs(V,{style:{width:"100%"},children:[e.jsxs(V,{style:{flexDirection:"row",justifyContent:"space-between",marginBottom:5},children:[e.jsxs(T,{style:{fontSize:10},children:["à¦†à¦‡à¦¡à¦¿: ",e.jsx(T,{style:P.redHighlight,children:s.id})]}),e.jsxs(T,{style:{fontSize:10},children:["à¦¨à¦¾à¦®: ",s.name+" "]}),e.jsxs(T,{style:{fontSize:10},children:["à¦—à§à¦°à§à¦ª: ",s.groupName+" "]})]}),e.jsx(V,{style:{alignItems:"center",marginTop:5,padding:5,backgroundColor:"#f0f0f0",borderRadius:4},children:e.jsxs(T,{style:{fontSize:14,fontWeight:"bold"},children:["à¦®à§‹à¦Ÿ à¦ªà§à¦¯à¦¾à¦•à§‡à¦Ÿ: ",s.totalMembers," à¦Ÿà¦¿"]})})]})})]})]})}),At=ae.memo(({reg:s})=>{const[g,b]=ae.useState(!1),[N,a]=ae.useState(""),[v,x]=ae.useState(!1);return ae.useEffect(()=>{g&&!N&&(async()=>{x(!0);try{const o=await Ee.toDataURL(s.registrationId||s.id);a(o)}catch(o){console.error("QR Error",o)}finally{x(!1)}})()},[g,N,s]),g?v||g&&!N?e.jsx("button",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-gray-100 text-gray-400",children:"..."}):e.jsx(ze,{document:e.jsx(Xe,{data:{...s,groupName:s.finalGroupName,totalMembers:s.finalTotalMembers},qrCodeUrl:N}),fileName:`card-${s.registrationId||s.id}.pdf`,children:({loading:y})=>y?e.jsx("button",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-gray-100 text-gray-400",children:"..."}):e.jsxs("button",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-green-50 text-green-600 hover:bg-green-100 transition-colors",children:[e.jsx("span",{children:"âœ…"})," à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡"]})}):e.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors",children:[e.jsx("span",{children:"â¬‡"})," PDF"]})}),Pt=ae.memo(({reg:s})=>{const[g,b]=ae.useState(!1),[N,a]=ae.useState(""),[v,x]=ae.useState(!1);return ae.useEffect(()=>{g&&!N&&(async()=>{x(!0);try{const o=await Ee.toDataURL(s.registrationId||s.id);a(o)}catch(o){console.error("QR Error",o)}finally{x(!1)}})()},[g,N,s]),g?e.jsx(ze,{document:e.jsx(Xe,{data:{...s,groupName:s.finalGroupName,totalMembers:s.finalTotalMembers},qrCodeUrl:N}),fileName:`card-${s.registrationId||s.id}.pdf`,children:({loading:y})=>e.jsx("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white text-xs font-bold rounded-lg shadow-sm active:scale-95 transition-transform",children:y||v?"à¦ªà§à¦°à¦¸à§‡à¦¸à¦¿à¦‚...":"âœ… à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦¶à§à¦°à§ à¦•à¦°à§à¦¨"})}):e.jsx("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg shadow-sm active:scale-95 transition-transform",children:"à¦•à¦¾à¦°à§à¦¡ à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨"})});function _t(){const[s,g]=d.useState([]),[b,N]=d.useState(!0),[a,v]=d.useState(""),[x,y]=d.useState([]),[o,M]=d.useState(null),[u,I]=d.useState(null),[p,i]=d.useState(!1),[r,l]=d.useState(!1),[c,C]=d.useState(!1),[m,k]=d.useState(!1),[S,L]=d.useState(!1),[E,f]=d.useState(!1),[A,_]=d.useState({member_name:"",gender:"",age:"",t_shirt_size:"",birthYear:"",birthdate:""}),[w,R]=d.useState({member_name:"",gender:"Male",age:"",t_shirt_size:"L",birthYear:"",birthdate:""}),[G,K]=d.useState({name:"",mobile:"",email:"",contributeAmount:""}),[h,$]=d.useState(""),[Q,t]=d.useState(null),[z,W]=d.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"primary"}),{registrations:B,groups:O,loading:H}=fe();d.useEffect(()=>{if(!H.registrations&&!H.groups){const n={};O.forEach(F=>{n[F.id]=F.name}),y(O);const X=B.map(F=>{const Ne=F.groupName||n[F.group_id]||"N/A",Pe=F.totalMembers||F.total_members||0;return{...F,firebaseDocId:F.firebaseDocId,registrationId:F.id||F.registrationId,finalGroupName:Ne,finalTotalMembers:Pe}});g(X),N(!1)}},[B,O,H]);const se=(n,X)=>{M(n),I(X);const F=n.members[X];_({member_name:F.member_name||"",gender:F.gender||"",age:F.age||"",t_shirt_size:F.t_shirt_size||"",birthYear:F.birthYear||"",birthdate:F.birthdate||""}),i(!0)},je=async()=>{try{const n=[...o.members];n[u]=A;const X={members:n};u===0&&(X.name=A.member_name);const F=U(D,"registrations",o.firebaseDocId);await J(F,X),j.success("à¦¸à¦¦à¦¸à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),i(!1)}catch(n){console.error(n),j.error("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},ue=n=>{M(n),R({member_name:"",gender:"Male",age:"",t_shirt_size:"L",birthYear:"",birthdate:""}),L(!0)},ye=async()=>{try{if(!w.member_name){j.error("à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦® à¦†à¦¬à¦¶à§à¦¯à¦•");return}const n=[...o.members||[],w],X=n.length,F=U(D,"registrations",o.firebaseDocId);await J(F,{members:n,totalMembers:X}),j.success("à¦¨à¦¤à§à¦¨ à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§à¦•à§à¦¤ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),L(!1)}catch(n){console.error(n),j.error("à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§à¦•à§à¦¤ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}},De=n=>{M(n),K({name:n.name||"",mobile:n.mobile||"",email:n.email||"",contributeAmount:n.contributeAmount||""}),f(!0)},Ae=async()=>{try{const n=U(D,"registrations",o.firebaseDocId),X={name:G.name,mobile:G.mobile,email:G.email,contributeAmount:G.contributeAmount};let F=[...o.members||[]];F.length>0&&(F[0]={...F[0],member_name:G.name},X.members=F),await J(n,X),j.success("à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¤à¦¥à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),f(!1)}catch(n){console.error(n),j.error("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},q=(n,X)=>{M(n),I(X),l(!0)},ne=n=>{M(n),C(!0)},le=async n=>{try{const X=U(D,"registrations",o.firebaseDocId);await J(X,{paymentStatus:n}),j.success(n==="Paid"?"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!":n==="Waived"?"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦®à¦“à¦•à§à¦« à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!":"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),C(!1)}catch(X){console.error(X),j.error("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},Ge=n=>{M(n),$(n.group_id||""),k(!0)},ve=async()=>{try{const n=U(D,"registrations",o.firebaseDocId);await J(n,{group_id:h}),j.success("à¦—à§à¦°à§à¦ª à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),k(!1)}catch(n){console.error(n),j.error("à¦—à§à¦°à§à¦ª à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},Fe=n=>{W({isOpen:!0,title:n.checkedIn?"à¦šà§‡à¦•-à¦‡à¦¨ à¦¬à¦¾à¦¤à¦¿à¦²":"à¦šà§‡à¦•-à¦‡à¦¨ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤",message:n.checkedIn?`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${n.name}-à¦à¦° à¦šà§‡à¦•-à¦‡à¦¨ à¦¬à¦¾à¦¤à¦¿à¦² à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¨?`:`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${n.name}-à¦•à§‡ à¦šà§‡à¦•-à¦‡à¦¨ à¦•à¦°à¦¾à¦¤à§‡ à¦šà¦¾à¦¨?`,type:n.checkedIn?"warning":"success",onConfirm:async()=>{try{const X=!n.checkedIn,F=U(D,"registrations",n.firebaseDocId);await J(F,{checkedIn:X,checkInTime:X?new Date:null}),j.success(X?`${n.name} à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦šà§‡à¦•-à¦‡à¦¨ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!`:`${n.name} à¦šà§‡à¦•-à¦‡à¦¨ à¦¬à¦¾à¦¤à¦¿à¦² à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!`)}catch(X){console.error(X),j.error("à¦šà§‡à¦•-à¦‡à¦¨ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}}})},st=async()=>{try{if(u===0){const Ne=U(D,"registrations",o.firebaseDocId);await be(Ne),j.success("à¦®à§‚à¦² à¦¸à¦¦à¦¸à§à¦¯ à¦à¦¬à¦‚ à¦¸à¦•à¦² à¦¤à¦¥à§à¦¯ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),l(!1);return}const n=o.members.filter((Ne,Pe)=>Pe!==u),X=n.length,F=U(D,"registrations",o.firebaseDocId);await J(F,{members:n,totalMembers:X}),j.success("à¦¸à¦¦à¦¸à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),l(!1)}catch(n){console.error(n),j.error("à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},pe=s.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())||n.mobile.includes(a)||n.finalGroupName&&n.finalGroupName.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¤à¦¾à¦²à¦¿à¦•à¦¾"}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-3",children:[e.jsxs("span",{children:["à¦®à§‹à¦Ÿ à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨: ",pe.length]}),e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsxs("span",{children:["à¦®à§‹à¦Ÿ à¦¸à¦¦à¦¸à§à¦¯:"," ",pe.reduce((n,X)=>n+(X.finalTotalMembers||0),0)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs(he,{to:"/admin/bulk-registration",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-bold rounded-lg hover:bg-green-700 transition shadow-sm",children:[e.jsx("span",{children:"ðŸ“"})," à¦¬à¦¾à¦²à§à¦• à¦†à¦ªà¦²à§‹à¦¡"]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("input",{type:"text",placeholder:"à¦¨à¦¾à¦®, à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¬à¦¾ à¦—à§à¦°à§à¦ª à¦–à§à¦à¦œà§à¦¨...",value:a,onChange:n=>v(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:b?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."})]}):pe.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"à¦•à§‹à¦¨à§‹ à¦¤à¦¥à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-50",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦ªà§à¦°à¦¤à¦¿à¦¨à¦¿à¦§à¦¿"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦—à§à¦°à§à¦ª"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¸à¦¦à¦¸à§à¦¯"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦…à¦¤à¦¿à¦°à¦¿à¦•à§à¦¤ à¦¸à¦¦à¦¸à§à¦¯"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦à¦¨à§à¦Ÿà§à¦°à¦¿"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:pe.map(n=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[n.name,e.jsx("button",{onClick:()=>De(n),className:"text-gray-400 hover:text-indigo-600 transition-colors",title:"à¦¤à¦¥à§à¦¯ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsx("div",{className:"text-xs text-gray-400",children:n.mobile})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>Ge(n),className:"group flex items-center gap-1.5 bg-gray-100 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 py-1 px-2 rounded text-xs transition-colors",children:[e.jsx("span",{children:n.finalGroupName}),e.jsx("svg",{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-700",children:n.finalTotalMembers}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-500",children:n.members&&n.members.length>0?e.jsxs("button",{onClick:()=>t(Q===n.id?null:n.id),className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-gray-700 transition-colors",children:[e.jsxs("span",{children:[n.members.length," à¦¸à¦¦à¦¸à§à¦¯"]}),e.jsx("svg",{className:`w-3 h-3 transition-transform ${Q===n.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}):e.jsx("span",{className:"text-gray-300",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>ne(n),className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full cursor-pointer hover:opacity-80 transition-opacity ${n.paymentStatus==="Paid"?"bg-green-100 text-green-700":n.paymentStatus==="Waived"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:n.paymentStatus==="Paid"?"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤":n.paymentStatus==="Waived"?"à¦®à¦“à¦•à§à¦«":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>Fe(n),className:`px-3 py-1 rounded-full text-[10px] font-black uppercase transition-all shadow-sm ${n.checkedIn?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:n.checkedIn?"âœ… Entered":"âŒ No Entry"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx(At,{reg:n})})]},n.id),Q===n.id&&n.members&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("p",{className:"text-xs font-bold text-gray-600 uppercase",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦¤à¦¾à¦²à¦¿à¦•à¦¾"}),e.jsxs("button",{onClick:()=>ue(n),className:"flex items-center gap-1 px-2 py-1 bg-indigo-600 text-white hover:bg-indigo-700 rounded text-[10px] font-bold transition-colors",children:[e.jsx("span",{children:"âž•"})," à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§à¦•à§à¦¤ à¦•à¦°à§à¦¨"]})]}),n.members.map((X,F)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-indigo-300 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:X.member_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[X.gender," â€¢ ",X.age," à¦¬à¦›à¦° â€¢ à¦Ÿà¦¿-à¦¶à¦¾à¦°à§à¦Ÿ: ",X.t_shirt_size,(X.birthYear||X.birthdate)&&e.jsxs(e.Fragment,{children:[" ","â€¢"," ",X.birthYear||X.birthdate]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>se(n,F),className:"px-3 py-1.5 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded text-xs font-medium transition-colors inline-flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾"]}),e.jsxs("button",{onClick:()=>q(n,F),className:"px-3 py-1.5 bg-red-50 text-red-600 hover:bg-red-100 rounded text-xs font-medium transition-colors inline-flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"à¦®à§à¦›à§à¦¨"]})]})]},F))]})})})]}))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:pe.map(n=>e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.mobile})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>ne(n),className:`px-3 py-1 rounded-full text-[10px] font-bold ${n.paymentStatus==="Paid"?"bg-green-100 text-green-700":n.paymentStatus==="Waived"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:n.paymentStatus==="Paid"?"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤":n.paymentStatus==="Waived"?"à¦®à¦“à¦•à§à¦«":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"}),e.jsx("button",{onClick:()=>Fe(n),className:`px-3 py-1 rounded-full text-[10px] font-bold border ${n.checkedIn?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white border-gray-200 text-gray-500"}`,children:n.checkedIn?"âœ… à¦à¦¨à§à¦Ÿà§à¦°à¦¿ à¦¹à§Ÿà§‡à¦›à§‡":"ðŸ”˜ à¦à¦¨à§à¦Ÿà§à¦°à¦¿ à¦¨à§‡à¦‡"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 p-2 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-gray-400 text-[10px] uppercase",children:"à¦—à§à¦°à§à¦ª"}),e.jsx("span",{className:"font-medium",children:n.finalGroupName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-gray-400 text-[10px] uppercase",children:"à¦¸à¦¦à¦¸à§à¦¯"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[n.finalTotalMembers," à¦œà¦¨"]})]})]}),e.jsx("div",{className:"flex justify-end pt-1",children:e.jsx(Pt,{reg:n})})]},n.id))})]})}),p&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦¤à¦¥à§à¦¯ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦¨à¦¾à¦®"}),e.jsx("input",{type:"text",value:A.member_name,onChange:n=>_({...A,member_name:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦²à¦¿à¦™à§à¦—"}),e.jsxs("select",{value:A.gender,onChange:n=>_({...A,gender:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"}),e.jsx("option",{value:"Male",children:"à¦›à§‡à¦²à§‡/à¦ªà§à¦°à§à¦·"}),e.jsx("option",{value:"Female",children:"à¦®à§‡à¦¯à¦¼à§‡/à¦®à¦¹à¦¿à¦²à¦¾"}),e.jsx("option",{value:"Child",children:"à¦¶à¦¿à¦¶à§"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦¬à¦¯à¦¼à¦¸"}),e.jsx("input",{type:"text",value:A.age,onChange:n=>_({...A,age:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦Ÿà¦¿-à¦¶à¦¾à¦°à§à¦Ÿ à¦¸à¦¾à¦‡à¦œ"}),e.jsxs("select",{value:A.t_shirt_size,onChange:n=>_({...A,t_shirt_size:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"}),e.jsx("option",{value:"S",children:"S"}),e.jsx("option",{value:"M",children:"M"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"XL",children:"XL"}),e.jsx("option",{value:"XXL",children:"XXL"}),e.jsx("option",{value:"NA",children:"NA (à¦¶à¦¿à¦¶à§)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{onClick:je,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"à¦¸à¦‚à¦°à¦•à§à¦·à¦£ à¦•à¦°à§à¦¨"})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦®à§à¦›à§‡ à¦«à§‡à¦²à§à¦¨?"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦à¦‡ à¦¸à¦¦à¦¸à§à¦¯à¦•à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨? à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦ªà§‚à¦°à§à¦¬à¦¾à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦«à¦¿à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤"}),o&&u!==null&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.members[u]?.member_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.members[u]?.gender," â€¢"," ",o.members[u]?.age," à¦¬à¦›à¦°"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsxs("button",{onClick:st,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"à¦®à§à¦›à§‡ à¦«à§‡à¦²à§à¦¨"]})]})]})}),c&&o&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:o.name}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:o.mobile}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("span",{className:`px-3 py-1.5 inline-flex text-sm font-semibold rounded-full ${o.paymentStatus==="Paid"?"bg-green-100 text-green-700":o.paymentStatus==="Waived"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:o.paymentStatus==="Paid"?"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤":o.paymentStatus==="Waived"?"à¦®à¦“à¦•à§à¦«":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>le("Paid"),disabled:o.paymentStatus==="Paid",className:`w-full px-4 py-3 rounded-lg font-medium transition-all ${o.paymentStatus==="Paid"?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 active:scale-95"}`,children:"âœ“ à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:()=>le("Pending"),disabled:o.paymentStatus==="Pending",className:`w-full px-4 py-3 rounded-lg font-medium transition-all ${o.paymentStatus==="Pending"?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700 active:scale-95"}`,children:"â³ à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:()=>le("Waived"),disabled:o.paymentStatus==="Waived",className:`w-full px-4 py-3 rounded-lg font-medium transition-all ${o.paymentStatus==="Waived"?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:scale-95"}`,children:"ðŸ’¸ à¦®à¦“à¦•à§à¦« à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:()=>C(!1),className:"w-full px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"à¦¬à¦¾à¦¤à¦¿à¦²"})]})]})}),m&&o&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"à¦—à§à¦°à§à¦ª à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à§à¦¨"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"à¦¨à¦¿à¦šà§‡ à¦¥à§‡à¦•à§‡ à¦¨à¦¤à§à¦¨ à¦—à§à¦°à§à¦ªà¦Ÿà¦¿ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦—à§à¦°à§à¦ª à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"}),e.jsxs("select",{value:h,onChange:n=>$(n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"à¦—à§à¦°à§à¦ª à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"}),x.map(n=>e.jsxs("option",{value:n.id,children:[n.name," - ",n.description]},n.id))]})]})}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4 font-bangla",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"à¦¨à¦¤à§à¦¨ à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§à¦•à§à¦¤ à¦•à¦°à§à¦¨"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["à¦¨à¦¾à¦® ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:w.member_name,onChange:n=>R({...w,member_name:n.target.value}),placeholder:"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦® à¦²à¦¿à¦–à§à¦¨",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦²à¦¿à¦™à§à¦—"}),e.jsxs("select",{value:w.gender,onChange:n=>R({...w,gender:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Male",children:"à¦›à§‡à¦²à§‡/à¦ªà§à¦°à§à¦·"}),e.jsx("option",{value:"Female",children:"à¦®à§‡à¦¯à¦¼à§‡/à¦®à¦¹à¦¿à¦²à¦¾"}),e.jsx("option",{value:"Child",children:"à¦¶à¦¿à¦¶à§"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦¬à¦¯à¦¼à¦¸"}),e.jsx("input",{type:"text",value:w.age,onChange:n=>R({...w,age:n.target.value}),placeholder:"à¦¬à¦¯à¦¼à¦¸ à¦²à¦¿à¦–à§à¦¨",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦Ÿà¦¿-à¦¶à¦¾à¦°à§à¦Ÿ à¦¸à¦¾à¦‡à¦œ"}),e.jsxs("select",{value:w.t_shirt_size,onChange:n=>R({...w,t_shirt_size:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"S",children:"S"}),e.jsx("option",{value:"M",children:"M"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"XL",children:"XL"}),e.jsx("option",{value:"XXL",children:"XXL"}),e.jsx("option",{value:"NA",children:"NA (à¦¶à¦¿à¦¶à§)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{onClick:ye,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"à¦¯à§à¦•à§à¦¤ à¦•à¦°à§à¦¨"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 p-4 font-bangla",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-fade-in text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¤à¦¥à§à¦¯ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦ªà§à¦°à¦¤à¦¿à¦¨à¦¿à¦§à¦¿à¦° à¦¨à¦¾à¦®"}),e.jsx("input",{type:"text",value:G.name,onChange:n=>K({...G,name:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦°"}),e.jsx("input",{type:"text",value:G.mobile,onChange:n=>K({...G,mobile:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦‡à¦®à§‡à¦‡à¦²"}),e.jsx("input",{type:"email",value:G.email,onChange:n=>K({...G,email:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦šà¦¾à¦à¦¦à¦¾à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£"}),e.jsx("input",{type:"number",value:G.contributeAmount,onChange:n=>K({...G,contributeAmount:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{onClick:Ae,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨"})]})]})}),e.jsx(Le,{config:z,onClose:()=>W({...z,isOpen:!1})})]})}function We(){const[s,g]=d.useState(""),[b,N]=d.useState(""),[a,v]=d.useState(!1),{login:x}=de(),y=Me(),o=async M=>{M.preventDefault(),v(!0);try{await x(s,b),j.success("à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®! à¦²à¦—à¦‡à¦¨ à¦¸à¦«à¦² à¦¹à§Ÿà§‡à¦›à§‡à¥¤"),y("/admin/dashboard")}catch(u){console.error(u),u.code==="auth/invalid-credential"?j.error("à¦‡à¦®à§‡à¦‡à¦² à¦¬à¦¾ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦­à§à¦²à¥¤"):j.error("à¦²à¦—à¦‡à¦¨ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡: "+u.message)}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 font-bangla",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 space-y-6",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 text-center border-b pb-4",children:"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦²à¦—à¦‡à¦¨"}),e.jsxs("form",{className:"space-y-6",onSubmit:o,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦‡à¦®à§‡à¦‡à¦²"}),e.jsx("input",{type:"email",value:s,onChange:M=>g(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500",placeholder:"example@mail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡"}),e.jsx("input",{type:"password",value:b,onChange:M=>N(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500",placeholder:"********"})]}),e.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white ${a?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:a?"à¦¯à¦¾à¦šà¦¾à¦‡ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...":"à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"text-sm text-center pt-4 border-t mt-4",children:["à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¨à§‡à¦‡? ",e.jsx(he,{to:"/admin/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"à¦à¦–à¦¾à¦¨à§‡ à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨ à¦•à¦°à§à¦¨"})]})]})})}function Rt(){const[s,g]=d.useState(""),[b,N]=d.useState(""),[a,v]=d.useState(""),[x,y]=d.useState(""),[o,M]=d.useState(""),[u,I]=d.useState(""),[p,i]=d.useState([]),[r,l]=d.useState(!1),{register:c}=de(),C=Me();d.useEffect(()=>{(async()=>{try{const E=(await re(Y(D,"groups"))).docs.map(f=>({id:f.id,...f.data()}));i(E),E.length>0&&y(E[0].id)}catch(L){console.error(L)}})()},[]);const m=S=>{const L=S.target.value;/^\d*$/.test(L)&&L.length<=11&&v(L)},k=async S=>{if(S.preventDefault(),!/^01[3-9]\d{8}$/.test(a))return j.error("à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦¸à¦ à¦¿à¦• à§§à§§ à¦¡à¦¿à¦œà¦¿à¦Ÿà§‡à¦° à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à¦¿ à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦° à¦¦à¦¿à¦¨ (à¦¯à§‡à¦®à¦¨: 017xxxxxxxx)à¥¤");if(o!==u)return j.error("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦®à¦¿à¦²à¦›à§‡ à¦¨à¦¾!");if(o.length<6)return j.error("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦•à¦®à¦ªà¦•à§à¦·à§‡ à§¬ à¦…à¦•à§à¦·à¦°à§‡à¦° à¦¹à¦¤à§‡ à¦¹à¦¬à§‡à¥¤");if(!x)return j.error("à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦à¦•à¦Ÿà¦¿ à¦—à§à¦°à§à¦ª à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨à¥¤");l(!0);try{await c(s,b,o,a,x),j.success("à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦«à¦²!",{duration:6e3,icon:"âœ…"}),C("/admin/dashboard")}catch(E){console.error(E),E.code==="auth/email-already-in-use"?j.error("à¦à¦‡ à¦‡à¦®à§‡à¦‡à¦² à¦‡à¦¤à¦¿à¦®à¦§à§à¦¯à§‡ à¦¬à§à¦¯à¦¬à¦¹à§ƒà¦¤ à¦¹à§Ÿà§‡à¦›à§‡à¥¤"):j.error("à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¬à§à¦¯à¦°à§à¦¥: "+E.message)}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 font-bangla",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center border-b pb-4",children:"à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€ à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨"}),e.jsx("p",{className:"text-xs text-center text-gray-500 bg-blue-50 p-2 rounded border border-blue-200",children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦•à¦°à¦¾à¦° à¦ªà¦° à¦†à¦ªà¦¨à¦¿ à¦¸à¦°à¦¾à¦¸à¦°à¦¿ à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡à§‡ à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¬à§‡à¦¨à¥¤"}),e.jsxs("form",{className:"space-y-4",onSubmit:k,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦¨à¦¾à¦®"}),e.jsx("input",{type:"text",value:s,onChange:S=>g(S.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦‡à¦®à§‡à¦‡à¦²"}),e.jsx("input",{type:"email",value:b,onChange:S=>N(S.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦°"}),e.jsx("input",{type:"text",value:a,onChange:m,required:!0,placeholder:"017XXXXXXXX",className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"à¦…à¦¬à¦¶à§à¦¯à¦‡ à§§à§§ à¦¡à¦¿à¦œà¦¿à¦Ÿ à¦¹à¦¤à§‡ à¦¹à¦¬à§‡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦—à§à¦°à§à¦ª / à¦¦à¦²"}),e.jsxs("select",{value:x,onChange:S=>y(S.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 bg-white",children:[p.length===0&&e.jsx("option",{children:"à¦—à§à¦°à§à¦ª à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."}),p.map(S=>e.jsxs("option",{value:S.id,children:[S.description,"-",S.name]},S.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡"}),e.jsx("input",{type:"password",value:o,onChange:S=>M(S.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"}),e.jsx("input",{type:"password",value:u,onChange:S=>I(S.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg"})]})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow font-bold transition",children:r?"à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦¤à§ˆà¦°à¦¿ à¦¹à¦šà§à¦›à§‡...":"à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨ à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"text-sm text-center pt-4 border-t",children:["à¦…à§à¦¯à¦¾à¦•à¦¾à¦‰à¦¨à§à¦Ÿ à¦†à¦›à§‡? ",e.jsx(he,{to:"/admin/login",className:"text-indigo-600 font-bold",children:"à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨"})]})]})})}function zt({show:s,onClose:g,title:b,children:N}){return s?e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm transition-opacity",onClick:g}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"w-full max-w-lg bg-white rounded-xl shadow-2xl font-bangla transform transition-all pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:b}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-1 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:N})]})})]}):null}function Et(){const[s,g]=d.useState([]),[b,N]=d.useState([]),[a,v]=d.useState(!0),[x,y]=d.useState(!1),[o,M]=d.useState(!1),[u,I]=d.useState(null),[p,i]=d.useState({name:"",description:"",teamLeaders:[]}),[r,l]=d.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"primary"}),[c,C]=d.useState(""),m=d.useCallback(async()=>{try{v(!0);const[w,R]=await Promise.all([re(Y(D,"groups")),re(Y(D,"users"))]);g(w.docs.map(G=>({...G.data(),id:G.id}))),N(R.docs.map(G=>({id:G.id,...G.data()})))}catch(w){j.error("à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤"),console.error(w)}finally{v(!1)}},[]);d.useEffect(()=>{m()},[m]);const k=()=>{M(!1),i({name:"",description:"",teamLeaders:[]}),C(""),y(!0)},S=w=>{M(!0),I(w),i({name:w.name,description:w.description||"",teamLeaders:w.teamLeaders||[]}),C(""),y(!0)},L=()=>{y(!1),I(null)},E=(w,R)=>{i(G=>{const K=G.teamLeaders.find($=>$.id===w);let h;return K?h=G.teamLeaders.filter($=>$.id!==w):h=[...G.teamLeaders,{id:w,name:R}],{...G,teamLeaders:h}})},f=async()=>{if(!p.name.trim()){j.error("à¦—à§à¦°à§à¦ªà§‡à¦° à¦¨à¦¾à¦® à¦²à¦¿à¦–à§à¦¨!");return}try{o&&u?(await J(U(D,"groups",u.id),{name:p.name,description:p.description,teamLeaders:p.teamLeaders}),j.success("à¦—à§à¦°à§à¦ª à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!")):(await Se(Y(D,"groups"),p),j.success("à¦¨à¦¤à§à¦¨ à¦—à§à¦°à§à¦ª à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")),L(),m()}catch(w){j.error("à¦…à¦ªà¦¾à¦°à§‡à¦¶à¦¨ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤"),console.error(w)}},A=w=>{l({isOpen:!0,title:"à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:"à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦à¦‡ à¦—à§à¦°à§à¦ªà¦Ÿà¦¿ à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¤à§‡ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤? à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦†à¦° à¦«à§‡à¦°à¦¤ à¦¨à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤",type:"danger",onConfirm:async()=>{try{const R=U(D,"groups",w);await be(R),j.success("à¦—à§à¦°à§à¦ª à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤"),m()}catch{j.error("à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}}})},_=b.filter(w=>w.name?.toLowerCase().includes(c.toLowerCase())||w.mobile?.includes(c));return e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"à¦—à§à¦°à§à¦ª à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["à¦®à§‹à¦Ÿ à¦—à§à¦°à§à¦ª: ",s.length]})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-lg shadow-md transition-all active:scale-95",children:[e.jsx("span",{children:"+"})," ",e.jsx("span",{className:"hidden sm:inline",children:"à¦¨à¦¤à§à¦¨ à¦—à§à¦°à§à¦ª"})]})]}),a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-100",children:e.jsx("p",{className:"text-gray-500",children:"à¦•à§‹à¦¨à§‹ à¦—à§à¦°à§à¦ª à¦¨à§‡à¦‡à¥¤"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(w=>e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group relative flex flex-col h-full",children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[e.jsx("button",{onClick:()=>S(w),className:"p-1.5 text-indigo-600 hover:bg-indigo-50 rounded-md bg-white shadow-sm",title:"à¦à¦¡à¦¿à¦Ÿ",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>A(w.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md bg-white shadow-sm",title:"à¦¡à¦¿à¦²à¦¿à¦Ÿ",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold text-lg shrink-0",children:w.name.charAt(0)}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 break-words",children:w.name})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:w.description||"à¦•à§‹à¦¨à§‹ à¦¬à¦°à§à¦£à¦¨à¦¾ à¦¨à§‡à¦‡"}),w.teamLeaders&&w.teamLeaders.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-1",children:"à¦Ÿà¦¿à¦® à¦²à¦¿à¦¡à¦¾à¦°"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w.teamLeaders.map(R=>e.jsx("span",{className:"text-xs bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded-full font-medium border border-indigo-100",children:R.name},R.id))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-3 border-t border-gray-50 sm:hidden",children:[e.jsx("button",{onClick:()=>S(w),className:"text-xs font-bold text-indigo-600",children:"à¦à¦¡à¦¿à¦Ÿ"}),e.jsx("button",{onClick:()=>A(w.id),className:"text-xs font-bold text-red-600",children:"à¦¡à¦¿à¦²à¦¿à¦Ÿ"})]})]},w.id))}),e.jsx(zt,{show:x,onClose:L,title:o?"à¦—à§à¦°à§à¦ª à¦à¦¡à¦¿à¦Ÿ à¦•à¦°à§à¦¨":"à¦¨à¦¤à§à¦¨ à¦—à§à¦°à§à¦ª à¦¯à§‹à¦— à¦•à¦°à§à¦¨",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦—à§à¦°à§à¦ªà§‡à¦° à¦¨à¦¾à¦®*"}),e.jsx("input",{type:"text",value:p.name,onChange:w=>i({...p,name:w.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"à¦‰à¦¦à¦¾à¦¹à¦°à¦£: à¦šà§Œà¦§à§à¦°à§€ à¦¬à¦‚à¦¶"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦¸à¦‚à¦•à§à¦·à¦¿à¦ªà§à¦¤ à¦¬à¦°à§à¦£à¦¨à¦¾"}),e.jsx("textarea",{value:p.description,onChange:w=>i({...p,description:w.target.value}),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"à¦—à§à¦°à§à¦ª à¦¸à¦®à§à¦ªà¦°à§à¦•à§‡ à¦•à¦¿à¦›à§ à¦²à¦¿à¦–à§à¦¨..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"à¦Ÿà¦¿à¦® à¦²à¦¿à¦¡à¦¾à¦° à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨ (à¦à¦•à¦¾à¦§à¦¿à¦• à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡)"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-200",children:e.jsx("input",{type:"text",placeholder:"à¦¨à¦¾à¦® à¦¬à¦¾ à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨...",value:c,onChange:w=>C(w.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:border-indigo-500"})}),e.jsx("div",{className:"max-h-40 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:_.length>0?_.map(w=>{const R=p.teamLeaders.some(G=>G.id===w.id);return e.jsxs("div",{onClick:()=>E(w.id,w.name),className:`flex items-center justify-between p-2 rounded cursor-pointer transition-colors text-sm ${R?"bg-indigo-50 border border-indigo-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${R?"bg-indigo-600 border-indigo-600":"border-gray-400"}`,children:R&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:w.name}),e.jsx("p",{className:"text-[10px] text-gray-500",children:w.mobile})]})]}),R&&e.jsx("span",{className:"text-indigo-600 text-xs font-bold",children:"à¦¸à¦¿à¦²à§‡à¦•à§à¦Ÿà§‡à¦¡"})]},w.id)}):e.jsx("p",{className:"text-center text-gray-400 text-xs py-2",children:"à¦•à§‹à¦¨à§‹ à¦‡à¦‰à¦œà¦¾à¦° à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})})]}),p.teamLeaders.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:p.teamLeaders.map(w=>e.jsxs("span",{className:"inline-flex items-center gap-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-xs font-medium",children:[w.name,e.jsx("button",{type:"button",onClick:()=>E(w.id,w.name),className:"hover:text-indigo-900",children:"Ã—"})]},w.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold shadow-md transition-colors",children:o?"à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨":"à¦¸à§‡à¦­ à¦•à¦°à§à¦¨"})]})]})}),e.jsx(Le,{config:r,onClose:()=>l({...r,isOpen:!1})})]})}function $t(){const{user:s}=de(),[g,b]=d.useState(s.displayName||""),N=s.email||"",[a,v]=d.useState(""),[x,y]=d.useState(""),[o,M]=d.useState(!1),[u,I]=d.useState(!1),p=async r=>{r.preventDefault(),M(!0);try{await Ve(xe.currentUser,{displayName:g}),j.success("à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦²à§‡à¦° à¦¨à¦¾à¦® à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}catch(l){j.error("à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤"),console.error(l)}finally{M(!1)}},i=async r=>{if(r.preventDefault(),a!==x)return j.error("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¦à§à¦Ÿà¦¿ à¦®à¦¿à¦²à¦›à§‡ à¦¨à¦¾!");if(a.length<6)return j.error("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦•à¦®à¦ªà¦•à§à¦·à§‡ à§¬ à¦…à¦•à§à¦·à¦°à§‡à¦° à¦¹à¦¤à§‡ à¦¹à¦¬à§‡à¥¤");I(!0);try{await dt(xe.currentUser,a),j.success("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!"),v(""),y("")}catch(l){l.code==="auth/requires-recent-login"?j.error("à¦à¦Ÿà¦¿ à¦à¦•à¦Ÿà¦¿ à¦¸à¦‚à¦¬à§‡à¦¦à¦¨à¦¶à§€à¦² à¦•à¦¾à¦œà¥¤ à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦²à¦—à¦†à¦‰à¦Ÿ à¦•à¦°à§‡ à¦†à¦¬à¦¾à¦° à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨à¥¤"):j.error("à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤"),console.error(l)}finally{I(!1)}};return e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸"}),e.jsx("p",{className:"text-sm text-gray-500",children:"à¦†à¦ªà¦¨à¦¾à¦° à¦¬à§à¦¯à¦•à§à¦¤à¦¿à¦—à¦¤ à¦¤à¦¥à§à¦¯ à¦à¦¬à¦‚ à¦¨à¦¿à¦°à¦¾à¦ªà¦¤à§à¦¤à¦¾ à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-indigo-100 mx-auto mb-4 flex items-center justify-center text-3xl font-bold text-indigo-600 border-4 border-white shadow-lg",children:s.displayName?.charAt(0)||"U"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s.displayName||"à¦…à¦œà¦¾à¦¨à¦¾ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:s.email}),e.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-xs font-semibold",children:"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨"})]})}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-50",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦¤à¦¥à§à¦¯"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦ªà§à¦°à§‹ à¦¨à¦¾à¦®"}),e.jsx("input",{type:"text",value:g,onChange:r=>b(r.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦‡à¦®à§‡à¦‡à¦² à¦ à¦¿à¦•à¦¾à¦¨à¦¾"}),e.jsx("input",{type:"email",value:N,disabled:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"à¦‡à¦®à§‡à¦‡à¦² à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à¦¾ à¦¸à¦®à§à¦­à¦¬ à¦¨à§Ÿà¥¤"})]}),e.jsx("div",{className:"pt-2 text-right",children:e.jsx("button",{type:"submit",disabled:o,className:`px-6 py-2 rounded-lg text-white font-medium shadow-sm transition-all ${o?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:scale-95"}`,children:o?"à¦¸à§‡à¦­ à¦¹à¦šà§à¦›à§‡...":"à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦¸à§‡à¦­ à¦•à¦°à§à¦¨"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-50",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦¨à¦¤à§à¦¨ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡"}),e.jsx("input",{type:"password",value:a,onChange:r=>v(r.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"à¦•à¦®à¦ªà¦•à§à¦·à§‡ à§¬ à¦…à¦•à§à¦·à¦°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"}),e.jsx("input",{type:"password",value:x,onChange:r=>y(r.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"à¦à¦•à¦‡ à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦†à¦¬à¦¾à¦° à¦²à¦¿à¦–à§à¦¨"})]}),e.jsx("div",{className:"pt-2 text-right",children:e.jsx("button",{type:"submit",disabled:u,className:`px-6 py-2 rounded-lg text-white font-medium shadow-sm transition-all ${u?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:scale-95"}`,children:u?"à¦¸à§‡à¦­ à¦¹à¦šà§à¦›à§‡...":"à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨"})})]})})]})]})]})]})}function Xt(){const[s,g]=d.useState([]),[b,N]=d.useState(0),[a,v]=d.useState(!1),[x,y]=d.useState(null),[o,M]=d.useState(!1),u=d.useRef(null),I="qr-reader";d.useEffect(()=>{const r=me(Y(D,"registrations"),Be("checkedIn","==",!0),ge("checkInTime","desc")),l=oe(r,c=>{const C=c.docs.map(k=>({id:k.id,...k.data()}));let m=0;C.forEach(k=>m+=parseInt(k.totalMembers||0)),g(C),N(m)},c=>{console.error("Firestore query error:",c),j.error("à¦¤à¦¾à¦²à¦¿à¦•à¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")});return()=>l()},[]),d.useEffect(()=>{if(!u.current){const r=new wt(I,{qrbox:{width:250,height:250},fps:10,rememberLastUsedCamera:!0},!1),l=c=>{a||(u.current&&u.current.pause(!0),M(!0),v(!0),y(c),p(c))};r.render(l,()=>{}),u.current=r}return()=>{u.current&&(u.current.clear().catch(r=>console.error("Scanner clear failed.",r)),u.current=null)}},[]);const p=async r=>{try{const l=me(Y(D,"registrations"),Be("id","==",r)),c=await re(l);if(c.empty)j.error("âŒ à¦­à§à¦² QR à¦•à§‹à¦¡! à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤");else{const C=c.docs[0],m=C.data(),k=U(D,"registrations",C.id);m.checkedIn?j.error(`âš ï¸ ${m.name} à¦‡à¦¤à¦¿à¦®à¦§à§à¦¯à§‡ à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à§‡à¦›à§‡à¦¨!`):(await J(k,{checkedIn:!0,checkInTime:new Date}),j.success(`âœ… à¦¸à§à¦¬à¦¾à¦—à¦¤à¦® ${m.name}! (${m.totalMembers} à¦œà¦¨)`))}}catch{j.error("à¦¸à§à¦•à§à¦¯à¦¾à¦¨à¦¿à¦‚ à¦ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}finally{v(!1),setTimeout(()=>{u.current&&(u.current.getState()==="PAUSED"&&u.current.resume(),M(!1))},2e3)}},i=()=>{u.current&&u.current.getState()==="PAUSED"&&u.current.resume(),M(!1),y(null)};return e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"à¦à¦¨à§à¦Ÿà§à¦°à¦¿ à¦¸à§à¦•à§à¦¯à¦¾à¦¨à¦¾à¦°"}),e.jsx("p",{className:"text-sm text-gray-500",children:"à¦…à¦¤à¦¿à¦¥à¦¿à¦¦à§‡à¦° QR à¦•à§‹à¦¡ à¦¸à§à¦•à§à¦¯à¦¾à¦¨ à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-gray-100 overflow-hidden relative",children:[e.jsx("div",{id:I,className:`w-full rounded-xl overflow-hidden ${o?"hidden":"block"}`}),o&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/95 flex flex-col items-center justify-center text-white p-6 z-10",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"à¦¯à¦¾à¦šà¦¾à¦‡ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡..."}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["ID: ",x]})]}):e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto shadow-lg shadow-green-500/30",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"à¦¸à§à¦•à§à¦¯à¦¾à¦¨ à¦¸à¦®à§à¦ªà¦¨à§à¦¨!"}),e.jsx("p",{className:"text-gray-400 mt-1 text-sm break-all",children:x})]}),e.jsx("button",{onClick:i,className:"px-8 py-3 bg-white text-gray-900 font-bold rounded-xl hover:bg-gray-100 transition-colors shadow-lg active:scale-95",children:"à¦†à¦¬à¦¾à¦° à¦¸à§à¦•à§à¦¯à¦¾à¦¨ à¦•à¦°à§à¦¨"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-500/20 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm font-medium uppercase tracking-wider",children:"à¦®à§‹à¦Ÿ à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à§‡à¦›à§‡"}),e.jsxs("h3",{className:"text-4xl font-bold mt-1",children:[b," ",e.jsx("span",{className:"text-lg font-normal opacity-80",children:"à¦œà¦¨"})]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50",children:e.jsx("h3",{className:"font-bold text-gray-800",children:"à¦¸à¦¾à¦®à§à¦ªà§à¦°à¦¤à¦¿à¦• à¦à¦¨à§à¦Ÿà§à¦°à¦¿"})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:s.length>0?e.jsx("div",{className:"divide-y divide-gray-50",children:s.map(r=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center font-bold text-sm",children:r.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:[r.id.slice(0,8),"..."]})]})]}),e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-xs px-2.5 py-1 rounded-full font-bold",children:["+",r.totalMembers," à¦œà¦¨"]})]},r.id))}):e.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:"à¦à¦–à¦¨à¦“ à¦•à§‡à¦‰ à¦ªà§à¦°à¦¬à§‡à¦¶ à¦•à¦°à§‡à¦¨à¦¿à¥¤"})})]})]})}function Gt(){const{users:s,loading:g}=fe(),b=g.users,[N,a]=d.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"primary"}),v=async o=>{try{const M=U(D,"users",o);await J(M,{status:"approved"}),j.success("à¦‡à¦‰à¦œà¦¾à¦° à¦…à¦¨à§à¦®à§‹à¦¦à¦¿à¦¤ à¦¹à§Ÿà§‡à¦›à§‡! âœ…")}catch{j.error("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}},x=o=>{a({isOpen:!0,title:"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:"à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦à¦‡ à¦‡à¦‰à¦œà¦¾à¦°à¦•à§‡ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦¬à¦¾à¦¨à¦¾à¦¤à§‡ à¦šà¦¾à¦¨?",type:"primary",onConfirm:async()=>{try{const M=U(D,"users",o);await J(M,{role:"admin",status:"approved"}),j.success("à¦¨à¦¤à§à¦¨ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦¤à§ˆà¦°à¦¿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡! ðŸ‘‘")}catch{j.error("à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤")}}})},y=o=>{a({isOpen:!0,title:"à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:"à¦¸à¦¤à¦°à§à¦•à¦¤à¦¾: à¦à¦‡ à¦‡à¦‰à¦œà¦¾à¦° à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¹à§Ÿà§‡ à¦¯à¦¾à¦¬à§‡! à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦†à¦° à¦«à§‡à¦°à¦¤ à¦¨à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤",type:"danger",onConfirm:async()=>{try{await be(U(D,"users",o)),j.success("à¦‡à¦‰à¦œà¦¾à¦° à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}catch{j.error("à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿.")}}})};return e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€ à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["à¦®à§‹à¦Ÿ à¦‡à¦‰à¦œà¦¾à¦°: ",s.length]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:b?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"à¦•à§‹à¦¨à§‹ à¦‡à¦‰à¦œà¦¾à¦° à¦¨à§‡à¦‡à¥¤"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-50",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¨à¦¾à¦® à¦“ à¦‡à¦®à§‡à¦‡à¦²"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦²"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦°à§‹à¦²"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:s.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xs mr-3",children:o.name?.charAt(0)||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name}),e.jsx("div",{className:"text-xs text-gray-500",children:o.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.mobile}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${o.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:o.role==="admin"?"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨":"à¦‡à¦‰à¦œà¦¾à¦°"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${o.status==="approved"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:o.status==="approved"?"à¦¸à¦•à§à¦°à¦¿à§Ÿ":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[o.status!=="approved"&&e.jsx("button",{onClick:()=>v(o.id),className:"text-green-600 hover:text-green-900 bg-green-50 hover:bg-green-100 px-2 py-1 rounded transition-colors",children:"Approve"}),o.role!=="admin"&&e.jsx("button",{onClick:()=>x(o.id),className:"text-indigo-600 hover:text-indigo-900 bg-indigo-50 hover:bg-indigo-100 px-2 py-1 rounded transition-colors",children:"Make Admin"}),e.jsx("button",{onClick:()=>y(o.id),className:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 px-2 py-1 rounded transition-colors",children:"Delete"})]})]},o.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:s.map(o=>e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-sm",children:o.name?.charAt(0)||"U"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900",children:o.name}),e.jsx("p",{className:"text-xs text-gray-500",children:o.email})]})]}),e.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${o.status==="approved"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:o.status==="approved"?"à¦¸à¦•à§à¦°à¦¿à§Ÿ":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 p-2 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-gray-400 text-[10px] uppercase",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦²"}),e.jsx("span",{className:"font-medium",children:o.mobile})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-gray-400 text-[10px] uppercase",children:"à¦°à§‹à¦²"}),e.jsx("span",{className:`font-bold ${o.role==="admin"?"text-purple-600":"text-gray-600"}`,children:o.role==="admin"?"à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨":"à¦‡à¦‰à¦œà¦¾à¦°"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[o.status!=="approved"&&e.jsx("button",{onClick:()=>v(o.id),className:"flex-1 px-3 py-1.5 bg-green-50 text-green-700 text-xs font-bold rounded-lg border border-green-100",children:"Approve"}),o.role!=="admin"&&e.jsx("button",{onClick:()=>x(o.id),className:"flex-1 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-bold rounded-lg border border-indigo-100",children:"Make Admin"}),e.jsx("button",{onClick:()=>y(o.id),className:"px-3 py-1.5 bg-red-50 text-red-700 text-xs font-bold rounded-lg border border-red-100",children:"Delete"})]})]},o.id))})]})}),e.jsx(Le,{config:N,onClose:()=>a({...N,isOpen:!1})})]})}function Ft(){const s=Me();return e.jsx("div",{className:"h-screen flex flex-col items-center justify-center bg-gray-100 font-bangla",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸš«"}),e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"à¦ªà§à¦°à¦¬à§‡à¦¶à¦¾à¦§à¦¿à¦•à¦¾à¦° à¦¨à§‡à¦‡!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"à¦†à¦ªà¦¨à¦¾à¦° à¦à¦‡ à¦ªà§‡à¦œà¦Ÿà¦¿ à¦¦à§‡à¦–à¦¾à¦° à¦…à¦¨à§à¦®à¦¤à¦¿ à¦¨à§‡à¦‡à¥¤ à¦à¦Ÿà¦¿ à¦¶à§à¦§à§à¦®à¦¾à¦¤à§à¦° à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨à¦¦à§‡à¦° à¦œà¦¨à§à¦¯ à¦¸à¦‚à¦°à¦•à§à¦·à¦¿à¦¤à¥¤"}),e.jsx("button",{onClick:()=>s(-1),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨"})]})})}function Bt(){const{user:s}=de(),{donations:g,members:b,loading:N}=fe(),[a,v]=d.useState(""),[x,y]=d.useState("manual"),[o,M]=d.useState(!1),[u,I]=d.useState(null),p=async i=>{if(i.preventDefault(),!a||a<=0)return j.error("à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦¸à¦ à¦¿à¦• à¦ªà¦°à¦¿à¦®à¦¾à¦£ à¦¦à¦¿à¦¨à¥¤");if(!u)return j.error("à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦à¦•à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨à¥¤");M(!0);try{const r=new Date,c=`${["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]} ${r.getFullYear()}`;await Se(Y(D,"donations"),{memberId:u.value,userName:u.label.split(" (")[0],memberDisplayId:u.displayId,groupId:u.groupId||"N/A",amount:Number(a),date:Ze.fromDate(r),month:c,paymentMethod:x,status:"pending",recordedBy:s.uid,createdAt:r.toISOString()}),j.success("à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦°à¦¿à¦•à§‹à§Ÿà§‡à¦¸à§à¦Ÿ à¦œà¦®à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!"),v(""),I(null)}catch(r){console.error(r),j.error("à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}finally{M(!1)}};return e.jsxs("div",{className:"font-bangla max-w-7xl mx-auto space-y-8 animate-fade-in",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[e.jsx("span",{className:"w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center text-white text-xl shadow-lg shadow-indigo-200",children:"à§³"}),"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦ªà§à¦¯à¦¾à¦¨à§‡à¦²"]}),e.jsx("p",{className:"mt-2 text-slate-500 font-medium",children:"à¦¸à¦¦à¦¸à§à¦¯à¦¦à§‡à¦° à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¸à¦‚à¦—à§à¦°à¦¹ à¦à¦¬à¦‚ à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸ à¦®à§à¦¯à¦¾à¦¨à§‡à¦œ à¦•à¦°à§à¦¨à¥¤"})]})}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-bl-full -mr-10 -mt-10 opacity-50 group-hover:scale-110 transition-transform duration-500"}),e.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-6 bg-indigo-600 rounded-full"}),"à¦¨à¦¤à§à¦¨ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¯à§‹à¦— à¦•à¦°à§à¦¨"]}),e.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-end relative z-10",children:[e.jsxs("div",{className:"md:col-span-5",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ml-1",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨"}),e.jsx(ce,{options:b.map(i=>({value:i.uniqueId||i.id,label:`${i.name} (${i.displayId||i.uniqueId||i.id})`,displayId:i.displayId||i.uniqueId||i.id,groupId:i.groupid||i.groupId})),value:u,onChange:I,placeholder:"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦® à¦¬à¦¾ à¦†à¦‡à¦¡à¦¿ à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨...",isSearchable:!0,noOptionsMessage:()=>"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿",styles:{control:(i,r)=>({...i,height:"48px",fontSize:"15px",borderRadius:"16px",borderColor:r.isFocused?"#4f46e5":"#e2e8f0",boxShadow:r.isFocused?"0 0 0 1px #4f46e5":"none","&:hover":{borderColor:"#4f46e5"}}),placeholder:i=>({...i,color:"#94a3b8"}),option:(i,r)=>({...i,backgroundColor:r.isSelected?"#4f46e5":r.isFocused?"#f8fafc":"transparent"})}})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ml-1",children:"à¦Ÿà¦¾à¦•à¦¾à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£"}),e.jsxs("div",{className:"relative group/input",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold group-focus-within/input:text-indigo-600 transition-colors",children:"à§³"}),e.jsx("input",{type:"number",value:a,onChange:i=>v(i.target.value),className:"w-full pl-10 pr-4 h-[48px] text-lg font-bold border border-slate-200 rounded-2xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder:font-normal placeholder:text-slate-300",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2 ml-1",children:"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦®à¦¾à¦§à§à¦¯à¦®"}),e.jsxs("select",{value:x,onChange:i=>y(i.target.value),className:"w-full px-4 h-[48px] bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"manual",children:"à¦¨à¦—à¦¦ / à¦•à§à¦¯à¦¾à¦¶"}),e.jsx("option",{value:"bkash",children:"à¦¬à¦¿à¦•à¦¾à¦¶"}),e.jsx("option",{value:"nagad",children:"à¦¨à¦—à¦¦"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{type:"submit",disabled:o,className:"w-full h-[48px] bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-2xl shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2 group/btn active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:o?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"à¦¡à§‹à¦¨à§‡à¦Ÿ"}),e.jsx("svg",{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-50 rounded-2xl flex items-center justify-center text-emerald-600 text-xl font-bold",children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-800",children:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¹à¦¿à¦¸à§à¦Ÿà§à¦°à¦¿"}),e.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:["à¦¸à¦°à§à¦¬à¦¶à§‡à¦· ",g.length," à¦Ÿà¦¿ à¦¤à¦¥à§à¦¯"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 rounded-2xl border border-slate-200",children:e.jsxs("span",{className:"px-4 py-1.5 bg-white rounded-xl shadow-sm text-sm font-black text-indigo-600 border border-slate-100 italic",children:["TOTAL: ",g.length]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-50",children:[e.jsx("thead",{className:"bg-slate-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-4 text-left text-xs font-black text-slate-400 uppercase tracking-widest",children:"à¦¤à¦¾à¦°à¦¿à¦–"}),e.jsx("th",{className:"px-8 py-4 text-left text-xs font-black text-slate-400 uppercase tracking-widest",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦“ à¦†à¦‡à¦¡à¦¿"}),e.jsx("th",{className:"px-8 py-4 text-left text-xs font-black text-slate-400 uppercase tracking-widest",children:"à¦®à¦¾à¦¸"}),e.jsx("th",{className:"px-8 py-4 text-right text-xs font-black text-slate-400 uppercase tracking-widest",children:"à¦ªà¦°à¦¿à¦®à¦¾à¦£"}),e.jsx("th",{className:"px-8 py-4 text-center text-xs font-black text-slate-400 uppercase tracking-widest",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-50",children:N.donations?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-bold text-slate-400",children:"à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."})]})})}):g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-3xl flex items-center justify-center text-3xl",children:"ðŸœï¸"}),e.jsx("p",{className:"text-slate-400 font-black",children:"à¦•à§‹à¦¨à§‹ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦°à§‡à¦•à¦°à§à¦¡ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]})})}):g.map((i,r)=>e.jsxs("tr",{className:"group hover:bg-slate-50/80 transition-all duration-300",children:[e.jsx("td",{className:"px-8 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:i.date?.toDate?i.date.toDate().toLocaleDateString("bn-BD"):new Date(i.createdAt).toLocaleDateString("bn-BD")}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:i.date?.toDate?i.date.toDate().toLocaleTimeString("bn-BD",{hour:"2-digit",minute:"2-digit"}):""})]})}),e.jsx("td",{className:"px-8 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300",children:i.userName?.charAt(0)||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black text-slate-800",children:i.userName}),e.jsxs("div",{className:"text-[10px] text-slate-400 flex items-center gap-1 font-bold",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-slate-500",children:i.memberDisplayId||i.uniqueId}),e.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-50 text-indigo-500 rounded lowercase",children:["@",i.groupId]})]})]})]})}),e.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-sm font-bold text-slate-500 hover:text-indigo-600 transition-colors",children:i.month}),e.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-right",children:e.jsxs("span",{className:"text-lg font-black text-indigo-600 tabular-nums",children:["à§³",i.amount.toLocaleString()]})}),e.jsx("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:`px-4 py-1.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border-2 transition-all duration-300
                          ${i.status==="approved"?"bg-emerald-50 text-emerald-700 border-emerald-100 group-hover:bg-emerald-600 group-hover:text-white group-hover:border-emerald-600":"bg-amber-50 text-amber-700 border-amber-100 group-hover:bg-amber-500 group-hover:text-white group-hover:border-amber-500"}`,children:i.status==="approved"?"Success":"Pending"})})})]},i.id))})]})})]})]})}function qt(){const[s,g]=d.useState(null),[b,N]=d.useState(!1),[a,v]=d.useState([]),x=u=>{const I=u.target.files[0];I&&(g(I),y(I))},y=u=>{const I=new FileReader;I.onload=p=>{const i=new Uint8Array(p.target.result),r=$e(i,{type:"array"}),l=r.SheetNames[0],c=r.Sheets[l],C=ee.sheet_to_json(c);v(C)},I.readAsArrayBuffer(u)},o=()=>{const u=[{"Member ID":"M-XXXXXX",Mobile:"017XXXXXXXX",Amount:500,Month:"January 2026"}],I=ee.json_to_sheet(u),p=ee.book_new();ee.book_append_sheet(p,I,"Donations"),Ie(p,"bulk_donation_sample.xlsx"),j.success("à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...")},M=async()=>{if(a.length===0)return j.error("à¦•à§‹à¦¨à§‹ à¦¡à§‡à¦Ÿà¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤");N(!0);try{const u=Ce(D),I=Y(D,"members"),p=Y(D,"donations"),i=await re(I),r={};i.forEach(C=>{const m=C.data();m.uniqueId&&(r[m.uniqueId]={id:C.id,name:m.name,displayId:m.displayId,groupId:m.groupid}),m.phone&&(r[m.phone]={id:C.id,name:m.name,displayId:m.displayId,groupId:m.groupid})});let l=0,c=0;for(const C of a){const m=C["Member ID"]?.toString(),k=C.Mobile?.toString(),S=C.Amount,L=r[m]||r[k];if(L&&S){const E=U(p);u.set(E,{memberId:L.id,memberDisplayId:L.displayId,userName:L.name,groupId:L.groupId||"N/A",amount:Number(S),date:Ze.now(),month:C.Month||new Date().toLocaleString("default",{month:"long",year:"numeric"}),paymentMethod:"excel_upload",status:"approved",createdAt:new Date().toISOString()}),l++}else c++}l>0?(await u.commit(),j.success(`${l} à¦Ÿà¦¿ à¦†à¦ªà¦²à§‹à¦¡ à¦¸à¦«à¦²! (${c} à¦Ÿà¦¿ à¦¬à§à¦¯à¦°à§à¦¥)`),g(null),v([])):j.error("à¦•à§‹à¦¨à§‹ à¦­à§à¦¯à¦¾à¦²à¦¿à¦¡ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}catch(u){console.error("Upload error:",u),j.error("à¦†à¦ªà¦²à§‹à¦¡ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}finally{N(!1)}};return e.jsxs("div",{className:"font-bangla max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"à¦¬à¦¾à¦²à§à¦• à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦†à¦ªà¦²à§‹à¦¡"}),e.jsx("button",{onClick:o,className:"text-xs text-indigo-600 hover:underline bg-transparent border-none cursor-pointer",children:"à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 text-center",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“‚"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Excel à¦«à¦¾à¦‡à¦² (.xlsx) à¦¡à§à¦°à¦ª à¦•à¦°à§à¦¨ à¦¬à¦¾ à¦¸à¦¿à¦²à§‡à¦•à§à¦Ÿ à¦•à¦°à§à¦¨"}),e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:x,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors",children:"à¦«à¦¾à¦‡à¦² à¦¸à¦¿à¦²à§‡à¦•à§à¦Ÿ à¦•à¦°à§à¦¨"}),s&&e.jsx("p",{className:"mt-3 text-sm font-medium text-green-600",children:s.name})]}),a.length>0&&e.jsxs("div",{className:"mt-6 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰ (",a.length," à¦°à§‡à¦•à¦°à§à¦¡)"]}),e.jsx("button",{onClick:M,disabled:b,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded shadow hover:bg-green-700 transition-colors",children:b?"à¦†à¦ªà¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...":"à¦¸à¦¬ à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100 text-xs",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsx("tr",{children:Object.keys(a[0]).map(u=>e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:u},u))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:a.slice(0,10).map((u,I)=>e.jsx("tr",{children:Object.values(u).map((p,i)=>e.jsx("td",{className:"px-3 py-2 text-gray-700",children:p},i))},I))})]})}),a.length>10&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["à¦†à¦°à¦“ ",a.length-10," à¦Ÿà¦¿ à¦°à§‡à¦•à¦°à§à¦¡..."]})]})]})]})}function Tt(){const[s,g]=d.useState(null),[b,N]=d.useState(!1),[a,v]=d.useState([]),[x,y]=d.useState([]);d.useEffect(()=>{(async()=>{try{const r=(await re(Y(D,"groups"))).docs.map(l=>({id:l.id,name:l.data().name,description:l.data().description}));y(r)}catch(i){console.error("Error fetching groups:",i)}})()},[]);const o=p=>{const i=p.target.files[0];i&&(g(i),M(i))},M=p=>{const i=new FileReader;i.onload=r=>{const l=new Uint8Array(r.target.result),c=$e(l,{type:"array"}),C=c.SheetNames[0],m=c.Sheets[C],k=ee.sheet_to_json(m);v(k)},i.readAsArrayBuffer(p)},u=async()=>{if(a.length===0)return j.error("à¦•à§‹à¦¨à§‹ à¦¡à§‡à¦Ÿà¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤");N(!0);try{const p=Ce(D),i=Y(D,"registrations"),r={};a.forEach(C=>{const m=C.Mobile?.toString().replace(/['" ]/g,"");if(m){if(!r[m]){r[m]={name:C["Head Name"]||C["Participant Name"],mobile:m,email:C.Email||"",group_id:"",contributeAmount:C.Amount||0,paymentStatus:C.Status||"Pending",members:[]};const k=C.Group,S=x.find(L=>L.name?.toLowerCase()===k?.toLowerCase()||L.description?.toLowerCase()===k?.toLowerCase());S&&(r[m].group_id=S.id)}r[m].members.push({member_name:C["Participant Name"]||"",gender:C.Gender||"Male",age:C.Age||"",t_shirt_size:C["T-Shirt Size"]||"L",birthYear:C["Birth Year"]||"",birthdate:C.Birthdate||""})}});const l=Object.values(r);let c=0;for(const C of l){if(!C.group_id){console.warn(`Skipping registration for ${C.mobile}: Group not found.`);continue}const m="HF-"+Math.floor(1e5+Math.random()*9e5),k=U(i);p.set(k,{...C,id:m,totalMembers:C.members.length,createdAt:new Date,importSource:"excel_upload"}),c++}c>0?(await p.commit(),j.success(`${c} à¦Ÿà¦¿ à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦²à§‹à¦¡ à¦¹à§Ÿà§‡à¦›à§‡!`),g(null),v([])):j.error("à¦ªà¦°à§à¦¯à¦¾à¦ªà§à¦¤ à¦¬à¦¾ à¦¸à¦ à¦¿à¦• à¦¡à§‡à¦Ÿà¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤ à¦—à§à¦°à§à¦ª à¦¨à¦¾à¦®à¦—à§à¦²à§‹ à¦ à¦¿à¦• à¦†à¦›à§‡ à¦•à¦¿à¦¨à¦¾ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨à¥¤")}catch(p){console.error("Upload error:",p),j.error("à¦†à¦ªà¦²à§‹à¦¡ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}finally{N(!1)}},I=()=>{const p=[{Mobile:"01711223344","Head Name":"M Nafiz",Email:"nafiz@example.com",Group:"2010",Amount:2e3,Status:"Paid","Participant Name":"M Nafiz",Gender:"Male",Age:32,"T-Shirt Size":"L","Birth Year":1994,Birthdate:"1994-05-15"},{Mobile:"01711223344","Head Name":"M Nafiz",Email:"nafiz@example.com",Group:"2010",Amount:2e3,Status:"Paid","Participant Name":"Mrs. Nafiz",Gender:"Female",Age:28,"T-Shirt Size":"M","Birth Year":1998,Birthdate:"1998-10-20"}],i=ee.json_to_sheet(p),r=ee.book_new();ee.book_append_sheet(r,i,"Registrations"),Ie(r,"registration_sample.xlsx")};return e.jsxs("div",{className:"font-bangla max-w-6xl mx-auto space-y-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"à¦¬à¦¾à¦²à§à¦• à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦†à¦ªà¦²à§‹à¦¡"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"à¦à¦•à§à¦¸à§‡à¦² à¦«à¦¾à¦‡à¦² à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡ à¦à¦•à¦¸à¦¾à¦¥à§‡ à¦…à¦¨à§‡à¦• à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§‹à¦— à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("button",{onClick:I,className:"text-xs px-3 py-1.5 bg-indigo-50 text-indigo-600 border border-indigo-200 rounded hover:bg-indigo-100 transition-colors flex items-center gap-1 font-bold",children:[e.jsx("span",{children:"ðŸ“¥"})," à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡"]}),e.jsx("p",{className:"text-[10px] text-gray-400 max-w-xs leading-relaxed text-right",children:"Mobile, Head Name, Email, Group, Amount, Status, Participant Name, Gender, Age, T-Shirt Size, Birth Year, Birthdate"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-10 hover:bg-gray-50 transition-colors text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“„"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¡à§‡à¦Ÿà¦¾ à¦¸à¦®à§à¦¬à¦²à¦¿à¦¤ Excel à¦«à¦¾à¦‡à¦² (.xlsx) à¦à¦–à¦¾à¦¨à§‡ à¦¡à§à¦°à¦ª à¦•à¦°à§à¦¨"}),e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:o,className:"hidden",id:"reg-file-upload"}),e.jsx("label",{htmlFor:"reg-file-upload",className:"cursor-pointer px-6 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-lg hover:bg-indigo-700 transition-all shadow-md active:scale-95",children:"à¦«à¦¾à¦‡à¦² à¦¬à¦¾à¦›à¦¾à¦‡ à¦•à¦°à§à¦¨"}),s&&e.jsxs("p",{className:"mt-4 text-sm font-semibold text-green-600",children:["à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¿à¦¤: ",s.name]})]}),a.length>0&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700",children:["à¦«à¦¾à¦‡à¦² à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰ (",a.length," à¦¸à¦¾à¦°à¦¿)"]}),e.jsx("button",{onClick:u,disabled:b,className:`px-6 py-2 rounded-lg text-white font-bold text-sm shadow-lg transition-all ${b?"bg-gray-400":"bg-green-600 hover:bg-green-700 active:scale-95"}`,children:b?"à¦†à¦ªà¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...":"à¦¸à¦¬ à¦†à¦ªà¦²à§‹à¦¡ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"})]}),e.jsx("div",{className:"overflow-x-auto border rounded-xl shadow-inner bg-gray-50",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:Object.keys(a[0]).map(p=>e.jsx("th",{className:"px-4 py-3 text-left font-bold text-gray-600 uppercase tracking-wider",children:p},p))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.slice(0,15).map((p,i)=>e.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:Object.values(p).map((r,l)=>e.jsx("td",{className:"px-4 py-3 text-gray-700",children:r?.toString()},l))},i))})]})}),a.length>15&&e.jsxs("p",{className:"text-xs text-gray-400 text-center italic",children:["à¦†à¦°à¦“ ",a.length-15," à¦Ÿà¦¿ à¦¸à¦¾à¦°à¦¿ à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰à¦¤à§‡ à¦¦à§‡à¦–à¦¾à¦¨à§‹ à¦¹à§Ÿà¦¨à¦¿..."]})]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-800 mb-2",children:"ðŸ’¡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦à¦¬à¦‚ à¦Ÿà¦¿à¦ªà¦¸:"}),e.jsxs("ul",{className:"text-xs text-indigo-700 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"à¦à¦•à¦‡ à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦²à§‡ à¦®à§‡à¦®à§à¦¬à¦¾à¦°à¦¦à§‡à¦° à¦à¦•à¦Ÿà¦¿ à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨à§‡à¦° à¦…à¦§à§€à¦¨à§‡ à¦°à¦¾à¦–à¦¾ à¦¹à¦¬à§‡à¥¤"}),e.jsx("li",{children:'à¦—à§à¦°à§à¦ªà§‡à¦° à¦¨à¦¾à¦® à¦…à¦¬à¦¶à§à¦¯à¦‡ à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦®à§‡à¦° à¦¨à¦¾à¦®à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦¹à§à¦¬à¦¹à§ à¦®à¦¿à¦²à¦¤à§‡ à¦¹à¦¬à§‡ (à¦¯à§‡à¦®à¦¨: "2010" à¦¬à¦¾ "Bsc 1st Batch")à¥¤'}),e.jsx("li",{children:'à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸ "Paid", "Pending" à¦¬à¦¾ "Waived" à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¥¤'})]})]})]})}const Wt=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ut=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Ot=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ue=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})});function Yt(){const{donations:s,groups:g,members:b,loading:N}=fe(),a=N.donations||N.groups||N.members,[v,x]=d.useState(null),[y,o]=d.useState(null),[M,u]=d.useState(!1),[I,p]=d.useState(!1),[i,r]=d.useState({topGroup:null,topMember:null,participation:{donated:0,total:0},zeroDonationGroups:[],nonDonatingMembers:[],monthlyStats:[],yearlyStats:[]}),[l,c]=d.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"primary"});d.useEffect(()=>{!N.donations&&!N.groups&&!N.members&&C(s,g,b)},[s,g,b,N]);const C=(h,$,Q)=>{const t={},z={},W={},B={};$.forEach(q=>t[q.id]=0),h.forEach(q=>{if(q.status?.toLowerCase()==="approved"){const le=Number(q.amount)||0;q.groupId&&(t[q.groupId]=(t[q.groupId]||0)+le),q.memberId&&(z[q.memberId]=(z[q.memberId]||0)+le),q.month&&(W[q.month]=(W[q.month]||0)+le);const ve=(q.date?.toDate?q.date.toDate():new Date(q.createdAt)).getFullYear();B[ve]=(B[ve]||0)+le}});let O=null,H=-1;Object.entries(t).forEach(([q,ne])=>{ne>H&&(H=ne,O=q)});const se=$.find(q=>q.id===O);let je=null,ue=-1;Object.entries(z).forEach(([q,ne])=>{ne>ue&&(ue=ne,je=q)});const ye=Q.find(q=>q.id===je),De=$.filter(q=>!t[q.id]||t[q.id]===0),Ae=Q.filter(q=>!z[q.id]);r({topGroup:se?{...se,total:H}:null,topMember:ye?{...ye,total:ue}:null,participation:{donated:Object.keys(z).length,total:Q.length},zeroDonationGroups:De,nonDonatingMembers:Ae,monthlyStats:W,yearlyStats:B})},m=h=>{c({isOpen:!0,title:"à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:"à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦¯à§‡ à¦†à¦ªà¦¨à¦¿ à¦à¦‡ à¦¡à§‹à¦¨à§‡à¦¶à¦¨à¦Ÿà¦¿ à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¨? à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦†à¦° à¦«à§‡à¦°à¦¤ à¦¨à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤",type:"danger",onConfirm:async()=>{x(h);try{await be(U(D,"donations",h)),j.success("à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}catch($){console.error("Error deleting:",$),j.error("à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}finally{x(null)}}})},k=h=>{o({...h}),u(!0)},S=async h=>{if(h.preventDefault(),!!y){x(y.id);try{let $={};if(y.memberId){const t=b.find(z=>z.id===y.memberId);t&&($={userName:t.name,memberDisplayId:t.displayId,groupId:t.groupid||y.groupId})}const Q={amount:Number(y.amount),month:y.month,status:y.status,memberId:y.memberId,...$};await J(U(D,"donations",y.id),Q),j.success("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¸à¦«à¦² à¦¹à§Ÿà§‡à¦›à§‡!"),u(!1),o(null)}catch($){console.error("Edit error",$),j.error("à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿")}finally{x(null)}}},L=async()=>{const h=R.filter($=>$.status?.toLowerCase()!=="approved");if(h.length===0)return j.error("à¦•à§‹à¦¨à§‹ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¨à§‡à¦‡à¥¤");c({isOpen:!0,title:"à¦¬à¦¾à¦²à§à¦• à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:`${h.length} à¦Ÿà¦¿ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦à¦•à¦¸à¦¾à¦¥à§‡ à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¨?`,type:"success",onConfirm:async()=>{p(!0);try{for(let Q=0;Q<h.length;Q+=500){const t=h.slice(Q,Q+500),z=Ce(D);t.forEach(W=>{const B=U(D,"donations",W.id);z.update(B,{status:"approved"})}),await z.commit()}j.success("à¦¸à¦¬ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}catch($){console.error($),j.error("Bulk approve failed")}finally{p(!1)}}})},E=h=>{c({isOpen:!0,title:"à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨",message:"à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦¯à§‡ à¦†à¦ªà¦¨à¦¿ à¦à¦‡ à¦¡à§‹à¦¨à§‡à¦¶à¦¨à¦Ÿà¦¿ à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¨?",type:"success",onConfirm:async()=>{x(h);try{const $=U(D,"donations",h);await J($,{status:"approved"}),j.success("à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}catch($){console.error("Error approving:",$),j.error("à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}finally{x(null)}}})},[f,A]=d.useState(""),[_,w]=d.useState(""),R=s.filter(h=>{const $=f?h.month===f:!0,Q=_?h.groupId===_:!0;return $&&Q}),G=R.reduce((h,$)=>h+($.status?.toLowerCase()==="approved"&&Number($.amount)||0),0),K=[...new Set(s.map(h=>h.month))];return e.jsxs("div",{className:"font-bangla min-h-screen bg-slate-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto mb-10 text-center md:text-left",children:[e.jsx("div",{className:"inline-block px-4 py-1.5 mb-4 text-xs font-bold tracking-widest text-indigo-600 uppercase bg-indigo-50 rounded-full animate-fade-in",children:"à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦®à§‡à¦¨à§à¦Ÿ à¦¡à§à¦¯à¦¾à¦¶à¦¬à§‹à¦°à§à¦¡"}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-slate-800 tracking-tight animate-fade-in animate-delay-100",children:["à¦¡à§‹à¦¨à§‡à¦¶à¦¨"," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"à¦¤à¦¾à¦²à¦¿à¦•à¦¾"})]}),e.jsx("p",{className:"mt-3 text-lg text-slate-500 font-medium animate-fade-in animate-delay-200",children:"à¦†à¦ªà¦¨à¦¾à¦° à¦‡à¦­à§‡à¦¨à§à¦Ÿà§‡à¦° à¦¸à¦•à¦² à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¸à¦‚à¦—à§à¦°à¦¹ à¦“ à¦ªà¦°à¦¿à¦¸à¦‚à¦–à§à¦¯à¦¾à¦¨ à¦à¦–à¦¾à¦¨à§‡ à¦¦à§‡à¦–à§à¦¨à¥¤"})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-slate-500 font-bold",children:"à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[e.jsxs("div",{className:"group bg-white rounded-3xl p-6 shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fade-in animate-delay-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300",children:e.jsx(Wt,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"à¦®à§‹à¦Ÿ à¦¸à¦‚à¦—à§à¦°à¦¹"}),e.jsxs("h3",{className:"text-3xl font-black text-slate-800",children:["à§³",G.toLocaleString()]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-50",children:e.jsxs("p",{className:"text-sm font-bold text-emerald-600 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),R.filter(h=>h.status?.toLowerCase()==="approved").length," ","à¦Ÿà¦¿ à¦¸à¦«à¦² à¦Ÿà§à¦°à¦¾à¦¨à¦œà§‡à¦•à¦¶à¦¨"]})})]}),e.jsxs("div",{className:"group bg-white rounded-3xl p-6 shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fade-in animate-delay-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-300",children:e.jsx(Ut,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"à¦…à¦‚à¦¶à¦—à§à¦°à¦¹à¦£ à¦¹à¦¾à¦°"}),e.jsxs("h3",{className:"text-3xl font-black text-slate-800",children:[(i.participation.donated/(i.participation.total||1)*100).toFixed(0),"%"]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-50",children:e.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${i.participation.donated/(i.participation.total||1)*100}%`}})})})]}),e.jsxs("div",{className:"group bg-white rounded-3xl p-6 shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fade-in animate-delay-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-2xl flex items-center justify-center text-amber-600 group-hover:bg-amber-600 group-hover:text-white transition-colors duration-300",children:e.jsx(Ot,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800",children:R.filter(h=>h.status?.toLowerCase()!=="approved").length})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-50",children:e.jsx("p",{className:"text-sm font-bold text-amber-600",children:"à¦®à§à¦¯à¦¾à¦¨à§à¦¯à¦¼à¦¾à¦² à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­à¦¾à¦² à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨"})})]}),e.jsxs("div",{className:"group bg-white rounded-3xl p-6 shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fade-in animate-delay-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-2xl flex items-center justify-center text-red-600 group-hover:bg-red-600 group-hover:text-white transition-colors duration-300",children:e.jsx(Ue,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"à¦¬à¦¾à¦•à¦¿ à¦†à¦›à§‡"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800",children:i.nonDonatingMembers.length})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-50",children:e.jsxs("p",{className:"text-sm font-bold text-red-600",children:[i.zeroDonationGroups.length," à¦Ÿà¦¿ à¦—à§à¦°à§à¦ª à¦¥à§‡à¦•à§‡ à¦†à¦¸à§‡à¦¨à¦¿"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[e.jsxs("div",{className:"sticky top-4 z-30 bg-white/80 backdrop-blur-md p-4 rounded-3xl shadow-lg border border-white/50 flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex shrink-0",children:e.jsxs("select",{value:f,onChange:h=>A(h.target.value),className:"pl-4 pr-10 py-2.5 bg-slate-50 border-0 rounded-2xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"à¦¸à¦•à¦² à¦®à¦¾à¦¸"}),K.map(h=>e.jsx("option",{value:h,children:h},h))]})}),e.jsx("div",{className:"flex shrink-0",children:e.jsxs("select",{value:_,onChange:h=>w(h.target.value),className:"pl-4 pr-10 py-2.5 bg-slate-50 border-0 rounded-2xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"à¦¸à¦•à¦² à¦—à§à¦°à§à¦ª"}),g.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:L,disabled:I||!R.some(h=>h.status?.toLowerCase()!=="approved"),className:`px-6 py-2.5 rounded-2xl text-sm font-black transition-all duration-300 shadow-md flex items-center gap-2 ${R.some(h=>h.status?.toLowerCase()!=="approved")?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white hover:shadow-emerald-200 hover:scale-105 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:I?"à¦ªà§à¦°à¦¸à§‡à¦¸à¦¿à¦‚...":"à¦¸à¦¬ à¦…à§à¦¯à¦¾à¦ªà§à¦°à§à¦­ à¦•à¦°à§à¦¨"})})]}),e.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden animate-fade-in",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50",children:[e.jsx("th",{className:"group px-8 py-5 text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100",children:"à¦¤à¦¾à¦°à¦¿à¦–"}),e.jsx("th",{className:"px-8 py-5 text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦“ à¦—à§à¦°à§à¦ª"}),e.jsx("th",{className:"px-8 py-5 text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 text-right",children:"à¦ªà¦°à¦¿à¦®à¦¾à¦£"}),e.jsx("th",{className:"px-8 py-5 text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 text-center",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("th",{className:"px-8 py-5 text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 text-right",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:a?[1,2,3,4,5].map(h=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{colSpan:"5",className:"px-8 py-6 h-16 bg-slate-50/20"})},h)):R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 grayscale opacity-30",children:[e.jsx(Ue,{}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:"à¦•à§‹à¦¥à¦¾à¦“ à¦•à§‹à¦¨à§‹ à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿!"})]})})}):R.map(h=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-bold text-slate-600 bg-slate-100/50 px-3 py-1 rounded-lg",children:h.date?.toDate?h.date.toDate().toLocaleDateString("bn-BD"):new Date(h.createdAt).toLocaleDateString("bn-BD")})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black text-slate-800",children:h.userName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded-md uppercase",children:g.find($=>$.id===h.groupId)?.name||"N/A"}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-400",children:["ID: ",h.memberDisplayId||h.memberId]})]})]})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("span",{className:"text-lg font-black text-indigo-600 tracking-tight",children:["à§³",h.amount.toLocaleString()]})}),e.jsx("td",{className:"px-8 py-6 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${h.status?.toLowerCase()==="approved"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-amber-50 text-amber-600 border border-amber-100 animate-pulse"}`,children:h.status?.toLowerCase()==="approved"?"à¦…à¦¨à§à¦®à§‹à¦¦à¦¿à¦¤":"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300",children:[h.status?.toLowerCase()!=="approved"&&e.jsx("button",{onClick:()=>E(h.id),className:"w-8 h-8 flex items-center justify-center bg-emerald-500 text-white rounded-xl shadow-lg shadow-emerald-200 hover:scale-110 active:scale-90 transition-transform",children:"âœ“"}),e.jsx("button",{onClick:()=>k(h),className:"w-8 h-8 flex items-center justify-center bg-indigo-500 text-white rounded-xl shadow-lg shadow-indigo-200 hover:scale-110 active:scale-90 transition-transform",children:"âœŽ"}),e.jsx("button",{onClick:()=>m(h.id),className:"w-8 h-8 flex items-center justify-center bg-rose-500 text-white rounded-xl shadow-lg shadow-rose-200 hover:scale-110 active:scale-90 transition-transform",children:"ðŸ—‘"})]})})]},h.id))})]})})})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-8 sticky top-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-purple-800 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden animate-fade-in animate-delay-300",children:[e.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-md rounded-xl flex items-center justify-center text-xl",children:"ðŸ†"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black uppercase tracking-widest text-indigo-100",children:"à¦¸à§‡à¦°à¦¾ à¦ªà¦¾à¦°à¦«à¦°à§à¦®à¦¾à¦°"}),e.jsx("p",{className:"text-xs text-indigo-200/70",children:"à¦à¦‡ à¦‡à¦­à§‡à¦¨à§à¦Ÿà§‡à¦° à¦¹à¦¿à¦°à§‹à¦°à¦¾"})]})]}),e.jsxs("div",{className:"space-y-6",children:[i.topMember&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-5 rounded-2xl border border-white/10 hover:bg-white/20 transition-all cursor-default",children:[e.jsx("p",{className:"text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-1",children:"à¦¸à¦°à§à¦¬à§‹à¦šà§à¦š à¦¦à¦¾à¦¤à¦¾"}),e.jsx("h4",{className:"text-xl font-black truncate",children:i.topMember.name}),e.jsxs("p",{className:"text-3xl font-black mt-2",children:["à§³",i.topMember.total.toLocaleString()]})]}),i.topGroup&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-5 rounded-2xl border border-white/10 hover:bg-white/20 transition-all cursor-default",children:[e.jsx("p",{className:"text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-1",children:"à¦¶à§€à¦°à§à¦· à¦—à§à¦°à§à¦ª"}),e.jsx("h4",{className:"text-xl font-black truncate",children:i.topGroup.name}),e.jsxs("p",{className:"text-3xl font-black mt-2",children:["à§³",i.topGroup.total.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden animate-fade-in animate-delay-200",children:[e.jsxs("div",{className:"p-6 border-b border-slate-50 flex items-center justify-between",children:[e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-[10px]",children:"à¦®à¦¾à¦¸à¦¿à¦• à¦Ÿà§à¦°à§‡à¦¨à§à¦¡"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[Object.keys(i.monthlyStats).length," à¦®à¦¾à¦¸"]})]}),e.jsx("div",{className:"p-4 max-h-[300px] overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(i.monthlyStats).sort((h,$)=>$[1]-h[1]).map(([h,$],Q)=>e.jsxs("div",{className:"group flex items-center justify-between p-3 bg-slate-50/50 hover:bg-indigo-50/50 rounded-2xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-300",children:["0",Q+1]}),e.jsx("span",{className:"text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors uppercase tracking-tight",children:h})]}),e.jsxs("span",{className:"text-sm font-black text-slate-800 tracking-tight",children:["à§³",$.toLocaleString()]})]},h))})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden animate-fade-in animate-delay-500",children:[e.jsxs("div",{className:"p-6 border-b border-slate-50 flex items-center justify-between",children:[e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-[10px]",children:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦¦à§‡à§Ÿà¦¨à¦¿"}),e.jsx("span",{className:"bg-red-50 text-red-600 px-2 py-0.5 rounded-md text-[10px] font-black",children:i.nonDonatingMembers.length})]}),e.jsx("div",{className:"p-4 max-h-[350px] overflow-y-auto custom-scrollbar",children:i.nonDonatingMembers.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.nonDonatingMembers.map(h=>e.jsx("div",{className:"group p-3 rounded-2xl bg-slate-50/50 border border-transparent hover:border-red-100 hover:bg-red-50/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center text-[10px] font-black text-white shadow-sm ${h.gender==="Female"?"bg-gradient-to-br from-pink-400 to-rose-500":"bg-gradient-to-br from-indigo-400 to-blue-500"}`,children:h.name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-700 truncate group-hover:text-slate-900 transition-colors",children:h.name}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["ID: ",h.displayId||h.uniqueId]})]}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-400 group-hover:scale-125 transition-transform"})]})},h.id))}):e.jsxs("div",{className:"text-center py-12 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center text-xl",children:"ðŸŽ‰"}),e.jsx("p",{className:"text-[10px] text-emerald-600 font-black uppercase tracking-widest",children:"à¦¸à¦¬ à¦¸à¦¦à¦¸à§à¦¯ à¦¦à¦¾à¦¨ à¦•à¦°à§‡à¦›à§‡à¦¨!"})]})})]})]})]})]})}),M&&y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-indigo-600 p-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"à¦¡à§‹à¦¨à§‡à¦¶à¦¨ à¦à¦¡à¦¿à¦Ÿ à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:()=>u(!1),className:"text-white hover:bg-white/20 rounded-full p-1",children:"âœ•"})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"à¦¸à¦¦à¦¸à§à¦¯"}),e.jsx(ce,{options:b.map(h=>({value:h.id,label:`${h.name} (${h.displayId||h.uniqueId})`})),value:b.find(h=>h.id===y.memberId)?{value:y.memberId,label:`${b.find(h=>h.id===y.memberId).name} (${b.find(h=>h.id===y.memberId).displayId})`}:null,onChange:h=>o({...y,memberId:h.value}),isDisabled:!0,className:"text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"* à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨à§‡ à¦¬à¦¨à§à¦§ à¦°à¦¾à¦–à¦¾ à¦¹à§Ÿà§‡à¦›à§‡"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"à¦Ÿà¦¾à¦•à¦¾à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£"}),e.jsx("input",{type:"number",value:y.amount,onChange:h=>o({...y,amount:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"à¦®à¦¾à¦¸"}),e.jsx("input",{type:"text",value:y.month,onChange:h=>o({...y,month:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsxs("select",{value:y.status,onChange:h=>o({...y,status:h.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 rounded-lg text-sm font-bold text-gray-600 hover:bg-gray-100",children:"à¦¬à¦¾à¦¤à¦¿à¦²"}),e.jsx("button",{type:"submit",disabled:v===y.id,className:"px-6 py-2 rounded-lg text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 shadow-md",children:v===y.id?"à¦¸à§‡à¦­ à¦¹à¦šà§à¦›à§‡...":"à¦¸à§‡à¦­ à¦•à¦°à§à¦¨"})]})]})]})}),e.jsx(Le,{config:l,onClose:()=>c({...l,isOpen:!1})})]})}function Ht(){const[s,g]=d.useState(!0),[b,N]=d.useState([]),[a,v]=d.useState({totalRegistrations:0,totalMembers:0,totalPaid:0,totalPaidAmount:0,totalPaidMembers:0,totalPending:0,totalPendingAmount:0,totalPendingMembers:0,totalWaived:0,totalWaivedAmount:0,totalWaivedMembers:0,totalAmount:0});return d.useEffect(()=>{(async()=>{try{const y=await re(Y(D,"groups")),o={};y.forEach(E=>{o[E.id]={id:E.id,name:E.data().name,description:E.data().description,totalRegistrations:0,totalMembers:0,paidCount:0,paidAmount:0,pendingCount:0,pendingAmount:0,waivedCount:0,waivedAmount:0}});const M=await re(Y(D,"registrations"));let u=0,I=0,p=0,i=0,r=0,l=0,c=0,C=0,m=0,k=0,S=0;M.forEach(E=>{const f=E.data(),A=f.group_id,_=f.paymentStatus||"Pending",w=parseFloat(f.contributeAmount||0),R=f.totalMembers||f.total_members||0;o[A]&&(o[A].totalRegistrations++,o[A].totalMembers+=R,_==="Paid"?(o[A].paidCount++,o[A].paidAmount+=w,l++,p+=w,m+=R):_==="Pending"?(o[A].pendingCount++,o[A].pendingAmount+=w,c++,i+=w,k+=R):_==="Waived"&&(o[A].waivedCount++,o[A].waivedAmount+=w,C++,r+=w,S+=R)),u++,I+=R});const L=Object.values(o).sort((E,f)=>f.totalRegistrations-E.totalRegistrations);N(L),v({totalRegistrations:u,totalMembers:I,totalPaid:l,totalPaidAmount:p,totalPaidMembers:m,totalPending:c,totalPendingAmount:i,totalPendingMembers:k,totalWaived:C,totalWaivedAmount:r,totalWaivedMembers:S,totalAmount:p+i+r})}catch(y){console.error(y),j.error("à¦¡à§‡à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿")}finally{g(!1)}})()},[]),s?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"p-4 md:p-8 font-bangla max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"à¦šà¦¾à¦à¦¦à¦¾ à¦¸à¦¾à¦°à¦¾à¦‚à¦¶"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"à¦—à§à¦°à§à¦ª à¦…à¦¨à§à¦¯à¦¾à¦¯à¦¼à§€ à¦šà¦¾à¦à¦¦à¦¾ à¦¸à¦‚à¦—à§à¦°à¦¹à§‡à¦° à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¤à¦¥à§à¦¯"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-[#4F46E5] rounded-2xl p-6 text-white shadow-xl border border-white/10 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-sm font-bold tracking-wider uppercase opacity-80 mb-1",children:"à¦®à§‹à¦Ÿ à¦šà¦¾à¦à¦¦à¦¾"}),e.jsxs("p",{className:"text-4xl font-extrabold tracking-tight",children:["à§³",a.totalAmount.toLocaleString()]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-semibold bg-white/10 w-fit px-2 py-1 rounded-lg",children:[e.jsxs("span",{children:[a.totalRegistrations," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{children:[a.totalMembers," à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯"]})]})]}),e.jsxs("div",{className:"bg-[#059669] rounded-2xl p-6 text-white shadow-xl border border-white/10 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-sm font-bold tracking-wider uppercase opacity-80 mb-1",children:"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤ à¦šà¦¾à¦à¦¦à¦¾"}),e.jsxs("p",{className:"text-4xl font-extrabold tracking-tight",children:["à§³",a.totalPaidAmount.toLocaleString()]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-semibold bg-white/10 w-fit px-2 py-1 rounded-lg",children:[e.jsxs("span",{children:[a.totalPaid," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{children:[a.totalPaidMembers," à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯"]})]})]}),e.jsxs("div",{className:"bg-[#D97706] rounded-2xl p-6 text-white shadow-xl border border-white/10 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-sm font-bold tracking-wider uppercase opacity-80 mb-1",children:"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨ à¦šà¦¾à¦à¦¦à¦¾"}),e.jsxs("p",{className:"text-4xl font-extrabold tracking-tight",children:["à§³",a.totalPendingAmount.toLocaleString()]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-semibold bg-white/10 w-fit px-2 py-1 rounded-lg",children:[e.jsxs("span",{children:[a.totalPending," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{children:[a.totalPendingMembers," à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯"]})]})]}),e.jsxs("div",{className:"bg-[#7C3AED] rounded-2xl p-6 text-white shadow-xl border border-white/10 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-sm font-bold tracking-wider uppercase opacity-80 mb-1",children:"à¦®à¦“à¦•à§à¦« à¦šà¦¾à¦à¦¦à¦¾"}),e.jsxs("p",{className:"text-4xl font-extrabold tracking-tight",children:["à§³",a.totalWaivedAmount.toLocaleString()]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-semibold bg-white/10 w-fit px-2 py-1 rounded-lg",children:[e.jsxs("span",{children:[a.totalWaived," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{children:[a.totalWaivedMembers," à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"à¦—à§à¦°à§à¦ª à¦…à¦¨à§à¦¯à¦¾à¦¯à¦¼à§€ à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤"})}),b.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"à¦•à§‹à¦¨à§‹ à¦¤à¦¥à§à¦¯ à¦ªà¦¾à¦“à¦¯à¦¼à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿à¥¤"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦—à§à¦°à§à¦ª à¦¨à¦¾à¦®"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦®à§‹à¦Ÿ à¦šà¦¾à¦à¦¦à¦¾"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦®à¦“à¦•à§à¦«"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦°à§‡à¦œà¦¿."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"à¦¸à¦¦à¦¸à§à¦¯"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:b.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:x.name}),e.jsx("div",{className:"text-xs text-gray-400",children:x.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("span",{className:"text-sm font-black text-gray-900",children:["à§³",(x.paidAmount+x.pendingAmount+x.waivedAmount).toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-black text-green-700",children:["à§³",x.paidAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:[x.paidCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-black text-amber-600",children:["à§³",x.pendingAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:[x.pendingCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-black text-purple-700",children:["à§³",x.waivedAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:[x.waivedCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-bold text-gray-700",children:x.totalRegistrations})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-bold text-gray-700",children:x.totalMembers})})]},x.id))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-black text-gray-900 uppercase",children:"à¦¸à¦°à§à¦¬à¦®à§‹à¦Ÿ"}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-black text-gray-900",children:["à§³",a.totalAmount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-black text-green-700",children:[e.jsxs("div",{children:["à§³",a.totalPaidAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] opacity-70",children:[a.totalPaid," à¦°à§‡à¦œà¦¿. |"," ",a.totalPaidMembers," à¦œà¦¨"]})]}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-black text-amber-600",children:[e.jsxs("div",{children:["à§³",a.totalPendingAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] opacity-70",children:[a.totalPending," à¦°à§‡à¦œà¦¿. |"," ",a.totalPendingMembers," à¦œà¦¨"]})]}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-black text-purple-700",children:[e.jsxs("div",{children:["à§³",a.totalWaivedAmount.toLocaleString()]}),e.jsxs("div",{className:"text-[10px] opacity-70",children:[a.totalWaived," à¦°à§‡à¦œà¦¿. |"," ",a.totalWaivedMembers," à¦œà¦¨"]})]}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-black text-gray-900",children:a.totalRegistrations}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-black text-gray-900",children:a.totalMembers})]})})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:b.map(x=>e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900",children:x.name}),e.jsx("p",{className:"text-xs text-gray-500",children:x.description})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"bg-indigo-50/50 p-2 rounded-lg",children:[e.jsx("span",{className:"block text-indigo-600 text-[10px] font-bold uppercase mb-1",children:"à¦®à§‹à¦Ÿ à¦šà¦¾à¦à¦¦à¦¾"}),e.jsxs("span",{className:"font-black text-indigo-700 text-sm",children:["à§³",(x.paidAmount+x.pendingAmount+x.waivedAmount).toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50/50 p-2 rounded-lg border border-green-100",children:[e.jsx("span",{className:"block text-green-600 text-[10px] font-bold uppercase mb-1",children:"à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤"}),e.jsxs("span",{className:"font-black text-green-700",children:["à§³",x.paidAmount.toLocaleString()]}),e.jsxs("span",{className:"block text-[9px] text-gray-400 mt-0.5",children:[x.paidCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]}),e.jsxs("div",{className:"bg-amber-50/50 p-2 rounded-lg border border-amber-100",children:[e.jsx("span",{className:"block text-amber-600 text-[10px] font-bold uppercase mb-1",children:"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨"}),e.jsxs("span",{className:"font-black text-amber-700",children:["à§³",x.pendingAmount.toLocaleString()]}),e.jsxs("span",{className:"block text-[9px] text-gray-400 mt-0.5",children:[x.pendingCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]}),e.jsxs("div",{className:"bg-purple-50/50 p-2 rounded-lg border border-purple-100",children:[e.jsx("span",{className:"block text-purple-600 text-[10px] font-bold uppercase mb-1",children:"à¦®à¦“à¦•à§à¦«"}),e.jsxs("span",{className:"font-black text-purple-700",children:["à§³",x.waivedAmount.toLocaleString()]}),e.jsxs("span",{className:"block text-[9px] text-gray-400 mt-0.5",children:[x.waivedCount," à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨"]})]})]}),e.jsxs("div",{className:"flex gap-4 text-[10px] font-bold text-gray-400 uppercase pt-1 px-1",children:[e.jsxs("span",{children:["à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨:"," ",e.jsx("span",{className:"text-gray-900",children:x.totalRegistrations})]}),e.jsxs("span",{children:["à¦¸à¦¦à¦¸à§à¦¯:"," ",e.jsx("span",{className:"text-gray-900",children:x.totalMembers})]})]})]},x.id))})]})]})]})}const Vt="modulepreload",Qt=function(s){return"/"+s},Oe={},Zt=function(g,b,N){let a=Promise.resolve();if(b&&b.length>0){let o=function(M){return Promise.all(M.map(u=>Promise.resolve(u).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),y=x?.nonce||x?.getAttribute("nonce");a=o(b.map(M=>{if(M=Qt(M),M in Oe)return;Oe[M]=!0;const u=M.endsWith(".css"),I=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${I}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Vt,u||(p.as="script"),p.crossOrigin="",p.href=M,y&&p.setAttribute("nonce",y),document.head.appendChild(p),u)return new Promise((i,r)=>{p.addEventListener("load",i),p.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${M}`)))})}))}function v(x){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=x,window.dispatchEvent(y),!y.defaultPrevented)throw x}return a.then(x=>{for(const y of x||[])y.status==="rejected"&&v(y.reason);return g().catch(v)})},Kt=d.lazy(()=>Zt(()=>import("./FamilyTreeView-QMC8YIKv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),ke={control:(s,g)=>({...s,backgroundColor:"#f8fafc",borderColor:g.isFocused?"#6366f1":"#e2e8f0",borderRadius:"0.75rem",padding:"0.25rem",boxShadow:g.isFocused?"0 0 0 2px rgba(99, 102, 241, 0.2)":"none","&:hover":{borderColor:"#6366f1"}}),option:(s,g)=>({...s,backgroundColor:g.isSelected?"#6366f1":g.isFocused?"#f1f5f9":"white",color:g.isSelected?"white":"#1e293b",padding:"0.5rem 1rem",fontSize:"0.875rem",cursor:"pointer"}),multiValue:s=>({...s,backgroundColor:"#eff6ff",borderRadius:"0.5rem"}),multiValueLabel:s=>({...s,color:"#2563eb",fontWeight:"600",fontSize:"0.75rem"})};function Jt(){const[s,g]=d.useState([]),[b,N]=d.useState([]),[a,v]=d.useState(!0),[x,y]=d.useState(""),[o,M]=d.useState("all"),[u,I]=d.useState("all"),[p,i]=d.useState("table"),[r,l]=d.useState(!1),[c,C]=d.useState(null),[m,k]=d.useState(null),[S,L]=d.useState(null),E={name:"",fatherId:"",motherId:"",spouseIds:[],childrenIds:[],generation:1,phone:"",address:"",gender:"Male",groupid:"",birthYear:"",deathYear:"",alive:!0,profession:"",photoUrl:"",birthdate:""},[f,A]=d.useState(E);d.useEffect(()=>{const t=me(Y(D,"members"),ge("createdAt","desc")),z=oe(t,O=>{const H=[];O.forEach(se=>{H.push({id:se.id,...se.data()})}),g(H)}),W=me(Y(D,"groups"),ge("name")),B=oe(W,O=>{const H=[];O.forEach(se=>{H.push({id:se.id,...se.data()})}),N(H),v(!1)},O=>{console.error("Error fetching groups:",O),j.error("à¦¸à¦¦à¦¸à§à¦¯ à¦¬à¦¾ à¦—à§à¦°à§à¦ª à¦¤à¦¾à¦²à¦¿à¦•à¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤"),v(!1)});return()=>{z(),B()}},[]);const _=async t=>{if(t.preventDefault(),!f.name)return j.error("à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦® à¦†à¦¬à¦¶à§à¦¯à¦•");try{let z=parseInt(f.generation);if(f.fatherId||f.motherId){const B=s.find(O=>O.uniqueId===f.fatherId||O.uniqueId===f.motherId);B&&(z=(B.generation||0)+1)}const W={...f,generation:z,birthYear:f.birthYear?parseInt(f.birthYear):null,deathYear:f.deathYear?parseInt(f.deathYear):null,updatedAt:qe()};if(c){const B=`G${z}-${c.uniqueId.split("-")[1]}`;await J(U(D,"members",c.id),{...W,displayId:B}),j.success("à¦¸à¦¦à¦¸à§à¦¯ à¦¤à¦¥à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}else{const B=Math.floor(1e5+Math.random()*9e5),O="M-"+B,H=`G${z}-${B}`;await Se(Y(D,"members"),{...W,uniqueId:O,displayId:H,createdAt:qe(),importSource:"manual_entry"}),j.success("à¦¸à¦¦à¦¸à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!")}K()}catch(z){console.error("Error saving member:",z),j.error("à¦¤à¦¥à§à¦¯ à¦¸à¦‚à¦°à¦•à§à¦·à¦£ à¦•à¦°à¦¤à§‡ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}},w=t=>{L(t)},R=async()=>{if(S)try{await be(U(D,"members",S.id)),j.success("à¦¸à¦¦à¦¸à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤"),L(null)}catch(t){console.error("Error deleting member:",t),j.error("à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}},G=t=>{C(t),A({name:t.name||"",fatherId:t.fatherId||"",motherId:t.motherId||"",spouseIds:t.spouseIds||[],childrenIds:t.childrenIds||[],generation:t.generation||1,phone:t.phone||"",address:t.address||"",gender:t.gender||"Male",groupid:t.groupid||"",birthYear:t.birthYear||"",deathYear:t.deathYear||"",alive:t.alive!==void 0?t.alive:!0,profession:t.profession||"",photoUrl:t.photoUrl||"",birthdate:t.birthdate||""}),l(!0)},K=()=>{l(!1),C(null),A(E)},h=s.filter(t=>{const z=t.name?.toLowerCase().includes(x.toLowerCase())||t.uniqueId?.toLowerCase().includes(x.toLowerCase())||t.phone?.includes(x),W=o==="all"||t.generation?.toString()===o,B=t.groupid||t.groupId;let O=u==="all";if(!O)if(B==u)O=!0;else{const H=b.find(se=>se.id==u);H&&B&&H.name.trim().toLowerCase()===B.toString().trim().toLowerCase()&&(O=!0)}return z&&W&&O}),$=[...new Set(s.map(t=>t.generation?.toString()))].sort((t,z)=>t-z),Q=()=>{const t=[{Name:"à¦¶à¦°à¦¿à¦«à§à¦² à¦‡à¦¸à¦²à¦¾à¦®",Gender:"Male","Birth Year":1950,Profession:"Farmer",Alive:"true",Phone:"017XXXXXXXX",Address:"à¦¢à¦¾à¦•à¦¾, à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶",Generation:1},{Name:"à¦†à¦°à¦¿à¦«à§à¦² à¦‡à¦¸à¦²à¦¾à¦®","Father ID":"M-XXXXXX",Gender:"Male","Birth Year":1980,Profession:"Teacher",Alive:"true",Phone:"018XXXXXXXX",Address:"à¦¢à¦¾à¦•à¦¾, à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶",Generation:2,"Spouse IDs":"M-YYYYYY","Children IDs":"M-ZZZZZZ"}],z=ee.json_to_sheet(t),W=ee.book_new();ee.book_append_sheet(W,z,"Members"),Ie(W,"family_members_sample.xlsx"),j.success("à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...")};return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"font-bangla space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"à¦¬à¦‚à¦¶ à¦¸à¦¦à¦¸à§à¦¯ à¦“ à¦«à§à¦¯à¦¾à¦®à¦¿à¦²à¦¿ à¦Ÿà§à¦°à¦¿"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"à¦¬à¦‚à¦¶à§‡à¦° à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸ à¦à¦¬à¦‚ à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨ à¦ªà¦°à¦¿à¦šà¦¾à¦²à¦¨à¦¾ à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl flex items-center shadow-inner",children:[e.jsx("button",{onClick:()=>i("table"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${p==="table"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"à¦Ÿà§‡à¦¬à¦¿à¦² à¦­à¦¿à¦‰"}),e.jsx("button",{onClick:()=>i("tree"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${p==="tree"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"à¦«à§à¦¯à¦¾à¦®à¦¿à¦²à¦¿ à¦Ÿà§à¦°à¦¿"})]}),e.jsx("button",{onClick:Q,className:"px-4 py-2.5 bg-slate-100 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-200 transition-all flex items-center gap-2",title:"à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡",children:"ðŸ“¥"}),e.jsxs(he,{to:"/admin/bulk-members-upload",className:"bg-amber-500 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-amber-500/20 hover:bg-amber-600 active:scale-95 transition-all flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‚"})," à¦¬à¦¾à¦²à§à¦• à¦†à¦ªà¦²à§‹à¦¡"]}),e.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-indigo-600/20 hover:bg-indigo-700 active:scale-95 transition-all flex items-center gap-2",children:[e.jsx("span",{children:"+"})," à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§‹à¦—"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-6 border-t border-slate-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"ðŸ”"}),e.jsx("input",{type:"text",placeholder:"à¦¨à¦¾à¦®, à¦†à¦‡à¦¡à¦¿ à¦¬à¦¾ à¦®à§‹à¦¬à¦¾à¦‡à¦²...",value:x,onChange:t=>y(t.target.value),className:"pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none w-full text-sm transition-all"})]}),e.jsxs("select",{value:o,onChange:t=>M(t.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none text-sm font-medium text-slate-600",children:[e.jsx("option",{value:"all",children:"à¦¸à¦¬ à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨"}),$.map(t=>e.jsxs("option",{value:t,children:["à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨ ",t]},t))]}),e.jsxs("select",{value:u,onChange:t=>I(t.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none text-sm font-medium text-slate-600",children:[e.jsx("option",{value:"all",children:"à¦¸à¦¬ à¦—à§à¦°à§à¦ª"}),b.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.description?`- ${t.description}`:""]},t.id))]})]})]}),p==="table"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¤à¦¥à§à¦¯"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦ªà¦¿à¦¤à¦¾-à¦®à¦¾à¦¤à¦¾"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦œà§€à¦¬à¦¨à¦•à¦¾à¦² à¦“ à¦ªà§‡à¦¶à¦¾"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦“ à¦ à¦¿à¦•à¦¾à¦¨à¦¾"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:h.map(t=>{const z=s.find(B=>B.uniqueId===t.fatherId),W=s.find(B=>B.uniqueId===t.motherId);return e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold ${t.gender==="Female"?"bg-pink-50 text-pink-600":"bg-blue-50 text-blue-600"}`,children:t.name?.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[t.name,!t.alive&&e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded italic",children:"à¦®à§ƒà¦¤"})]}),e.jsx("div",{className:"text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded inline-block mt-0.5",children:t.displayId||t.uniqueId}),e.jsx("div",{className:"text-[10px] text-slate-500 font-medium mt-0.5",children:(()=>{const B=t.groupid||t.groupId;if(!B)return"à¦—à§à¦°à§à¦ª à¦¨à§‡à¦‡";const O=b.find(H=>H.id==B||H.name==B);return O?`à¦—à§à¦°à§à¦ª: ${O.name}`:`à¦—à§à¦°à§à¦ª: ${B}`})()})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"à¦ªà¦¿à¦¤à¦¾:"}),z?e.jsx("span",{className:"text-slate-800 font-medium",children:z.name}):e.jsx("span",{className:"text-slate-300 italic",children:"à¦œà¦¾à¦¨à¦¾ à¦¨à§‡à¦‡"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1.5 mt-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"à¦®à¦¾à¦¤à¦¾:"}),W?e.jsx("span",{className:"text-slate-800 font-medium",children:W.name}):e.jsx("span",{className:"text-slate-300 italic",children:"à¦œà¦¾à¦¨à¦¾ à¦¨à§‡à¦‡"})]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-slate-700",children:[t.birthYear?t.birthYear:"????"," -"," ",t.alive?"à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨":t.deathYear||"????"]}),e.jsx("div",{className:"text-xs text-indigo-600 font-bold mt-1",children:t.profession||"à¦ªà§‡à¦¶à¦¾ à¦‰à¦²à§à¦²à§‡à¦– à¦¨à§‡à¦‡"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-3 py-1 bg-amber-50 text-amber-700 rounded-full text-xs font-bold border border-amber-100",children:["à¦§à¦¾à¦ª ",t.generation]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-slate-700 font-medium",children:t.phone||"-"}),e.jsx("div",{className:"text-xs text-slate-400 mt-1 max-w-[180px] truncate",title:t.address,children:t.address||"-"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>k(t),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à§à¦¨",children:"ðŸ‘ï¸"}),e.jsx("button",{onClick:()=>G(t),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨ à¦•à¦°à§à¦¨",children:"âœï¸"}),e.jsx("button",{onClick:()=>w(t),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à§à¦¨",children:"ðŸ—‘ï¸"})]})})]},t.id)})})]})}),h.length===0&&e.jsx("div",{className:"py-20 text-center text-slate-400 italic",children:"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]}):e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"p-6",children:"ðŸŒ³ à¦Ÿà§à¦°à¦¿ à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."}),children:e.jsx(Kt,{members:s})}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:K}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl relative z-10 overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-indigo-600 p-6 flex justify-between items-center shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:c?"à¦¸à¦¦à¦¸à§à¦¯ à¦¤à¦¥à§à¦¯ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à§à¦¨":"à¦¨à¦¤à§à¦¨ à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§‹à¦— à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:K,className:"text-white hover:bg-white/10 p-2 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:_,className:"p-8 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦® *"}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:t=>A({...f,name:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"à¦¨à¦¾à¦® à¦²à¦¿à¦–à§à¦¨"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦²à¦¿à¦™à§à¦—"}),e.jsxs("select",{value:f.gender,onChange:t=>A({...f,gender:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[e.jsx("option",{value:"Male",children:"à¦ªà§à¦°à§à¦·"}),e.jsx("option",{value:"Female",children:"à¦®à¦¹à¦¿à¦²à¦¾"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦—à§à¦°à§à¦ª (Group)"}),e.jsxs("select",{value:f.groupid,onChange:t=>A({...f,groupid:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"à¦¬à¦¾à¦›à¦¾à¦‡ à¦•à¦°à§à¦¨"}),b.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.description?`- ${t.description}`:""]},t.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦ªà¦¿à¦¤à¦¾à¦° à¦¨à¦¾à¦®"}),e.jsx(ce,{options:s.filter(t=>t.gender==="Male").map(t=>({value:t.uniqueId,label:`${t.name} (${t.displayId||t.uniqueId})`})),value:f.fatherId?{value:f.fatherId,label:(s.find(t=>t.uniqueId===f.fatherId)?.name||"")+` (${s.find(t=>t.uniqueId===f.fatherId)?.displayId||f.fatherId})`}:null,onChange:t=>A({...f,fatherId:t?t.value:""}),isSearchable:!0,placeholder:"à¦ªà¦¿à¦¤à¦¾ à¦–à§à¦à¦œà§à¦¨...",styles:ke,noOptionsMessage:()=>"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦®à¦¾à¦¤à¦¾à¦° à¦¨à¦¾à¦®"}),e.jsx(ce,{options:s.filter(t=>t.gender==="Female").map(t=>({value:t.uniqueId,label:`${t.name} (${t.displayId||t.uniqueId})`})),value:f.motherId?{value:f.motherId,label:(s.find(t=>t.uniqueId===f.motherId)?.name||"")+` (${s.find(t=>t.uniqueId===f.motherId)?.displayId||f.motherId})`}:null,onChange:t=>A({...f,motherId:t?t.value:""}),isSearchable:!0,placeholder:"à¦®à¦¾à¦¤à¦¾ à¦–à§à¦à¦œà§à¦¨...",styles:ke,noOptionsMessage:()=>"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦ªà§‡à¦¶à¦¾ (Profession)"}),e.jsx("input",{type:"text",value:f.profession,onChange:t=>A({...f,profession:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"à¦‰à¦¦à¦¾à¦ƒ à¦•à§ƒà¦·à¦•, à¦¶à¦¿à¦•à§à¦·à¦•"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦œà¦¨à§à¦® à¦¸à¦¾à¦² (Birth Year)"}),e.jsx("input",{type:"number",value:f.birthYear,onChange:t=>A({...f,birthYear:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"1950"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦œà¦¨à§à¦® à¦¤à¦¾à¦°à¦¿à¦– (Birthdate)"}),e.jsx("input",{type:"date",value:f.birthdate,onChange:t=>A({...f,birthdate:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦œà§€à¦¬à¦¿à¦¤ à¦•à¦¿ à¦¨à¦¾?"}),e.jsxs("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200",children:[e.jsx("button",{type:"button",onClick:()=>A({...f,alive:!0,deathYear:""}),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${f.alive?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:bg-slate-200"}`,children:"à¦¹à§à¦¯à¦¾à¦"}),e.jsx("button",{type:"button",onClick:()=>A({...f,alive:!1}),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${f.alive?"text-slate-500 hover:bg-slate-200":"bg-indigo-600 text-white shadow-md"}`,children:"à¦¨à¦¾"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦®à§ƒà¦¤à§à¦¯à§ à¦¸à¦¾à¦² (à¦¯à¦¦à¦¿ à¦¥à¦¾à¦•à§‡)"}),e.jsx("input",{type:"number",disabled:f.alive,value:f.deathYear,onChange:t=>A({...f,deathYear:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all disabled:opacity-50",placeholder:"2020"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦°"}),e.jsx("input",{type:"text",value:f.phone,onChange:t=>A({...f,phone:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"017XXXXXXXX"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨ (à¦¯à¦¦à¦¿ à¦ªà¦¿à¦¤à¦¾-à¦®à¦¾à¦¤à¦¾ à¦¨à¦¾ à¦¥à¦¾à¦•à§‡)"}),e.jsx("input",{type:"number",min:"1",disabled:f.fatherId||f.motherId,value:f.generation,onChange:t=>A({...f,generation:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all disabled:opacity-50"}),(f.fatherId||f.motherId)&&e.jsx("p",{className:"text-[10px] text-indigo-600 font-medium mt-1",children:"* à¦ªà¦¿à¦¤à¦¾/à¦®à¦¾à¦¤à¦¾ à¦¬à¦¾à¦›à¦¾à¦‡ à¦•à¦°à¦²à§‡ à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨ à¦…à¦Ÿà§‹à¦®à§‡à¦Ÿà¦¿à¦• à¦¹à¦¿à¦¸à§‡à¦¬ à¦¹à¦¬à§‡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦›à¦¬à¦¿ à¦²à¦¿à¦™à§à¦• (Photo URL)"}),e.jsx("input",{type:"text",value:f.photoUrl,onChange:t=>A({...f,photoUrl:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"https://example.com/photo.jpg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-slate-100",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-indigo-600 ml-1",children:"à¦¸à§à¦¬à¦¾à¦®à§€/à¦¸à§à¦¤à§à¦°à§€ (Spouse)"}),e.jsx(ce,{isMulti:!0,options:s.map(t=>({value:t.uniqueId,label:`${t.name} (${t.displayId||t.uniqueId})`})),value:f.spouseIds.map(t=>{const z=s.find(W=>W.uniqueId===t);return{value:t,label:(z?.name||t)+` (${z?.displayId||t})`}}),onChange:t=>A({...f,spouseIds:t?t.map(z=>z.value):[]}),isSearchable:!0,placeholder:"à¦¸à§à¦¬à¦¾à¦®à§€/à¦¸à§à¦¤à§à¦°à§€ à¦–à§à¦à¦œà§à¦¨...",styles:ke,noOptionsMessage:()=>"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-indigo-600 ml-1",children:"à¦¸à¦¨à§à¦¤à¦¾à¦¨à¦¸à¦¨à§à¦¤à¦¤à¦¿ (Children)"}),e.jsx(ce,{isMulti:!0,options:s.map(t=>({value:t.uniqueId,label:`${t.name} (${t.displayId||t.uniqueId})`})),value:f.childrenIds.map(t=>{const z=s.find(W=>W.uniqueId===t);return{value:t,label:(z?.name||t)+` (${z?.displayId||t})`}}),onChange:t=>A({...f,childrenIds:t?t.map(z=>z.value):[]}),isSearchable:!0,placeholder:"à¦¸à¦¨à§à¦¤à¦¾à¦¨ à¦–à§à¦à¦œà§à¦¨...",styles:ke,noOptionsMessage:()=>"à¦•à§‹à¦¨à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 ml-1",children:"à¦ à¦¿à¦•à¦¾à¦¨à¦¾"}),e.jsx("textarea",{value:f.address,onChange:t=>A({...f,address:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"à¦ à¦¿à¦•à¦¾à¦¨à¦¾ à¦²à¦¿à¦–à§à¦¨",rows:"2"})]}),e.jsxs("div",{className:"flex gap-4 pt-4 shrink-0",children:[e.jsx("button",{type:"button",onClick:K,className:"flex-1 px-6 py-4 border-2 border-slate-100 text-slate-600 rounded-2xl font-bold hover:bg-slate-50 transition-all",children:"à¦¬à¦¾à¦¤à¦¿à¦² à¦•à¦°à§à¦¨"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-4 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg shadow-indigo-600/20 hover:bg-indigo-700 transition-all active:scale-95",children:"à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"})]})]})]})]}),m&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>k(null)}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl relative z-10 overflow-hidden animate-in fade-in zoom-in duration-300 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"relative h-32 bg-indigo-600 shrink-0",children:[e.jsx("div",{className:"absolute -bottom-12 left-8 p-1 bg-white rounded-3xl shadow-xl",children:m.photoUrl?e.jsx("img",{src:m.photoUrl,alt:m.name,className:"w-24 h-24 rounded-[1.25rem] object-cover"}):e.jsx("div",{className:`w-24 h-24 rounded-[1.25rem] flex items-center justify-center text-4xl font-black text-white ${m.gender==="Female"?"bg-pink-500":"bg-indigo-500"}`,children:m.name?.charAt(0)})}),e.jsx("button",{onClick:()=>k(null),className:"absolute top-4 right-4 bg-white/20 hover:bg-white/40 text-white p-2 rounded-full transition-all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"pt-16 p-8 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-800",children:m.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold border border-indigo-100 uppercase tracking-wider",children:m.displayId||m.uniqueId}),e.jsxs("span",{className:"px-3 py-1 bg-amber-50 text-amber-600 rounded-full text-xs font-bold border border-amber-100",children:["à¦§à¦¾à¦ª ",m.generation]}),m.groupid&&e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold border border-slate-200",children:m.groupid})]})]}),!m.alive&&e.jsxs("div",{className:"px-4 py-1.5 bg-slate-900 text-slate-100 rounded-xl text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"}),"à¦®à§ƒà¦¤"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mt-10",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦ªà§‡à¦¶à¦¾"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:m.profession||"à¦‰à¦²à§à¦²à§‡à¦– à¦¨à§‡à¦‡"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦œà¦¨à§à¦® à¦¸à¦¾à¦²"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:m.birthYear||"à¦…à¦œà¦¾à¦¨à¦¾"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦œà¦¨à§à¦® à¦¤à¦¾à¦°à¦¿à¦–"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:m.birthdate||"à¦…à¦œà¦¾à¦¨à¦¾"})]}),!m.alive&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦®à§ƒà¦¤à§à¦¯à§ à¦¸à¦¾à¦²"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:m.deathYear||"à¦…à¦œà¦¾à¦¨à¦¾"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦®à§‹à¦¬à¦¾à¦‡à¦²"}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:m.phone||"à¦¨à§‡à¦‡"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"à¦ à¦¿à¦•à¦¾à¦¨à¦¾"}),e.jsx("p",{className:"text-sm font-bold text-slate-700 leading-relaxed",children:m.address||"à¦¬à¦¿à¦¬à¦°à¦£ à¦¨à§‡à¦‡"})]})]}),e.jsxs("div",{className:"mt-12 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-widest border-b border-slate-100 pb-2",children:"à¦ªà¦¿à¦¤à¦¾à¦®à¦¾à¦¤à¦¾"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-2xl border border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"à¦ªà¦¿à¦¤à¦¾"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:s.find(t=>t.uniqueId===m.fatherId)?.name||e.jsx("span",{className:"text-slate-300 italic",children:"à¦…à¦œà¦¾à¦¨à¦¾"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-2xl border border-slate-100",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"à¦®à¦¾à¦¤à¦¾"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:s.find(t=>t.uniqueId===m.motherId)?.name||e.jsx("span",{className:"text-slate-300 italic",children:"à¦…à¦œà¦¾à¦¨à¦¾"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-black text-indigo-500 uppercase tracking-widest border-b border-indigo-50 pb-2",children:"à¦¸à§à¦¬à¦¾à¦®à§€/à¦¸à§à¦¤à§à¦°à§€"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.spouseIds?.length>0?m.spouseIds.map(t=>{const z=s.find(W=>W.uniqueId===t);return e.jsx("div",{className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold border border-indigo-100",children:z?.name||t},t)}):e.jsx("p",{className:"text-xs text-slate-400 italic",children:"à¦•à§‹à¦¨à§‹ à¦¤à¦¥à§à¦¯ à¦¨à§‡à¦‡"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-black text-emerald-500 uppercase tracking-widest border-b border-emerald-50 pb-2",children:"à¦¸à¦¨à§à¦¤à¦¾à¦¨à¦¸à¦¨à§à¦¤à¦¤à¦¿"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.childrenIds?.length>0?m.childrenIds.map(t=>{const z=s.find(W=>W.uniqueId===t);return e.jsx("div",{className:"p-3 bg-emerald-50 text-emerald-700 rounded-2xl text-xs font-bold border border-emerald-100 text-center",children:z?.name||t},t)}):e.jsx("p",{className:"text-xs text-slate-400 italic",children:"à¦•à§‹à¦¨à§‹ à¦¤à¦¥à§à¦¯ à¦¨à§‡à¦‡"})})]})]})]}),e.jsx("div",{className:"p-6 bg-slate-50 shrink-0 border-t border-slate-100 flex justify-end",children:e.jsx("button",{onClick:()=>k(null),className:"px-8 py-3 bg-slate-800 text-white rounded-2xl font-bold shadow-lg hover:bg-slate-900 transition-all active:scale-95",children:"à¦¬à¦¨à§à¦§ à¦•à¦°à§à¦¨"})})]})]}),S&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md",onClick:()=>L(null)}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-md relative z-10 overflow-hidden animate-in fade-in zoom-in slide-in-from-bottom-8 duration-300",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center animate-pulse text-3xl",children:"âš ï¸"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-2",children:"à¦¸à¦¦à¦¸à§à¦¯ à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à§à¦¨?"}),e.jsxs("p",{className:"text-slate-500 text-sm leading-relaxed mb-8",children:["à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤à¦­à¦¾à¦¬à§‡"," ",e.jsx("span",{className:"font-bold text-slate-800",children:S.name})," ","à¦à¦° à¦¸à¦•à¦² à¦¤à¦¥à§à¦¯ à¦¸à§à¦¥à¦¾à§Ÿà§€à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨? à¦à¦Ÿà¦¿ à¦†à¦° à¦«à¦¿à¦°à¦¿à§Ÿà§‡ à¦†à¦¨à¦¾ à¦¸à¦®à§à¦­à¦¬ à¦¹à¦¬à§‡ à¦¨à¦¾à¥¤"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:R,className:"w-full py-4 bg-rose-600 text-white rounded-2xl font-bold shadow-lg shadow-rose-600/20 hover:bg-rose-700 transition-all active:scale-95",children:"à¦¹à§à¦¯à¦¾à¦, à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à§à¦¨"}),e.jsx("button",{onClick:()=>L(null),className:"w-full py-4 bg-slate-50 text-slate-600 rounded-2xl font-bold hover:bg-slate-100 transition-all",children:"à¦¨à¦¾, à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨"})]})]}),e.jsx("div",{className:"h-1.5 bg-gradient-to-r from-rose-500 to-rose-600"})]})]})]})}function es(){const[s,g]=d.useState(null),[b,N]=d.useState(!1),[a,v]=d.useState([]),[x,y]=d.useState([]);d.useEffect(()=>{(async()=>{try{const r=(await re(Y(D,"groups"))).docs.map(l=>({id:l.id,name:l.data().name}));y(r)}catch(i){console.error("Error fetching groups:",i)}})()},[]);const o=p=>{const i=p.target.files[0];i&&(g(i),M(i))},M=p=>{const i=new FileReader;i.onload=r=>{const l=new Uint8Array(r.target.result),c=$e(l,{type:"array"}),C=c.SheetNames[0],m=c.Sheets[C],k=ee.sheet_to_json(m);v(k)},i.readAsArrayBuffer(p)},u=async()=>{if(a.length===0)return j.error("à¦•à§‹à¦¨à§‹ à¦¡à§‡à¦Ÿà¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤");N(!0);try{const p=Ce(D),i=Y(D,"members");let r=0;for(const l of a){const c=l.Name||l["à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¨à¦¾à¦®"];if(!c)continue;const C=Math.floor(1e5+Math.random()*9e5),m="M-"+C,S=`G${l.Generation||l.à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨||1}-${C}`,L=U(i),E={uniqueId:m,displayId:S,name:c,fatherId:l["Father ID"]||l["à¦ªà¦¿à¦¤à¦¾à¦° à¦†à¦‡à¦¡à¦¿"]||"",motherId:l["Mother ID"]||l["à¦®à¦¾à¦¤à¦¾à¦° à¦†à¦‡à¦¡à¦¿"]||"",spouseIds:l["Spouse IDs"]?l["Spouse IDs"].toString().split(",").map(_=>_.trim()):[],childrenIds:l["Children IDs"]?l["Children IDs"].toString().split(",").map(_=>_.trim()):[],fatherName:l["Father Name"]||l["à¦ªà¦¿à¦¤à¦¾à¦° à¦¨à¦¾à¦®"]||"",motherName:l["Mother Name"]||l["à¦®à¦¾à¦¤à¦¾à¦° à¦¨à¦¾à¦®"]||"",generation:l.Generation||l.à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨||1,phone:l.Phone||l.à¦®à§‹à¦¬à¦¾à¦‡à¦²||"",address:l.Address||l.à¦ à¦¿à¦•à¦¾à¦¨à¦¾||"",gender:l.Gender||l.à¦²à¦¿à¦™à§à¦—||"Male",groupid:"",birthdate:l.Birthdate||l["à¦œà¦¨à§à¦® à¦¤à¦¾à¦°à¦¿à¦–"]||""},f=l["Group Name"]||l["à¦—à§à¦°à§à¦ªà§‡à¦° à¦¨à¦¾à¦®"]||l.Group||l.à¦—à§à¦°à§à¦ª,A=l["Group ID"]||l["à¦—à§à¦°à§à¦ª à¦†à¦‡à¦¡à¦¿"];if(A)E.groupid=A;else if(f){const _=x.find(w=>w.name?.toLowerCase()===f.toString().toLowerCase());_&&(E.groupid=_.id)}p.set(L,{...E,birthYear:l["Birth Year"]?parseInt(l["Birth Year"]):null,deathYear:l["Death Year"]?parseInt(l["Death Year"]):null,alive:l.Alive?.toString().toLowerCase()!=="false",profession:l.Profession||l.à¦ªà§‡à¦¶à¦¾||"",photoUrl:l["Photo URL"]||l["à¦›à¦¬à¦¿ à¦²à¦¿à¦™à§à¦•"]||null,createdAt:new Date,updatedAt:new Date,importSource:"excel_upload"}),r++}r>0?(await p.commit(),j.success(`${r} à¦œà¦¨ à¦¸à¦¦à¦¸à§à¦¯ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦²à§‹à¦¡ à¦¹à§Ÿà§‡à¦›à§‡!`),g(null),v([])):j.error("à¦ªà¦°à§à¦¯à¦¾à¦ªà§à¦¤ à¦¬à¦¾ à¦¸à¦ à¦¿à¦• à¦¡à§‡à¦Ÿà¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}catch(p){console.error("Upload error:",p),j.error("à¦†à¦ªà¦²à§‹à¦¡ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à§Ÿà§‡à¦›à§‡à¥¤")}finally{N(!1)}},I=()=>{const p=[{Name:"à¦¶à¦°à¦¿à¦«à§à¦² à¦‡à¦¸à¦²à¦¾à¦®",Gender:"Male","Birth Year":1950,Profession:"Farmer",Alive:"true",Phone:"017XXXXXXXX",Address:"à¦¢à¦¾à¦•à¦¾, à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶",Generation:1,"Group Name":"A Group",Birthdate:"1950-01-01"},{Name:"à¦†à¦°à¦¿à¦«à§à¦² à¦‡à¦¸à¦²à¦¾à¦®","Father ID":"M-XXXXXX",Gender:"Male","Birth Year":1980,Profession:"Teacher",Alive:"true",Phone:"018XXXXXXXX",Address:"à¦¢à¦¾à¦•à¦¾, à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶",Generation:2,"Spouse IDs":"M-YYYYYY","Children IDs":"M-ZZZZZZ","Group Name":"A Group",Birthdate:"1980-06-15"}],i=ee.json_to_sheet(p),r=ee.book_new();ee.book_append_sheet(r,i,"Members"),Ie(r,"family_members_sample.xlsx")};return e.jsxs("div",{className:"font-bangla max-w-6xl mx-auto space-y-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"à¦¬à¦¾à¦²à§à¦• à¦¸à¦¦à¦¸à§à¦¯ à¦†à¦ªà¦²à§‹à¦¡"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"à¦à¦•à§à¦¸à§‡à¦² à¦«à¦¾à¦‡à¦² à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡ à¦¬à¦‚à¦¶à§‡à¦° à¦¸à¦¦à¦¸à§à¦¯à¦¦à§‡à¦° à¦¤à¦¥à§à¦¯ à¦à¦•à¦¸à¦¾à¦¥à§‡ à¦¯à§‹à¦— à¦•à¦°à§à¦¨"})]}),e.jsxs("button",{onClick:I,className:"text-xs px-3 py-1.5 bg-indigo-50 text-indigo-600 border border-indigo-200 rounded hover:bg-indigo-100 transition-colors flex items-center gap-1 font-bold",children:[e.jsx("span",{children:"ðŸ“¥"})," à¦¸à§à¦¯à¦¾à¦®à§à¦ªà¦² à¦«à¦¾à¦‡à¦² à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-10 hover:bg-gray-50 transition-colors text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“„"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦¡à§‡à¦Ÿà¦¾ à¦¸à¦®à§à¦¬à¦²à¦¿à¦¤ Excel à¦«à¦¾à¦‡à¦² (.xlsx) à¦à¦–à¦¾à¦¨à§‡ à¦¡à§à¦°à¦ª à¦•à¦°à§à¦¨"}),e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:o,className:"hidden",id:"member-file-upload"}),e.jsx("label",{htmlFor:"member-file-upload",className:"cursor-pointer px-6 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-lg hover:bg-indigo-700 transition-all shadow-md active:scale-95",children:"à¦«à¦¾à¦‡à¦² à¦¬à¦¾à¦›à¦¾à¦‡ à¦•à¦°à§à¦¨"}),s&&e.jsxs("p",{className:"mt-4 text-sm font-semibold text-green-600",children:["à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¿à¦¤: ",s.name]})]}),a.length>0&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700",children:["à¦«à¦¾à¦‡à¦² à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰ (",a.length," à¦¸à¦¾à¦°à¦¿)"]}),e.jsx("button",{onClick:u,disabled:b,className:`px-6 py-2 rounded-lg text-white font-bold text-sm shadow-lg transition-all ${b?"bg-gray-400":"bg-green-600 hover:bg-green-700 active:scale-95"}`,children:b?"à¦†à¦ªà¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...":"à¦¸à¦¬ à¦†à¦ªà¦²à§‹à¦¡ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦•à¦°à§à¦¨"})]}),e.jsx("div",{className:"overflow-x-auto border rounded-xl shadow-inner bg-gray-50",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:Object.keys(a[0]).map(p=>e.jsx("th",{className:"px-4 py-3 text-left font-bold text-gray-600 uppercase tracking-wider",children:p},p))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.slice(0,15).map((p,i)=>e.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:Object.values(p).map((r,l)=>e.jsx("td",{className:"px-4 py-3 text-gray-700",children:r?.toString()},l))},i))})]})}),a.length>15&&e.jsxs("p",{className:"text-xs text-gray-400 text-center italic",children:["à¦†à¦°à¦“ ",a.length-15," à¦Ÿà¦¿ à¦¸à¦¾à¦°à¦¿ à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰à¦¤à§‡ à¦¦à§‡à¦–à¦¾à¦¨à§‹ à¦¹à§Ÿà¦¨à¦¿..."]})]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-800 mb-2",children:"ðŸ’¡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦à¦¬à¦‚ à¦Ÿà¦¿à¦ªà¦¸:"}),e.jsxs("ul",{className:"text-xs text-indigo-700 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"à¦à¦•à§à¦¸à§‡à¦²à§‡ 'Name', 'Father Name', 'Generation', 'Phone' à¦•à¦²à¦¾à¦®à¦—à§à¦²à§‹ à¦¥à¦¾à¦•à¦¤à§‡ à¦¹à¦¬à§‡à¥¤"}),e.jsx("li",{children:"à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦œà¦¨à§à¦¯ à¦à¦•à¦Ÿà¦¿ à¦‡à¦‰à¦¨à¦¿à¦• à¦†à¦‡à¦¡à¦¿ à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦¥à§‡à¦•à§‡ à¦…à¦Ÿà§‹à¦®à§‡à¦Ÿà¦¿à¦• à¦œà§‡à¦¨à¦¾à¦°à§‡à¦Ÿ à¦•à¦°à¦¾ à¦¹à¦¬à§‡à¥¤"}),e.jsx("li",{children:"à¦œà§‡à¦¨à¦¾à¦°à§‡à¦¶à¦¨ à¦¨à¦®à§à¦¬à¦° (à§§, à§¨, à§©...) à¦¦à¦¿à§Ÿà§‡ à¦¬à¦‚à¦¶à§‡à¦° à¦§à¦¾à¦ª à¦¬à§à¦à¦¾à¦¨à§‹ à¦¹à§Ÿà¥¤"})]})]})]})}function Ye(){const s={member_name:"",gender:"Male",t_shirt_size:"L",age:""},[g,b]=d.useState([]),[N,a]=d.useState(null),[v,x]=d.useState({name:"",mobile:"",email:"",headOfFamily:"",contributeAmount:"",paymentStatus:"Pending",members:[{...s,member_name:""}],group_id:""}),[y,o]=d.useState(!1),[M,u]=d.useState(null),[I,p]=d.useState("");d.useEffect(()=>{(async()=>{try{const S=(await re(Y(D,"groups"))).docs.map(L=>({id:L.id,...L.data()}));b(S),S.length>0&&x(L=>({...L,group_id:S[0].id}))}catch(k){console.error("Error fetching groups: ",k),j.error("à¦—à§à¦°à§à¦ª à¦¤à¦¾à¦²à¦¿à¦•à¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿà¦¨à¦¿à¥¤")}})()},[]);const i=m=>{N&&a(null);const{name:k,value:S}=m.target;x(L=>({...L,[k]:S}))},r=()=>{x(m=>({...m,members:[...m.members,{...s,member_name:""}]}))},l=(m,k)=>{const{name:S,value:L}=k.target,E=v.members.map((f,A)=>A===m?{...f,[S]:L}:f);x(f=>({...f,members:E}))},c=m=>{x(k=>({...k,members:k.members.filter((S,L)=>L!==m)}))},C=async m=>{m.preventDefault(),o(!0),u(null);try{const k=[...v.members];k[0]={...k[0],member_name:v.name};const S=k.length,L="HF-"+Math.floor(1e5+Math.random()*9e5),E={id:L,...v,members:k,totalMembers:S,createdAt:new Date};await Se(Y(D,"registrations"),E);const f=await Ee.toDataURL(L);p(f),u(E),j.success("âœ… à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦«à¦²!"),x({name:"",mobile:"",email:"",group_id:"1",contributeAmount:"",paymentStatus:"Pending",members:[{...s}]})}catch(k){console.error(k),j.error("à¦¤à§à¦°à§à¦Ÿà¦¿ à¦¹à§Ÿà§‡à¦›à§‡: "+k.message)}finally{o(!1)}};return d.useEffect(()=>{(async()=>{if(!sessionStorage.getItem("hasVisited"))try{const S=U(D,"stats","page_views");(await _e(S)).exists()?await J(S,{count:mt(1)}):await Qe(S,{count:1}),sessionStorage.setItem("hasVisited","true")}catch(S){console.error("Tracking Error:",S)}})()},[]),e.jsxs("div",{className:"max-w-5xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl font-bangla",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 border-b pb-4 mb-6 text-center",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ à¦¬à¦‚à¦¶ à¦…à¦¨à§à¦·à§à¦ à¦¾à¦¨à§‡à¦° à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦«à¦°à§à¦®"}),M&&I&&e.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 rounded-lg text-center",children:[e.jsx("p",{className:"text-lg font-bold text-green-800 mb-2",children:"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦«à¦²!"}),e.jsx(ze,{document:e.jsx(Xe,{data:M,qrCodeUrl:I}),fileName:`entry-card-${M.id}.pdf`,children:({loading:m})=>e.jsx("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 font-bold",children:m?"PDF à¦¤à§ˆà¦°à¦¿ à¦¹à¦šà§à¦›à§‡...":"ðŸ“¥ à¦à¦¨à§à¦Ÿà§à¦°à¦¿ à¦•à¦¾à¦°à§à¦¡ à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨"})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[e.jsxs("section",{className:"border border-gray-300 p-6 rounded-lg shadow-sm bg-gray-50",children:[e.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"à¦®à§‚à¦² à¦ªà§à¦°à¦¤à¦¿à¦¨à¦¿à¦§à¦¿ à¦“ à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦—à§‡à¦° à¦¤à¦¥à§à¦¯"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["à¦¨à¦¾à¦® (à¦¯à¦¿à¦¨à¦¿ à¦ªà§à¦°à¦¤à¦¿à¦¨à¦¿à¦§à¦¿à¦¤à§à¦¬ à¦•à¦°à¦¬à§‡à¦¨)",e.jsx("sapn",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:v.name,onChange:i,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700",children:["à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦¨à¦®à§à¦¬à¦°",e.jsx("sapn",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"mobile",name:"mobile",value:v.mobile,onChange:i,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["à¦‡à¦®à§‡à¦‡à¦² à¦…à§à¦¯à¦¾à¦¡à§à¦°à§‡à¦¸",e.jsx("sapn",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:v.email,onChange:i,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"group_id",className:"block text-sm font-medium text-gray-700",children:"à¦¦à¦²/à¦—à§à¦°à§à¦ª à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨*"}),e.jsx("select",{id:"group_id",name:"group_id",value:v.group_id,onChange:i,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",children:g.length===0?e.jsx("option",{value:"",children:"à¦—à§à¦°à§à¦ª à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."}):g.map(m=>e.jsxs("option",{value:m.id.toString(),children:[m.description,"-",m.name]},m.id))})]})]})]}),e.jsxs("section",{className:"border border-gray-300 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-green-700 mb-4",children:"à¦šà¦¾à¦à¦¦à¦¾/à¦«à¦¿ à¦ªà§à¦°à¦¦à¦¾à¦¨à§‡à¦° à¦¤à¦¥à§à¦¯"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contributeAmount",className:"block text-sm font-medium text-gray-700",children:"à¦šà¦¾à¦à¦¦à¦¾à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦¨"}),e.jsx("input",{type:"number",id:"contributeAmount",name:"contributeAmount",value:v.contributeAmount,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"à¦¯à§‡à¦®à¦¨: à§§à§¦à§¦à§¦"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentStatus",className:"block text-sm font-medium text-gray-700",children:"à¦ªà§‡à¦®à§‡à¦¨à§à¦Ÿ à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsxs("select",{id:"paymentStatus",name:"paymentStatus",value:v.paymentStatus,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"Pending",children:"Pending - à¦®à§à¦²à¦¤à¦¬à¦¿"}),e.jsx("option",{value:"Paid",children:"Paid - à¦ªà¦°à¦¿à¦¶à§‹à¦§à¦¿à¦¤"}),e.jsx("option",{value:"Waived",children:"Waived - à¦®à¦“à¦•à§à¦«"})]})]})]})]}),e.jsxs("section",{className:"border border-gray-300 p-6 rounded-lg shadow-2xl bg-indigo-50",children:[e.jsxs("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:["à¦…à¦¨à§à¦·à§à¦ à¦¾à¦¨à§‡ à¦…à¦‚à¦¶à¦—à§à¦°à¦¹à¦£à¦•à¦¾à¦°à§€ à¦¸à¦¦à¦¸à§à¦¯à¦¦à§‡à¦° à¦¤à¦¾à¦²à¦¿à¦•à¦¾ (à¦®à§‹à¦Ÿ:"," ",v.members.length," à¦œà¦¨)"]}),v.members.map((m,k)=>e.jsxs("div",{className:`relative p-4 border border-indigo-200 rounded-lg mb-4 bg-white ${k>0?"pt-8":""}`,children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-3",children:["à¦¸à¦¦à¦¸à§à¦¯ #",k+1]}),k>0&&e.jsx("button",{type:"button",onClick:()=>c(k),className:"absolute top-2 right-2 text-sm px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 transition",children:"à¦®à§à¦›à§‡ à¦«à§‡à¦²à§à¦¨ ðŸ—‘ï¸"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"à¦¨à¦¾à¦®"}),e.jsx("input",{type:"text",name:"member_name",value:k===0?v.name:m.member_name,onChange:S=>k===0?i({target:{name:"name",value:S.target.value}}):l(k,S),required:!0,placeholder:k===0?"à¦‰à¦ªà¦°à§‡à¦° à¦¨à¦¾à¦® à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼à¦­à¦¾à¦¬à§‡ à¦¨à§‡à¦“à¦¯à¦¼à¦¾ à¦¹à¦²à§‹":"à¦¸à¦¦à¦¸à§à¦¯à§‡à¦° à¦ªà§à¦°à§‹ à¦¨à¦¾à¦®",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 text-sm",disabled:k===0&&!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"à¦²à¦¿à¦™à§à¦—/à¦¶à§à¦°à§‡à¦£à¦¿"}),e.jsxs("select",{name:"gender",value:m.gender,onChange:S=>l(k,S),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 text-sm",children:[e.jsx("option",{value:"Male",children:"à¦›à§‡à¦²à§‡ (à¦ªà§à¦°à¦¾à¦ªà§à¦¤à¦¬à¦¯à¦¼à¦¸à§à¦•)"}),e.jsx("option",{value:"Female",children:"à¦®à§‡à¦¯à¦¼à§‡ (à¦ªà§à¦°à¦¾à¦ªà§à¦¤à¦¬à¦¯à¦¼à¦¸à§à¦•)"}),e.jsx("option",{value:"Child",children:"à¦¶à¦¿à¦¶à§ (à§§à§¦ à¦¬à¦›à¦°à§‡à¦° à¦¨à¦¿à¦šà§‡)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"à¦Ÿà¦¿-à¦¶à¦¾à¦°à§à¦Ÿ à¦¸à¦¾à¦‡à¦œ"}),e.jsxs("select",{name:"t_shirt_size",value:m.t_shirt_size,onChange:S=>l(k,S),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 text-sm",children:[e.jsx("option",{value:"S",children:"S"}),e.jsx("option",{value:"M",children:"M"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"XL",children:"XL"}),e.jsx("option",{value:"XXL",children:"XXL"}),e.jsx("option",{value:"NA",children:"NA (à¦¶à¦¿à¦¶à§à¦¦à§‡à¦° à¦œà¦¨à§à¦¯)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"à¦¬à¦¯à¦¼à¦¸ (à¦à¦šà§à¦›à¦¿à¦•)"}),e.jsx("input",{type:"number",name:"age",value:m.age,onChange:S=>l(k,S),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 text-sm"})]})]})]},k)),e.jsx("button",{type:"button",onClick:r,className:"mt-4 px-6 py-2 bg-indigo-500 text-white rounded-lg shadow-md hover:bg-indigo-600 transition font-medium",children:"âž• à¦†à¦°à§‹ à¦¸à¦¦à¦¸à§à¦¯ à¦¯à§à¦•à§à¦¤ à¦•à¦°à§à¦¨"})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:y,className:`w-full py-3 px-4 border border-transparent rounded-lg shadow-lg text-lg font-medium text-white ${y?"bg-gray-400":"bg-indigo-600 hover:bg-indigo-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300 ease-in-out`,children:y?"à¦¡à§‡à¦Ÿà¦¾ à¦¸à§‡à¦­ à¦¹à¦šà§à¦›à§‡...":"à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦•à¦°à§à¦¨"})})]})]})}function He({children:s}){const{user:g,loading:b}=de();return b?e.jsx("div",{children:"à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."}):g?e.jsx(Re,{to:"/admin/dashboard",replace:!0}):s}function te({children:s,allowedRoles:g=[]}){const{user:b,userData:N,loading:a}=de();return a?e.jsx("div",{className:"h-screen flex items-center justify-center",children:"à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."}):b?g.length>0&&N&&!g.includes(N.role)?e.jsx(Ft,{}):s:e.jsx(Re,{to:"/admin/login",replace:!0})}function ts(){return e.jsxs(pt,{children:[e.jsx(Z,{path:"/event-registration",element:e.jsx(Ye,{})}),e.jsx(Z,{path:"/",element:e.jsx(We,{})}),e.jsx(Z,{path:"/admin/login",element:e.jsx(He,{children:e.jsx(We,{})})}),e.jsx(Z,{path:"/admin/register",element:e.jsx(He,{children:e.jsx(Rt,{})})}),e.jsxs(Z,{path:"/admin",element:e.jsx(Lt,{}),children:[e.jsx(Z,{path:"dashboard",element:e.jsx(te,{allowedRoles:["admin","user"],children:e.jsx(Dt,{})})}),e.jsx(Z,{path:"profile",element:e.jsx(te,{allowedRoles:["admin","user"],children:e.jsx($t,{})})}),e.jsx(Z,{path:"scan",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Xt,{})})}),e.jsx(Z,{path:"create-entry",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Ye,{})})}),e.jsx(Z,{path:"list",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(_t,{})})}),e.jsx(Z,{path:"bulk-registration",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Tt,{})})}),e.jsx(Z,{path:"groups",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Et,{})})}),e.jsx(Z,{path:"users",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Gt,{})})}),e.jsx(Z,{path:"donate",element:e.jsx(te,{allowedRoles:["admin","user"],children:e.jsx(Bt,{})})}),e.jsx(Z,{path:"bulk-donate",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(qt,{})})}),e.jsx(Z,{path:"donation-list",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Yt,{})})}),e.jsx(Z,{path:"contribution-summary",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(Ht,{})})}),e.jsx(Z,{path:"members",element:e.jsx(te,{allowedRoles:["admin","user"],children:e.jsx(Jt,{})})}),e.jsx(Z,{path:"bulk-members-upload",element:e.jsx(te,{allowedRoles:["admin"],children:e.jsx(es,{})})})]}),e.jsx(Z,{path:"*",element:e.jsx(Re,{to:"/",replace:!0})})]})}at.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(gt,{children:e.jsx(Ct,{children:e.jsxs(Mt,{children:[e.jsx(ts,{}),e.jsx(ht,{position:"top-right"})]})})})}));
